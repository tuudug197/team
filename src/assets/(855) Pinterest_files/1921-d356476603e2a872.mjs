(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1921],{850115:e=>{e.exports="https://s.pinimg.com/webapp/goodIdea-b770896d.svg"},379507:e=>{e.exports="https://s.pinimg.com/webapp/haha-e2800d2d.svg"},637956:e=>{e.exports="https://s.pinimg.com/webapp/love-c31e0b8d.svg"},909745:e=>{e.exports="https://s.pinimg.com/webapp/thanks-62775475.svg"},128206:e=>{e.exports="https://s.pinimg.com/webapp/wow-3cb697ef.svg"},554290:(e,i,n)=>{var t=n(406557);e.exports=function(e){return"function"==typeof e?e:t}},498913:(e,i,n)=>{var t=n(422545),o=n(554290),a=n(640554),r=4294967295,s=Math.min;e.exports=function(e,i){if((e=a(e))<1||e>9007199254740991)return[];var n=r,l=s(e,r);i=o(i),e-=r;for(var d=t(l,i);++n<e;)i(n);return d}},418601:(e,i,n)=>{var t=n(14841),o=1/0;e.exports=function(e){return e?(e=t(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},640554:(e,i,n)=>{var t=n(418601);e.exports=function(e){var i=t(e),n=i%1;return i==i?n?i-n:i:0}},778423:e=>{e.exports={ReasonToChoose:{REPIN_BOARD:1,USER_ACTIVITY:4,CLICKTHROUGH:9,FRESH_REPIN_BOARD:47,FRESH_CLICKTHROUGH:48,FRESH_USER_ACTIVITY:49,LOCAL_REPIN_BOARD:13,LOCAL_CLICKTHROUGH:32,LOCAL_USER_ACTIVITY:33,P2P_CLICKTHROUGH:28,INSTANT_PFY_NON_MATERIALIZABLE:36,FOLLOWED_INTEREST:5,TOPIC_BEST_PINS:70,EMBEDDING_BASED_BEST_PINS:173,RECOMMENDED_TOPICS:65,RECOMMENDED_GEO_INTERESTS:192,USER_SEQUENCE_INTERESTS_PINS:193,GRAPHSAGE_USER_EMBEDDINGS_TO_ORGANIC_PINS:109,NAVBOOST_PFY:89,NAVBOOST_P2P:88,NOTIFICATION_NEWS_HUB:138,GEMINI_INTERESTS_FRESH:104,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN:100,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN_ENGAGEMENT:175,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_VIDEO:95,INTENTIONAL_DISTRIBUTION_DOMAIN:86,INTENTIONAL_DISTRIBUTION_TOPICS_STORY_PINS:91,INTENTIONAL_DISTRIBUTION_TOPICS_VIDEO:98,GRAPHSAGE_MULTI_PINS_TO_CREATOR_PINS_REALTIME:135,GRAPHSAGE_MULTI_PINS_TO_VIDEO_PINS_REALTIME:139,GRAPHSAGE_MULTI_PINS_TO_STORY_PINS_REALTIME:140,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGEED_INTERESTS_VIDEO:118,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGED_INTERESTS_STORY_PIN:130,CREATOR_DIRECT_INJECT:148,USER_INTERESTS_TO_LONGTERM_CREATOR_PINS:141,GRAPHSAGE_PRODUCT_PINS:97,GRAPHSAGE_USER_EMBEDDINGS_TO_PINS:108,PROMOTED_PIN:15,UNKNOWN:0,RECOMMENDED_CATEGORY:2,COOKIE_MONSTER:3,REALTIME_P2B:6,REALTIME_P2B_CLOSEUP:22,RECOMMENDED_INTEREST:7,VISUALLY_SIMILAR:8,BOARD_FOLLOW:35,USER_FOLLOW:45,RECOMMENDED_COMMERCE:10,EVERYTHING_FEED:11,RECOMMENDED_LOCAL_PIN:12,SEARCH:46,P2P_USER_COMMERCE:16,COMMERCE_EDUCATION:17,LANDING_PAGE_PINS:18,FOLLOWING_FEED:19,POPULAR_FEED:20,P2P_DYNAMIC_GRID:23,LANDING_PAGE_INTEREST_PINS:24,FRESH_PIN_FROM_PIN:25,FRESH_PIN_FROM_INTEREST:26,FRESH_PIN_FROM_BOARD:27,SIFTER_VIDEO_FROM_INTEREST:39,SIFTER_PRODUCTS:57,SIFTER_DISTRIBUTION_A:50,SIFTER_DISTRIBUTION_B:51,SIFTER_DISTRIBUTION_C:52,SIFTER_DISTRIBUTION_D:53,SIFTER_DISTRIBUTION_E:54,SIFTER_ACTIVATION_EXPERIMENT:58,SIFTER_FRESHMAKER_PIN_FROM_INTEREST:40,P2P_CLOSEUP:29,P2P_LIKE:30,P2P_PIN_CREATE:31,INSTANT_PFY:34,DYNAMIC_INSERTION:37,DYNAMIC_INSERTION_BOARD_FOLLOW:38,HYPERLOCAL_INTEREST_BOARD:41,NUX_BOARD_FOLLOW_P2P:42,INDIRECT_DOMAIN_PIN:43,PIXIE_PINS_FOR_BOARD:44,SCREENSHOT_SAVE:55,TEXT_EMBEDDINGS:56,FRESH_TEXT_EMBEDDINGS:67,PREFETCH_LOAD:60,DIVERSE_TOPICS:62,QUIZ_RESULTS:63,INTENTIONAL_DISTRIBUTION_TOPICS:64,INTENTIONAL_DISTRIBUTION_TOPICS_THIRD_PARTY:90,INTENTIONAL_DISTRIBUTION_GEMINI:73,INTENTIONAL_DISTRIBUTION_GEMINI_V5:120,INTENTIONAL_DISTRIBUTION_SHOP_STYLE_STL:74,INTENTIONAL_DISTRIBUTION_GRAPHSAGE:78,INTENTIONAL_DISTRIBUTION_REPIN_BOARD:80,INTENTIONAL_DISTRIBUTION_CLICKTHROUGH:81,INTENTIONAL_DISTRIBUTION_USER_ACTIVITY:82,INTENTIONAL_DISTRIBUTION_CREATOR_BASELINE:92,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS:102,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_STORY_PIN:103,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_DIVERSITY:105,PIXIE_RECENT_ACTION:66,NATIVE_CONTENT_TOPICS:68,BUBBLE_OPEN_TOPICS:69,TOPIC_BEST_PINS_V2:77,DAILY_BEST_PINS:79,TOPIC_BEST_PINS_V3:101,TOPIC_BEST_STORY_PINS:164,REC_SEQ_STORY_PIN_CLS:165,DARK_PROMOTED_PIN:71,POST_EXPLORE_TOPICS:72,GRAPHSAGE_EMBEDDINGS:75,DEMOGRAPHIC_PFY:76,SHOPPING_STL:83,UNAUTH_PIXIE_P2B:84,UNAUTH_PIXIE_P2P:85,VIDEO_EMBEDDINGS:87,VIDEO_EMBEDDINGS_GEMINI_V5:121,GEMINI_V5_EMBEDDINGS_STATIC:93,GEMINI_V5_EMBEDDINGS_FRESH:94,GEMINI_V5_EMBEDDINGS_REALTIME:106,GEMINI_V5_EMBEDDINGS_STORYPIN:107,CURATED_VIDEO_INTEREST:96,GRAPHSAGE_PRODUCT_PINS_LONGER_HISTORY:112,GRAPHSAGE_SHOPPABLE_INSPIRATION:126,GRAPHSAGE_PRODUCT_PINS_EXPERIMENTAL:134,NUX_GRAPHSAGE:99,GRAPHSAGE_USER_EMBEDDINGS_TO_PRODUCT_PINS:110,GRAPHSAGE_VIDEO_PINS:113,RECBOOST_REPIN_BOARD:114,RECBOOST_CLICKTHROUGH:115,RECBOOST_USER_ACTIVITY:116,RECBOOST_CREATOR_BOARDS:129,RECOMMENDED_BOARDS:117,RECOMMENDED_ANNOTATION_BOARDS:136,RECOMMENDED_GRAPHSAGE_BOARDS:153,INTENTIONAL_DISTRIBUTION_RECOMMENDED_GRAPHSAGE_BOARDS:191,RECOMMENDED_CREATOR_BOARDS:124,ANNOTATION_REC_CREATOR_BOARDS:127,INTENTIONAL_DISTRIBUTION_MANUAL_INTERESTS_VIDEO:119,INTENTIONAL_DISTRIBUTION_INTERESTS_VIDEO:143,INTENTIONAL_DISTRIBUTION_INTERESTS_STORY_PIN:144,REPIN_CREATOR_BOARD:122,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS:123,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS_REALTIME:131,FRESH_SIG_FROM_BOARD:125,RECENT_ENGAGED_CREATOR_BOARDS:128,RECENT_ENGAGED_BOARDS:132,SHOPPING_CREATOR_REALTIME:133,GRAPHSAGE_BASED_RECOMMENDED_CREATOR_BOARDS:137,PIXIE_P2P:142,NEW_USE_CASE_PINS:145,RECBOOST_NEW_USE_CASES:146,SEARCHSAGE_PFY:147,SEARCHSAGE_SHOPPING_PFY:155,INTEREST_EXPLORATION:149,INTEREST_EXPLORATION_TRENDY_QUERIES:150,INTEREST_EXPLORATION_RELATED_INTERESTS:151,RECBOOST_INTERESTS:152,HF_STORY_SHOPPING_RETARGETING:154,RECBOOST_STORY_PINS:156,RECBOOST_STORY_BOARDS:157,PINNABILITY_EMBEDDINGS:158,PINNABILITY_FRESH_STORY_EMBEDDINGS:159,PINNABILITY_STORY_EMBEDDINGS:160,EXPLORATION_STORY_PINS:161,EXPLORATION_STORY_PINS_BASELINE:162,EXPLOITATION_STORY_PINS:163,ANNOTATION_REC_CREATOR_STORY_PINS:166,GRAPHSAGE_MULTI_PINS_TO_STORY_PINS:167,IDEASTREAM_GRAPHSAGE_STORY_PINS:168,HF_EDUCATION_PIN_INSERTION:169,RP_EDUCATION_PIN_INSERTION:170,USER_TO_CREATOR_STORY_PINS:171,USER_TO_CREATOR_STORY_PINS_ENGAGEMENT:176,COENGAGEMENT_STORY_PINS:172,ANNOTATION_STORY_PINS:177,DISCOVER_STREAM_DEMOGRAPHIC_FALLBACK:178,DISCOVER_STREAM_CELEBRITY:179,GRAPHSAGE_SHOPIFY_VMP_PRODUCT_PINS:180,CREATOR_BEST_IDEA_PINS:181,INTEREST_BEST_IDEA_PINS:182,NAVBOOST_STORY_PINS:183,SHOPPING_DISTRIBUTION_PINS:185,WATCH_TAB_EHQ_STORIES:186,NOTIF_LEARNED_RETRIEVAL:187,LANDING_PAGE_PIN_RECOMMENDATIONS:188,PINNERSAGE_LEARNED_EMBEDDINGS:189,TOPIC_FEED:190,RTC_IMPROVEMENT_TEST_1:501,RTC_IMPROVEMENT_TEST_2:502,RTC_IMPROVEMENT_TEST_3:503,RTC_IMPROVEMENT_TEST_4:504,RTC_IMPROVEMENT_TEST_5:505,RTC_IMPROVEMENT_TEST_6:506,RTC_IMPROVEMENT_TEST_7:507,RTC_IMPROVEMENT_TEST_8:508,RTC_IMPROVEMENT_TEST_9:509,RTC_IMPROVEMENT_TEST_10:510,RTC_IMPROVEMENT_TEST_11:511,RTC_IMPROVEMENT_TEST_12:512,RTC_IMPROVEMENT_TEST_13:513,RTC_IMPROVEMENT_TEST_14:514,RTC_IMPROVEMENT_TEST_15:515,RTC_BLENDER_TEST:516,P2P_COMMERCE:21,P2P:14,LENS_CAMERA_VISUALLY_SIMILAR:111,RECENT_FOLLOWED_INTEREST:59,RECENT_FOLLOWED_BOARD:61,GRAPHSAGE_SHOPIFY_VMP_MERCHANT_ACTIVATION_PRODUCT_PINS:174,FOLLOWED_INTEREST_SEO_BESPIN_EXPORATION:184,XPIXIE_TO_PRODUCT_PINS:194},ThroughObjectType:{PIN_ID:1,IMAGE_SIGNATURE:2,BOARD_ID:3,INTEREST_ID:4,SEARCH_QUERY:5,CREATOR_ID:6,ANNOTATION_ID:7,NEARDUP_SIGNATURE:8}}},787410:(e,i,n)=>{n.d(i,{Z:()=>c});var t=n(667294),o=n(973935),a=n(785893);function r(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}const s=new Map;let l=null;const d=e=>{e.forEach((e=>{const i=s.get(e.target);i&&i(e)}))},c=e=>{class i extends t.Component{constructor(...e){super(...e),r(this,"seen",!1),r(this,"enter",(e=>{const i=e.intersectionRatio>0||e.isIntersecting;this.seen=i,this.seen&&this.props.onVisibilityChanged(!0)})),r(this,"leave",(()=>{const e=this._node;e&&(e=>s.has(e))(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1)})),r(this,"observe",(e=>{try{this._node=o.findDOMNode(this)}catch(t){return}if(!this._node)return;const{inAdsDesktopVideoExperiment:i}=this.props,n=this._node;((e,i="-64px 0px 0px 0px",n)=>{const t={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:i,threshold:[0,.5,1]};l=l||new window.IntersectionObserver(d,t),s.set(e,n),l.observe(e)})(n,e,(e=>{if(!s.has(n))return;const t=i?e.intersectionRatio>=.5:e.intersectionRatio>0||e.isIntersecting,o=this.props.trackFullVisible?e.intersectionRatio>=1:t,a=this.props.trackFullVisible?0===e.intersectionRatio:!o;!this.seen&&o?this.enter(e):this.seen&&a&&this.leave()}))}))}componentDidMount(){const{rootMargin:e}=this.props;this.observe(e)}componentWillUnmount(){const e=this._node;e&&(this.leave(),(e=>{l.unobserve(e),s.delete(e)})(e))}render(){return(0,a.jsx)(e,{...this.props})}}return r(i,"displayName",`DeprecatedWithVisibilityChanged(${e.displayName||e.name})`),i}},991773:(e,i,n)=>{n.d(i,{Z:()=>s});var t=n(667294);const o=new Map;let a=null;const r=e=>{e.forEach((e=>{const i=o.get(e.target);i&&i(e)}))};function s({onVisibilityChanged:e,inAdsDesktopVideoExperiment:i,trackFullVisible:n,rootMargin:s}){const l=(0,t.useRef)(null);let d=!1;const c=()=>{var i;l.current instanceof HTMLElement&&(i=l.current,o.has(i))&&(d&&(e(!1),d=!1))},u=(0,t.useCallback)((t=>{l.current instanceof HTMLElement&&((e,i="-64px 0px 0px 0px",n)=>{const t={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:i,threshold:[0,.5,1]};a=a||new window.IntersectionObserver(r,t),o.set(e,n),a.observe(e)})(l.current,t,(t=>{if(!o.has(l.current))return;const a=i?t.intersectionRatio>=.5:t.intersectionRatio>0||t.isIntersecting,r=n?t.intersectionRatio>=1:a,s=n?0===t.intersectionRatio:!r;!d&&r?(i=>{const n=i.intersectionRatio>0||i.isIntersecting;d=n,d&&e(!0)})(t):d&&s&&c()}))}),[l.current]);return(0,t.useEffect)((()=>(u(s),()=>{var e;l.current instanceof HTMLElement&&(c(),e=l.current,a.unobserve(e),o.delete(e))})),[u]),l}},832654:(e,i,n)=>{n.d(i,{Z:()=>o});var t=n(349700);function o(e,i){const{alt_text:n,auto_alt_text:o}=e;return n?(0,t.nk)(i._('This contains: {{ altText }}', 'web.altText', 'Alt text input by a human'),{altText:n}).join(""):o?(0,t.nk)(i._('This may contain: {{ autoAltText }}', 'web.altText', 'Alt text generated by a computer'),{autoAltText:o}).join(""):null}},69e4:(e,i,n)=>{n.d(i,{Z:()=>c});var t=n(667294),o=n(702664),a=n(521556),r=n(898781),s=n(6637);var l=n(883119),d=n(785893);function c({favorited:e,favoriteCount:i,isCloseupButton:n,onFavorite:c,onUnfavorite:u,pinId:_,size:p}){const h=(0,r.ZP)(),m=(0,o.useDispatch)(),[g,f]=(0,t.useState)(!1),[v,x]=(0,t.useState)(e),[y,P]=(0,t.useState)(null!=i?i:0),b=async()=>{var e;x(!v),f(!0),v?(P(y-1),await m((e=_,async i=>{await s.Z.create("ApiResource",{url:`/v3/pins/${e}/favorite/`}).callDelete(),i(function(e){return{type:"PIN_FAVORITE",payload:{id:e,increment:-1,value:!1}}}(e))})),u(),f(!1)):(P(y+1),await m(function(e){return async i=>{await s.Z.create("ApiResource",{url:`/v3/pins/${e}/favorite/`}).callCreate(),i(function(e){return{type:"PIN_FAVORITE",payload:{id:e,increment:1,value:!0}}}(e))}}(_)),c(),f(!1))},w=y<10?y:h._('9+', 'favoriteButton.favoriteCountText', 'Text shown when greater than 9 favorites on Pin');return(0,d.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[void 0!==i&&y>0&&(0,d.jsx)(l.xv,{size:"200",weight:"bold",children:w}),(0,d.jsx)(a.Z,{isCloseupButton:n,isDisabled:g,isFavorited:v,onTap:()=>{b()},size:p})]})}},578722:(e,i,n)=>{n.d(i,{H1:()=>d,HW:()=>a,iL:()=>l,pN:()=>s,s_:()=>r});var t=n(19121),o=n(773285);const a=new Date(2022,1,1);function r(){const{checkExperiment:e}=(0,o.F)(),i=["enabled_public","employees"].includes(e("web_ip_plays",{dangerouslySkipActivation:!0}).group),n=e("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled,t=e("android_ios_web_ip_plays_dark_reads").anyEnabled;return i||n||t}function s({isOwnPin:e,isStoryPin:i,pinCreationDate:n,surface:r}){const s=(0,t.Z)(),{checkExperiment:l}=(0,o.F)(),d=l("web_play_playtime_pin_stats",{dangerouslySkipActivation:!0}).anyEnabled,c=!!("CreatorProfileStoryPinGrid"===r&&i&&n&&n.getTime()>=a.getTime()&&d&&s.isPartner&&e)&&l("web_ip_plays").anyEnabled,u=["enabled_public","employees"].includes(l("web_ip_plays",{dangerouslySkipActivation:!0}).group);if("CreatorProfileStoryPinGrid"===r&&i&&n&&n.getTime()>=a.getTime()){if(s.isPartner)return e&&c||!e&&u;if(l("web_ip_pinner_plays").anyEnabled)return!0}return!1}function l({isOwnPin:e,isPartner:i}){const{checkExperiment:n}=(0,o.F)(),t=["enabled_public","employees"].includes(n("web_ip_plays",{dangerouslySkipActivation:!0}).group),a=n("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled;return!(e||!(a&&!i||t&&i))}function d({isOwnPin:e,isPartner:i}){const{checkExperiment:n}=(0,o.F)(),t=n("web_ip_plays",{dangerouslySkipActivation:!0}).anyEnabled,a=n("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled;return!(!e||!(t&&i||a&&!i))}},955362:(e,i,n)=>{n.r(i),n.d(i,{default:()=>f});var t=n(667294),o=n(702664),a=n(205202),r=n(248975),s=n(959275),l=n(883561),d=n(898781),c=n(542563),u=n(811403),_=n(623568),p=n(844949),h=n(946595),m=n(883119),g=n(785893);function f({feedbackData:e,feedbackType:i,pin:n,pinTitle:f,setForcePrimary:v,transparentBackground:x}){var y,P;const b=(0,d.ZP)(),w=(0,o.useDispatch)(),{viewParameter:S,viewType:T}=(0,h.E)(),{reportPin:I}=(0,p.f)(),[E,A]=(0,t.useState)(!1),[C,R]=(0,t.useState)(),{ad_match_reason:j,show_ad_reasons:k,board:O,category:N,description:D,id:z="",images:B,is_promoted:L,pinner:Z,promoter:M,recommendation_reason:V,source_interest:F,videos:G}=n;var H;const U=(H=L?60:50,function(e){return(0,l.ZP)((e||"").trim(),H)})(null!=D?D:""),W=(0,a.Z)(B,"236x"),$=(0,_.iR)(G),Y=(0,c.Z)(101,{component:0,element:981,object_id_str:z,aux_data:{feedback_type:i}}),X=()=>{k||(v(!1),w((0,u.i0)(z)),A(!1))};return(0,g.jsxs)(t.Fragment,{children:[(0,g.jsx)(m.xu,{"data-test-id":"feedback-button",ref:R,children:(0,g.jsx)(m.hU,{accessibilityLabel:b._('More information', 'accessibility label for overflow menu button', 'accessibility label for overflow menu button'),bgColor:x?"transparent":"white",icon:"ellipsis",iconColor:"darkGray",onClick:()=>{E?X():(v(!0),A(!0)),Y()},size:"sm"})}),E&&(0,g.jsx)(m.xu,{onFocus:e=>e.stopPropagation(),children:(0,g.jsx)(s.Z,{anchor:C,ad_match_reason:j,bestPinImgSrc:(0,r.Z)({images:n.images,embedSrc:null===(y=n.embed)||void 0===y?void 0:y.src,embedType:null===(P=n.embed)||void 0===P?void 0:P.type}),board:O,feedbackData:e,feedbackType:i,hideDownload:$,isPromoted:L,onLinkClick:()=>{E&&X()},onDismiss:X,onHide:X,onDownloadHideFlyout:()=>{v(!1),A(!1)},pinCategory:N,pinDescription:U,pinId:z,pinImgSrc:W,pinner:Z,pinTitle:f,promoter:M,recommendationReason:V,reportPin:()=>I(n,S,T),sourceInterest:F,viewParameter:S,viewType:T})})]})}},959275:(e,i,n)=>{n.d(i,{Z:()=>L});var t=n(667294),o=n(702664),a=n(941646),r=n(883119),s=n(785893);function l({iconAccessibilityLabel:e,icon:i,linkAccessibilityLabel:n,showNavigationIcon:t,text:o}){return(0,s.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,s.jsx)(a.Z,{id:"ad-reason-icon",children:(0,s.jsx)(r.Sj,{accessibilityLabel:e,bgColor:"lightGray",icon:i,iconColor:"darkGray"})}),(0,s.jsx)(r.xu,{alignSelf:"center","data-test-id":"ad-location-targeting-reason",height:"100%",marginStart:2,children:(0,s.jsx)(r.xv,{children:o})}),t&&n&&(0,s.jsx)(r.kC,{direction:"column",justifyContent:"center",children:(0,s.jsx)(r.JO,{accessibilityLabel:n,color:"default",icon:"arrow-forward"})})]})}var d=n(121151),c=n(966113),u=n(898781),_=n(349700),p=n(407043);const{ACCOUNT_SETTINGS:h,CANONICAL_MAIN_URL:m,HELP_BLOCKING:g,HELP_PROMOTED_PINS_URL:f}=c.Z.settings;function v({onDismiss:e,brandName:i,country:n,language:t,isAgeMatched:o,isBehaviorTargetingMatched:c,isCustomerListMatched:v,isGeoPostalCodeMatched:x,isGeoRegionMatched:y,isShoppingTargetingRematched:P}){const{logContextEvent:b}=(0,p.v)(),w=(0,u.ZP)(),S=x||y||o||c||P||v;return(0,s.jsx)(d.ZP,{accessibilityModalLabel:w._('Why am I seeing this Ad?', 'app.common.react.components.PinRep.components.AdReasonsModal', 'Modal for explaining the reasons an advertiser is targeting a user'),onDismiss:e,children:(0,s.jsxs)(r.xu,{paddingX:8,paddingY:6,children:[(0,s.jsxs)(r.xu,{display:"flex",justifyContent:"center",marginBottom:6,position:"relative",children:[(0,s.jsx)(r.xu,{position:"absolute",left:!0,children:(0,s.jsx)(r.hU,{accessibilityLabel:w._('Close', 'app.common.react.components.PinRep.components.AdReasonsModal.closeModal', 'Close ad reasons modal'),icon:"cancel",iconColor:"darkGray",onClick:e,size:"sm"})}),(0,s.jsx)(r.X6,{align:"center",size:"500",children:w._('Why am I seeing this ad?', 'Heading for promoted Pins explanation', 'Heading for promoted pins explanation')})]}),(0,s.jsxs)(r.xu,{children:[(0,s.jsxs)(r.kC,{direction:"column",gap:{row:0,column:4},children:[(0,s.jsx)(r.xu,{children:(0,s.jsx)(r.xv,{children:(0,_.nk)(w._('{{ brandName }} wants to get their ads in front of people like you. {{ learnMoreLink }}', 'app.common.react.components.PinRep.components.AdReasonsModal.advertiserExplanation', 'text informing the user about who is the advertiser'),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-brand-name"),learnMoreLink:(0,s.jsx)(a.Z,{id:"ad-reasons-learn-more-link",children:(0,s.jsx)(r.xv,{inline:!0,children:(0,s.jsx)(r.rU,{href:f,inline:!0,onClick:()=>{b({event_type:101,component:13756,element:12057})},target:"blank",underline:"hover",children:w._('Learn more', 'app.common.react.components.PinRep.components.AdReasonsModal.learnMoreLink', 'Learn more link for info about the reasons an ad is shown')})},"ad-reasons-learn-more-link")})})})}),S&&(0,s.jsx)(r.xu,{marginBottom:4,children:(0,s.jsx)(r.xv,{children:(0,_.nk)(w._('{{ brandName }} is trying to reach people who fit the following criteria:', 'app.common.react.components.PinRep.components.AdReasonsModal.audienceExplanation', 'text informing the user about who is the advertiser\'s target audience'),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-brand-name")})})})]}),(0,s.jsx)(a.Z,{id:"ad-reasons",children:(0,s.jsxs)(r.kC,{direction:"column",flex:"none",gap:{row:0,column:4},children:[x||y?(0,s.jsx)(r.iP,{role:"link",href:`${m}${h}`,onTap:()=>{b({event_type:101,component:13756,element:12059})},target:"blank",children:(0,s.jsx)(l,{iconAccessibilityLabel:w._('Icon for ad targeting location', 'app.common.react.components.PinRep.components.AdReasons.locationIcon', 'Icon for ad targeting location'),icon:"location",linkAccessibilityLabel:w._('Navigate to account settings', 'app.common.react.components.PinRep.components.AdReasonRow.icon', 'An icon for navigating to account settings'),showNavigationIcon:!0,text:(0,_.nk)(w._('Your primary location is in {{countryName}} and your primary language is {{language}}', 'app.common.react.components.PinRep.components.AdReasonsModal.locationTargeting', 'Ad explanation for targeting location'),{countryName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:n},"ad-reasons-country-name"),language:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-language")})})}):null,o&&(0,s.jsx)(l,{iconAccessibilityLabel:w._('Icon for ad targeting age', 'app.common.react.components.PinRep.components.AdReasons.ageIcon', 'Icon for ad targeting age'),icon:"person",text:(0,_.nk)(w._('{{ brandName }} is trying to reach people in your age range', 'app.common.react.components.PinRep.components.AdReasonsModal.ageTargeting', 'Ad explanation for targeting age range'),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-age-brand-name")})}),c&&(0,s.jsx)(l,{iconAccessibilityLabel:w._('Icon for ad targeting search history', 'app.common.react.components.PinRep.components.AdReasons.searchIcon', 'Icon for ad targeting search history'),icon:"search",text:w._('Your Pinterest browsing history and search behavior', 'app.common.react.components.PinRep.components.AdReasonsModal.searchTargeting', 'Ad explanation for targeting the search history of the user')}),P&&(0,s.jsx)(l,{iconAccessibilityLabel:w._('Icon for ad targeting customers who interacted with this brand previously', 'app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargetingIcon', 'Ad explanation for targeting users who have interacted with an advertiser brand'),icon:"clock",text:(0,_.nk)(w._('You\'ve interacted with {{brandName}} before', 'app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargetingText', 'Text explaining the ad reason for targeting users who interacted with brand previously'),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"retargeting-ad-reason")})}),v&&(0,s.jsx)(l,{iconAccessibilityLabel:w._('Icon for ad targeting user on an audience list', 'app.common.react.components.PinRep.components.AdReasons.genderIcon', 'Icon for ad targeting gender'),icon:"menu",text:(0,_.nk)(w._('You\'re on an audience list provided by {{brandName}}', 'app.common.react.components.PinRep.components.AdReasonsModal.customerListTargeting', 'Ad explanation for targeting customer list'),{brandName:(0,s.jsx)(r.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-customer-list")})}),S&&(0,s.jsx)(r.xu,{marginBottom:1,children:(0,s.jsx)(r.xv,{children:w._('There could also be more factors not listed here.', 'app.common.react.components.PinRep.components.AdReasonsModal.miscFactors', 'Text explaining there are more targeting factors')})})]})}),(0,s.jsxs)(r.kC,{direction:"column",gap:{row:0,column:1},children:[(0,s.jsx)(r.xu,{marginBottom:3,marginTop:3,children:(0,s.jsx)(r.iz,{})}),(0,s.jsx)(r.xu,{marginBottom:1,marginTop:1,children:(0,s.jsx)(r.X6,{size:"400",children:w._('I don\'t want to see this ad', 'app.common.react.components.PinRep.components.AdReasonsModal.hideThisAdHeading', 'Text for explaining how to hide an ad')})}),(0,s.jsx)(r.xu,{marginBottom:4,children:(0,s.jsx)(r.xv,{children:(0,_.nk)(w._('If you don\'t want to see ads from a specific advertiser you can block the advertiser\'s Pinterest profile. {{learnMoreLink}}', 'app.common.react.components.PinRep.components.AdReasonsModal.blockAdvertiserText', 'Text explaining how to block an advertiser profile'),{learnMoreLink:(0,s.jsx)(r.xv,{inline:!0,children:(0,s.jsx)(r.rU,{inline:!0,href:g,onClick:()=>{b({event_type:101,component:13756,element:12058})},target:"blank",underline:"hover",children:w._('Learn more', 'app.common.react.components.PinRep.components.AdReasonsModal.learnMoreLink', 'Learn more link for info about the reasons an ad is shown')})},"ad-reasons-learn-more-link")})})})]})]})]})})}var x=n(784590),y=n(19121),P=n(802201),b=n(780280);function w({pinId:e,onDismiss:i}){var n,o,a,r;const{logContextEvent:l}=(0,p.v)(),{locale:d}=(0,b.B)(),{country:c=""}=(0,y.Z)(),u=(0,x.Z)({name:"CountriesResource",options:{hasEmptyState:!0}}),_=(0,x.Z)({name:"LocalesResource"}),h=(0,P.S6)()(e);(0,t.useEffect)((()=>{l({event_type:120,component:13756})}),[l]);const{ad_targeting_attribution:m,promoter:g}=null!=h?h:{},{is_age_matched:f=!1,is_behavior_targeting_matched:w=!1,is_customer_list_matched:S=!1,is_geo_postal_code_matched:T=!1,is_geo_region_matched:I=!1,is_shopping_retargeting_matched:E=!1}=null!==(n=function(e=null,i=4){return e&&Object.keys(e).filter((i=>"boolean"==typeof e[i])).slice(0,i).reduce(((i,n)=>({...i,[n]:e[n]})),{})}(m))&&void 0!==n?n:{},A=null!==(o=null==g?void 0:g.full_name)&&void 0!==o?o:"",C=function(e,i){var n;const{name:t=""}=null!==(n=e.find((e=>e.key===i)))&&void 0!==n?n:{};return t}(null!==(a=u.data)&&void 0!==a?a:[],c),R=function(e,i){var n;const{name:t=""}=null!==(n=e.find((e=>e.key===i)))&&void 0!==n?n:{};return t}(null!==(r=_.data)&&void 0!==r?r:[],d);return(0,s.jsx)(v,{brandName:A,country:C,language:R,isAgeMatched:f,isBehaviorTargetingMatched:w,isCustomerListMatched:S,isGeoPostalCodeMatched:T,isGeoRegionMatched:I,isShoppingTargetingRematched:E,onDismiss:i})}var S=n(468593),T=n(149230),I=n(248034),E=n(61877),A=n(760372),C=n(778423),R=n(813401),j=n(680046),k=n(827896),O=n(811403),N=n(55275),D=n(276775);function z(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}class B extends t.Component{constructor(e){super(e),z(this,"getRecommendationDescription",(()=>{const{ad_match_reason:e,board:i,feedbackType:n,pinner:t,promoter:o,recommendationReason:a,sourceInterest:r}=this.props;return this.feedbackHelpers.getRecommendationDescription({ad_match_reason:e,board:i,feedbackType:n,makeNavigateLink:this.makeNavigateLink,pinner:t,promoter:o,recommendationReason:a,sourceInterest:r})})),z(this,"getRecommendationDescriptionImage",(()=>{const{board:e,feedbackType:i,pinner:n,recommendationReason:t}=this.props;if("followed"!==i&&"pfyBoard"!==i)return null;let o,a,l;return n&&n.explicitly_followed_by_me?(o=n.image_small_url,a="50%",l=`/${n.username}`):e&&e.image_thumbnail_url&&(o=e.image_thumbnail_url,a="4px",l=t&&t.board&&t.board.url||e.url),o?(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:a}},flex:"none",marginStart:3,overflow:"hidden",children:(0,s.jsx)(r.iP,{onTap:()=>{var e;return this.props.history.push(null!==(e=l)&&void 0!==e?e:"")},children:(0,s.jsx)(r.zd,{height:40,wash:!0,width:40,children:(0,s.jsx)(r.Ee,{alt:"",fit:"cover",naturalHeight:1,naturalWidth:1,src:o})})})}):null})),z(this,"getUnfollowAction",(()=>{const{board:e,feedbackType:i,pinner:n,sourceInterest:t}=this.props;return this.feedbackHelpers.getUnfollowAction({board:e,feedbackType:i,makeNavigateLink:this.makeNavigateLink,pinner:n,sourceInterest:t})})),z(this,"getUndoText",(e=>"unfollowPinner"===e||"unfollowBoard"===e?this.props.i18n._('Follow again', 'Caption for button to undo a unfollowing of a topic', 'Caption for button to undo a unfollowing of a topic'):"")),z(this,"feedbackHelpers",(0,j.ZP)({i18n:this.props.i18n,interpolateNamedTemplate:_.nk})),z(this,"makeNavigateLink",((e,i,n,t)=>(0,s.jsx)(r.rU,{onClick:this.props.onLinkClick,href:i,inline:!0,underline:"hover",children:(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:t?{display:"inline",color:"white",textDecorationColor:"white"}:{display:"inline"}},children:n})},e))),z(this,"reportPinOption",(()=>({action:"reportPin",elementType:974,text:this.props.i18n._('Report Pin', 'Report a pin in the dropdown', 'Report a pin in the dropdown'),description:this.props.i18n._('This goes against Pinterest\'s community guidelines', 'Description for the report pin option', 'Description for the report pin option'),callback:this.props.reportPin,dataTestId:"report-pin-option"}))),z(this,"hidePinOption",(e=>{const{clientTrackingParams:i,feedbackData:n,feedbackType:t,pinId:o,recommendationReason:a}=this.props,r="search"===t?973:982,{action:s,actionOptions:l}=this.feedbackHelpers.getHidePinAction({feedbackData:n,feedbackType:t,pinId:o,recommendationReasonId:a&&a.reason&&C.ReasonToChoose[a.reason],pinFeedbackType:"pfy"===t?4:10,throughId:a&&(0,j.yl)(a),throughProperties:a&&(0,j.XZ)(a),clientTrackingParams:i(o)}),d=this.props.i18n._('Hide Pin', 'message displayed in pin feedback list', 'message displayed in pin feedback list');return{action:s,actionOptions:l,feedbackText:this.pinHiddenFeedbackText(e),text:d,description:this.props.i18n._('See fewer Pins like this', 'Description for the hide pin option', 'Description for the hide pin option'),elementType:r}})),z(this,"stopRecommendationOption",(()=>{const{clientTrackingParams:e,feedbackData:i,feedbackType:n,pinId:t,recommendationReason:o}=this.props,{board:a,reason:r}=null!=o?o:{},s=r&&C.ReasonToChoose[r],l=o&&(0,j.yl)(o),d=o&&(0,j.XZ)(o),c="pfyBoard"===n,{action:u,actionOptions:p}=this.feedbackHelpers.getHidePinAction({feedbackData:i,feedbackType:n,pinId:t,recommendationReasonId:s,pinFeedbackType:c?2:4,throughId:l,throughProperties:d,clientTrackingParams:e(t)}),h=a?this.makeNavigateLink("boardUrl",a.url,a.name,!0):"";return{action:u,actionOptions:p,feedbackText:{subTitle:c&&a?(0,_.nk)(this.props.i18n._('We won\'t show you Pins inspired by your board {{ formattedBoard }} anymore.', 'Primary caption displayed in pin feedback list to unfollow a board', 'Primary caption displayed in pin feedback list to unfollow a board'),{formattedBoard:h}):this.props.i18n._('Got it! We won\'t show you Pins like this in the future.', 'message displayed after stopping recommendations from a pin', 'message displayed after stopping recommendations from a pin')},text:c&&a?(0,_.nk)(this.props.i18n._('Stop seeing Pins inspired by {{ boardName }}', 'Primary caption displayed in pin feedback list to unfollow a board', 'Primary caption displayed in pin feedback list to unfollow a board'),{boardName:a.name}):this.props.i18n._('See fewer Pins like this', 'Feedback option to stop recommendations inspired by this Pin', 'Feedback option to stop recommendations inspired by this Pin'),elementType:284}})),z(this,"unfollowBoardOption",(()=>{var e,i;const{board:n}=this.props,t=n?this.makeNavigateLink("boardUrl",null!==(e=n.url)&&void 0!==e?e:"",null!==(i=n.name)&&void 0!==i?i:"",!0):"",o=(0,_.nk)(this.props.i18n._('Unfollow {{ boardName }}', 'Primary caption displayed in pin feedback list to unfollow a board', 'Primary caption displayed in pin feedback list to unfollow a board'),{boardName:null==n?void 0:n.name}),a=(0,_.nk)(this.props.i18n._('Got it! You unfollowed {{ formattedBoard }} and won\'t see Pins saved to it in the future.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedBoard:t});return{action:"unfollowBoard",actionOptions:{board_id:null==n?void 0:n.id},feedbackText:{title:"",subTitle:a},text:o,description:(0,_.nk)(this.props.i18n._('Stop seeing Pins from the board "{{ boardName }}"', 'Secondary caption displayed in pin feedback list to unfollow a board', 'Secondary caption displayed in pin feedback list to unfollow a board'),{boardName:null==n?void 0:n.name}),elementType:10614}})),z(this,"unfollowTopicOption",(()=>{const{sourceInterest:e}=this.props;if(e){const{id:i,name:n="",url_name:t=""}=e,o=`/topics/${t}`,a=this.makeNavigateLink("topicUrl",o,n,!0),r=(0,_.nk)(this.props.i18n._('See fewer Pins from {{ topicName }}', 'Primary caption displayed in pin feedback list to unfollow a topic', 'Primary caption displayed in pin feedback list to unfollow a topic'),{topicName:n}),s=(0,_.nk)(this.props.i18n._('We\'ll show you fewer Pins from {{ formattedTopic }} in the future.', 'Confirmation text after unfollowing a topic', 'Confirmation text after unfollowing a topic'),{formattedTopic:a});return{action:"unfollowTopic",actionOptions:{interest_id:i,interest_list:A.X},feedbackText:{title:"",subTitle:s},text:r,description:(0,_.nk)(this.props.i18n._('Stop seeing Pins from the topic "{{ topicName }}"', 'Secondary caption displayed in pin feedback list to unfollow a topic', 'Secondary caption displayed in pin feedback list to unfollow a topic'),{topicName:e.name}),elementType:976}}return null})),z(this,"unfollowUserOption",(()=>{const{pinner:e}=this.props,{id:i,username:n,full_name:t}=null!=e?e:{},o=`/${n}`,a=e?this.makeNavigateLink("pinnerUrl",o,null!=t?t:"",!0):"";return{action:"unfollowPinner",actionOptions:{user_id:i},feedbackText:{title:"",subTitle:(0,_.nk)(this.props.i18n._('Got it! You unfollowed {{ formattedUser }} and won\'t see Pins they save in the future.', 'Confirmation text after unfollowing a user', 'Confirmation text after unfollowing a user'),{formattedUser:a})},text:(0,_.nk)(this.props.i18n._('Unfollow {{ fullName }}', 'Primary caption displayed in pin feedback list to unfollow a user', 'Primary caption displayed in pin feedback list to unfollow a user'),{fullName:t}),description:this.props.i18n._('Stop seeing all their Pins', 'Secondary caption displayed in pin feedback list to unfollow a user', 'Secondary caption displayed in pin feedback list to unfollow a user'),elementType:10640}})),z(this,"downloadPinOption",(()=>({action:"downloadPin",text:this.props.i18n._('Download image', 'Button to download Pin image', 'Button to download Pin image'),elementType:10836}))),z(this,"_pinFeedbackText",(()=>{const{location:e,feedbackType:i,hideDownload:n,pinner:t}=this.props,o="followed"===this.props.feedbackType,a=e.pathname.includes("following"),r=(o||"topic"===i)&&!a,s=this.hidePinOption(r),l=this.reportPinOption(),d="promoted"!==i&&!n;switch(i){case"followed":const e=a,n=!e&&this.getRecommendationDescription(),o=null!=t&&t.explicitly_followed_by_me?this.unfollowUserOption():this.unfollowBoardOption();return{...n?{description:n}:{},options:[s,...r||e?[o]:[],..."promoted"!==i?[this.downloadPinOption()]:[],l]};case"promoted":const{pinId:c,showAdReasonsModal:u}=this.props,_=[s,{dataTestId:"why-am-i-seeing-this-ad-reasons",action:"showAdReasons",text:this.props.i18n._('Why am I seeing this ad?', 'app.common.react.components.PinFeedbackDropdown.adReasonText', 'Text to promoted pins explanation modal'),callback:()=>{u(c)}},l];return{description:this.getRecommendationDescription(),options:_};case"topic":const p=this.unfollowTopicOption(),h=[s,...r&&p?[p]:[],...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:h};case"pfy":case"pfyBoard":const m=[s,..."pfyBoard"===i?[this.stopRecommendationOption()]:[],...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:m};default:const g=[s,...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:g}}})),z(this,"pinHiddenFeedbackText",(e=>{const{isPromoted:i,promoter:n}=this.props,t=e?null:this.getUnfollowAction();return i&&null!=n&&n.full_name?{title:"",subTitle:(0,_.nk)(this.props.i18n._('{{ promoter }} has paid to have this pin show up where you\'d be more likely to notice it.', 'webapp.app.pinFeedbackDropdown.promotedFeedbackText.subtitle', 'Message displayed after hiding a promoted pin. promoter: the name of the person who promoted the pin.'),{promoter:n.full_name})}:t?{title:"",subTitle:this.getRecommendationDescription(),unfollow:t}:{title:"",subTitle:this.props.i18n._('Got it! We won\'t show you this Pin in the future.', 'message displayed after hiding a pin', 'message displayed after hiding a pin')}}));const i=this._pinFeedbackText();this.state={pinFeedbackConfig:i,showSecondary:!1}}onPinFeedbackActionButtonClick(e,i,n){e.stopPropagation(),i.auxData?this.handleClickLogging(i.elementType,i.auxData):this.handleClickLogging(i.elementType),(0,N.t)(i.action,i.actionOptions,n)}onPinHide(e,i,n,t){const{hidePinFeedback:o,onHide:a,pinId:r,showPinFeedback:s,showPinFeedbackOverlay:l,showPinFeedbackUndo:d,viewParameter:c,viewType:u,logContextEvent:_}=this.props;i&&n&&t?d(r,e,(0,j.EF)(n,t,r,u,c,o,_),this.getUndoText(t)):s(r,e),!n||n.promoted||10!==n.feedback_type&&4!==n.feedback_type?a():(this.setState({showSecondary:!0}),l(r))}handleClickLogging(e,i={}){const{feedbackType:n,viewParameter:t,viewType:o,logContextEvent:a}=this.props;a({event_type:101,view_type:o,view_parameter:t,element:e,component:(0,j.nb)(n),aux_data:{...i}})}renderButtons(){const{hideDownload:e,onDownloadHideFlyout:i,pinId:n,viewType:t,viewParameter:o,logContextEvent:a,isWindowsPwa:l}=this.props,{pinFeedbackConfig:d}=this.state,{options:c}=d,u=[],_=c.length;for(let p=0;p<_;p+=1){const d=c[p],_=N.P.includes(d.action),h=d.callback?d.callback:()=>this.onPinHide(d.feedbackText,_,d.actionOptions,d.action);if("downloadPin"!==d.action){const e=(0,T.Z)({url:d.link||""});let i="";Array.isArray(d.text)?i=d.text.join(""):"string"!=typeof d.text&&"number"!=typeof d.text||(i=d.text.toString()),u.push(d.link?(0,s.jsx)(r.Lt.Link,{href:d.link,isExternal:e,option:{value:d.action||"",label:i},dataTestId:d.dataTestId||""}):(0,s.jsx)(r.Lt.Item,{onSelect:({event:e})=>this.onPinFeedbackActionButtonClick(e,d,h),option:{value:d.action||"",label:i},dataTestId:d.dataTestId||""}))}else if(!e&&!1===l){const{bestPinImgSrc:e,pinTitle:l,pinDescription:d,pinCategory:c}=this.props;u.push((0,s.jsx)(r.Lt.Item,{onSelect:()=>{(0,S.Z)({category:c,filename:l||d,imageDownloadSuccessCallback:()=>{i&&i()},imgSrc:e,pinId:n,viewParameter:o,viewType:t},a)},option:{value:"downloadImage",label:this.props.i18n._('Download image', 'pinRep.pinFeedbackDropdown.downloadImage', 'Label to download the pin image')}}))}}return u}render(){const{pinFeedbackConfig:e,showSecondary:i}=this.state,{anchor:n,onDismiss:o,feedbackData:a,feedbackType:l,hideAdReasonsModal:d,pinId:c,onHide:u,recommendationReason:_,showAdReasons:p,viewParameter:h,viewType:m}=this.props,{description:g}=e,f=this.getRecommendationDescriptionImage();return(0,s.jsxs)(t.Fragment,{children:[i?(0,s.jsx)(I.Z,{anchor:n,feedbackData:a,feedbackType:l,pinId:c,onDismiss:o,onHide:u,recommendationReason:_,viewParameter:h,viewType:m}):(0,s.jsx)(r.Lt,{anchor:n,id:"pin-action-dropdown",idealDirection:"down",onDismiss:o,zIndex:E.lI,headerContent:g&&(0,s.jsxs)(r.kC,{alignItems:"center",children:[(0,s.jsx)(r.xu,{"data-pin-recommendation-reason":null==_?void 0:_.reason,maxHeight:56,overflow:"hidden",children:(0,s.jsx)(r.xv,{color:"default",overflow:"normal",size:"200",children:g})}),f]}),children:this.renderButtons()}),p&&(0,s.jsx)(w,{onDismiss:()=>d(c),pinId:c})]})}}function L(e){const{logContextEvent:i}=(0,p.v)(),n=(0,k.Z)(),t=(0,u.ZP)(),a=(0,P.S6)()(e.pinId),{ad_targeting_attribution:r,show_ad_reasons:l=!1}=null!=a?a:{},d=(0,R.kf)(),c=(0,o.useDispatch)();return(0,s.jsx)(B,{...e,clientTrackingParams:n,showAdReasons:l,adTargetingAttribution:r,history:(0,D.useHistory)(),i18n:t,isWindowsPwa:d,location:(0,D.useLocation)(),logContextEvent:i,hidePinFeedback:e=>c((0,O.I1)(e)),showPinFeedback:(e,i)=>c((0,O.q1)(e,i)),showPinFeedbackOverlay:e=>c((0,O.Ib)(e)),showPinFeedbackUndo:(e,i,n,t)=>c((0,O.NA)({id:e,text:i,undoAction:n,undoText:t})),showAdReasonsModal:e=>c((0,O.b9)(e)),hideAdReasonsModal:e=>c((0,O.yj)(e))})}},312955:(e,i,n)=>{n.d(i,{Z:()=>v});var t=n(294184),o=n.n(t),a=n(814115),r=n(832654);const s={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1};var l=n(773285),d=n(883119),c=n(785893);function u({alt:e,dominantColor:i,naturalHeight:n,naturalWidth:t,onError:o,onLoad:a,url:r}){return(0,c.jsx)(d.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:"177.77777777777777%"}},children:(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:s.storyPinImage}},children:(0,c.jsx)(d.Ee,{alt:e,color:i||"transparent",naturalHeight:null!=n?n:1,naturalWidth:null!=t?t:1,onError:o,onLoad:a,src:r,fit:"cover"})})})}function _({alt:e,dominantColor:i,naturalHeight:n,naturalWidth:t,onError:o,onLoad:a,url:r}){return(0,c.jsx)(d.xu,{width:"100%",dangerouslySetInlineStyle:{__style:{zIndex:s.storyPinImage}},children:(0,c.jsx)(d.Ee,{alt:e,color:i||"transparent",naturalHeight:null!=n?n:1,naturalWidth:null!=t?t:1,onError:o,onLoad:a,src:r})})}function p({alt:e,onError:i=(()=>{}),onLoad:n=(()=>{}),pin:t}){const{checkExperiment:o}=(0,l.F)(),{anyEnabled:a}=o("web_idea_pin_flexible_aspect_ratio_display"),{dominant_color:r,images:s={}}=t,{height:d,width:p,url:h}=function(e){var i;return"number"==typeof(null===(i=e["474x"])||void 0===i?void 0:i.width)&&"number"==typeof e["474x"].height&&e["474x"].width>e["474x"].height?e["736x"]:e["474x"]}(s)||{},m=a?_:u;return(0,c.jsx)(m,{alt:e,dominantColor:r,naturalHeight:d,naturalWidth:p,onError:i,onLoad:n,url:h||""})}var h=n(898781),m=n(349700),g=n(310227),f=n(243943);const v=({cropHeight:e,cropWidth:i,fallbackColor:n,highResOnly:t,imageFit:s,lowResOnly:l,mediumResOnly:u,onError:_,onLoad:v,pin:x,saved:y=!1,animateGif:P})=>{var b,w,S;const T=(0,h.ZP)(),I=(0,f.Xx)(),{carousel_data:E,description:A="",dominant_color:C,grid_title:R,id:j,images:k,title:O}=x,N=(0,m.nk)(T._('This contains an image of: {{ pinTitle }}', 'web.altText', 'Alt text input for PinImage by a human'),{pinTitle:O||R}).join(""),D=(0,r.Z)(x,T)||A.trim().length>0&&A||N;if(E)return(0,c.jsx)(a.Z,{onError:_,onLoad:v,highResOnly:t,lowResOnly:l,pinId:j});let z,B="",L=0,Z=0;if(k){var M,V,F;let e=k["236x"];var G,H,U,W,$;if(t?e=k["736x"]||k.orig||k["474x"]||k["236x"]:u&&(e=k["474x"]||k.orig||k["236x"]),L=null===(M=e)||void 0===M?void 0:M.height,Z=null===(V=e)||void 0===V?void 0:V.width,B=null===(F=e)||void 0===F?void 0:F.url,l||u||t)z=null!==(G=e)&&void 0!==G&&G.url?`${e.url} 1x`:"";else z=[(null===(H=k["236x"])||void 0===H?void 0:H.url)&&`${k["236x"].url} 1x`,(null===(U=k["474x"])||void 0===U?void 0:U.url)&&`${k["474x"].url} 2x`,(null===(W=k["736x"])||void 0===W?void 0:W.url)&&`${k["736x"].url} 3x`,(null===($=k.orig)||void 0===$?void 0:$.url)&&`${k.orig.url} 4x`].filter(Boolean).join(", ")}if(P){const e=Math.max(x.embed&&x.embed.width||0,236),i=Math.max(x.embed&&x.embed.height||0,236),n=x.embed?x.embed.src:"";n&&(L=i,Z=e,B=n,z="")}return null!=I&&I.image&&(L=I.image.height,Z=I.image.width,B=I.image.url),(0,c.jsx)(d.kC,{alignItems:"center",justifyContent:"start",minHeight:g.Ml,children:(0,c.jsx)(d.xu,{flex:"grow",children:(0,c.jsx)("div",{className:o()({savedGradient:y}),children:x.story_pin_data_id?(0,c.jsx)(p,{alt:D,pin:x,onError:_,onLoad:v}):(0,c.jsx)(d.xu,{height:i?e:void 0,width:i||void 0,"data-test-id":"non-story-pin-image",children:(0,c.jsx)(d.Ee,{alt:D,color:"dominant"===n?C:n,fit:s,naturalHeight:null!==(b=L)&&void 0!==b?b:1,naturalWidth:null!==(w=Z)&&void 0!==w?w:1,onError:_,onLoad:v,src:null!==(S=B)&&void 0!==S?S:"",srcSet:z})})})})})}},118334:(e,i,n)=>{n.d(i,{Z:()=>S});var t=n(667294),o=n(964082),a=n(983722),r=n(787410),s=n(36971),l=n(463045),d=n(494349),c=n(554779),u=n(312955),_=n(639758),p=n(898781),h=n(991773),m=n(572260),g=n(883119),f=n(623568),v=n(785893);const x=new Set(["ConversationView","TodayTabFeed"]);function y({inAdsDesktopVideoExperiment:e,isAutoplay:i,cropHeight:n,currentTime:o,lowResOnly:a,highResOnly:r,onLoad:s,onError:l,saved:y,onTimeChange:P,isExperimentalPinRep:b,pin:w,surface:S,playing:T,rootMargin:I,viewType:E,viewParameter:A,onVisibilityChanged:C,trackFullVisible:R,inVisibilityChangedHookExperiment:j,imageHeightModifier:k,cropWidth:O}){var N,D;const z=(0,p.ZP)(),[B,L]=(0,t.useState)(!1),[Z,M]=(0,t.useState)(!0),V=(0,f.jL)(w),F=V&&!w.is_eligible_for_web_closeup,G=b&&V&&w.is_eligible_for_web_closeup&&!x.has(S),{setCurrentVideo:H}=(0,d.I)(),U=F||!b||!V,W=(0,h.Z)({onVisibilityChanged:C,inAdsDesktopVideoExperiment:e,trackFullVisible:R,rootMargin:I});let $=!T;e&&($=Z,i&&T&&Z&&M(!1));const{url:Y}=(null===(N=w.images)||void 0===N?void 0:N["236x"])||{},{id:X,is_promoted:q}=w,K=(0,t.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),H({pinId:X,isPromoted:Boolean(q),currentTime:0}),L(!1)}),[q,X,H]),J=(0,t.useCallback)((()=>{q&&L(G)}),[G,q]);if(!w.videos||null===(D=w.videos.video_list)||void 0===D||!D.V_HLSV4)return null;const{height:Q,thumbnail:ee,width:ie,url:ne}=w.videos.video_list.V_HLSV4||{},te=w.videos.id,oe=[{type:"video/m3u8",src:ne}];let ae,re=(null!=ie?ie:1)/(null!=Q?Q:1);const se=e&&S&&(0,c.Z)(S);if(se&&(re=1,ae="transparent",k&&(re-=k-1)),B&&V)return(0,v.jsx)(g.xu,{ref:j?W:null,children:(0,v.jsx)(_.Z,{backgroundImage:null!=Y?Y:"",naturalHeight:null!=Q?Q:1,naturalWidth:null!=ie?ie:1,pin:w,onRestartVideo:K})});if($){let e={highResOnly:r,lowResOnly:a,onError:l,onLoad:s,pin:w,saved:y};return se&&(e={...e,cropHeight:n,cropWidth:O,imageFit:"contain"}),(0,v.jsx)(g.xu,{ref:j?W:null,children:(0,v.jsx)(u.Z,{...e})})}return(0,v.jsx)(g.xu,{ref:j?W:null,children:(0,v.jsx)(m.ZP,{isAutoPlay:!!i,cropHeight:n,rootMargin:I,surface:S,inAdsDesktopVideoExperiment:e,contextLogData:{viewParameter:A,component:0,objectId:w.id,video_id:te,view:E},accessibilityMaximizeLabel:z._('Maximize', 'Maximize button on video', 'Maximize button on video'),accessibilityMinimizeLabel:z._('Minimize', 'Minimize button on video', 'Minimize button on video'),accessibilityMuteLabel:z._('Mute', 'Mute button on video', 'Mute button on video'),accessibilityPauseLabel:z._('Pause', 'Pause button on video', 'Pause button on video'),accessibilityPlayLabel:z._('Play', 'Play button on video', 'Play button on video'),accessibilityProgressBarLabel:z._('Progress bar', 'PinVideo.accessibilityProgressBarLabel', 'Video progress bar accessibility label'),accessibilityUnmuteLabel:z._('Unmute', 'Unmute button on video', 'Unmute button on video'),aspectRatio:re,backgroundColor:ae,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:o||-1},loop:U,onTimeChange:P,playing:T,onPlay:()=>{},onPlayError:()=>{},poster:Y||ee,src:null!=oe?oe:[],videoStartTime:o,volume:0,onEnded:J})})}function P(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}const b=(0,r.Z)(y);class w extends t.Component{constructor(...e){super(...e),P(this,"calculateCurrentVideoTime",(()=>{const{currentTimeFromPinRep:e,pin:i,videosAutoplaying:n}=this.props,{id:t}=i,o=(0,s.Z)(t,n);return this.currentVideoCurrentTime||o||e})),P(this,"handleVisibilityChanged",(e=>{const{currentTimeFromPinRep:i,pin:n,setCurrentVideo:t,pauseAutoplay:r,videosAutoplaying:s}=this.props,{id:d,is_promoted:c}=n,u=(0,l.Z)(d,s),_=(0,o.Z)(d,s);if(e){if(c)t({pinId:d,isPromoted:c,currentTime:this.calculateCurrentVideoTime()});else if(_){const e=(0,a.Z)(),{anyEnabled:i}=(null==e?void 0:e.experimentsClient.checkExperiment("hfp_web_video_autoplay_in_grid"))||{};t({pinId:d,isPromoted:Boolean(c),currentTime:this.calculateCurrentVideoTime(),inVideoGridAutoplayExp:i})}}else!e&&u&&r({pinId:d,isPromoted:Boolean(c),currentTime:i||this.currentVideoCurrentTime})})),P(this,"handleVideoTimeChange",(e=>{const{pin:i,onTimeChange:n,videosAutoplaying:t}=this.props,{id:o}=i;(0,l.Z)(o,t)&&(this.currentVideoCurrentTime=e.time),n&&n(e)}))}componentDidMount(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){const{appInFocus:i}=e,{appInFocus:n,currentTimeFromPinRep:t,pauseAutoplay:o,pin:a,setCurrentVideo:r,videosAutoplaying:s}=this.props,{id:d,is_promoted:c}=a,u=(0,l.Z)(d,s);n!==i&&!n&&u?(this.pausedDueToBrowserOutOfFocus=!0,o({pinId:d,isPromoted:Boolean(c),currentTime:t||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&n&&(this.pausedDueToBrowserOutOfFocus=!1,r({pinId:d,isPromoted:Boolean(c),currentTime:this.calculateCurrentVideoTime()}))}componentWillUnmount(){const{currentTimeFromPinRep:e,pauseAutoplay:i,pin:n,videosAutoplaying:t}=this.props,{id:o,is_promoted:a}=n;(0,l.Z)(o,t)&&i({pinId:o,isPromoted:Boolean(a),currentTime:e||this.currentVideoCurrentTime})}render(){const{cropHeight:e,isAutoplay:i,pin:n,surface:t,videosAutoplaying:o,viewParameter:r,viewType:d,highResOnly:c,lowResOnly:u,onError:_,onLoad:p,saved:h,inAdsDesktopVideoExperiment:m,isExperimentalPinRep:g,rootMargin:f,cropWidth:x,imageHeightModifier:P}=this.props,{id:w}=n,S=(0,s.Z)(w,o),T=(0,l.Z)(w,o)&&i,I=(0,a.Z)(),{anyEnabled:E}=(null==I?void 0:I.experimentsClient.checkExperiment("web_mqtt_finddomnode_deprecation"))||{};return E?(0,v.jsx)(y,{cropHeight:e,rootMargin:f,currentTime:S,inAdsDesktopVideoExperiment:m,isAutoplay:i,viewParameter:r,viewType:d,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:n,surface:t,playing:T,trackFullVisible:!1,highResOnly:c,lowResOnly:u,onError:_,onLoad:p,saved:h,isExperimentalPinRep:g,inVisibilityChangedHookExperiment:E,cropWidth:x,imageHeightModifier:P}):(0,v.jsx)(b,{cropHeight:e,rootMargin:f,currentTime:S,inAdsDesktopVideoExperiment:m,isAutoplay:i,viewParameter:r,viewType:d,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:n,surface:t,playing:T,trackFullVisible:!1,highResOnly:c,lowResOnly:u,onError:_,onLoad:p,saved:h,isExperimentalPinRep:g,cropWidth:x,imageHeightModifier:P})}}function S(e){const{appUI:{appInFocus:i,isAutoplay:n,videosAutoplaying:t},pauseAutoplay:o,setCurrentVideo:a}=(0,d.I)();return(0,v.jsx)(w,{...e,appInFocus:i,isAutoplay:n,pauseAutoplay:o,setCurrentVideo:a,videosAutoplaying:t})}},597017:(e,i,n)=>{n.d(i,{Z:()=>Mn});var t=n(667294),o=n(702664),a=n(41233),r=n(605028),s=n(307640);function l({isGroupBoard:e,pin:i,surface:n}){const{carousel_data:t,grid_title:o,rich_summary:a,title:l}=i,{isOwnPin:d,isPromoted:c}=(0,r.Z)(i);if(t){const{carousel_slots:e=[],index:i=0}=t;if(e[i]&&e[i].title)return e[i].title.trim()}if(c){if(s.ZF.includes(n))return o||"";if(d&&!e&&!t&&"UserProfilePinGrid"!==n)return"";const i=a&&"mobile application"!==a.type_name&&a.display_name;return l||i||o||""}return o||""}var d=n(623568);const c=["EngagementDetails","OtherProfilePinGrid","UserProfilePinGrid"];var u=n(35495);function _(e,i){const{isProduct:n}=(0,r.Z)(e);return(n||"ShoppingGridShippedMetadataWithVisitButton"===i&&(0,u.bA)(e))&&(0,u.QY)(e)||""}var p=n(807592),h=n(4294),m=n(18857);const g=["CloseupRelatedProducts","ConversationView","CreatorProfileStoryPinGrid","CreatorProfileActivityPinGrid","ProductPinsFeed","UserProfilePinGrid"];function f({attributionOption:e,board:i,contentType:n,experimentsClient:t,feedbackData:o,feedbackType:a,hasCarouselData:s,isGroupBoard:d,isORBACProfileManager:c,isOwnBoard:u,pin:f,showImageOnly:v,showNativeReactions:x,showPromotedShoppingPrice:y,surface:P,viewer:b,variantData:w}){var S;const{isPromoted:T,isSponsored:I}=(0,r.Z)(f),{pin_note:E}=f,A=function({attributionOption:e,feedbackType:i,isGroupBoard:n,pin:t,showImageOnly:o,surface:a}){const{is_downstream_promotion:r,native_creator:s,promoter:l,sponsorship:d,story_pin_data_id:c}=t;if("promoted"===i||l&&!r||d)return"default";if("ConversationView"!==a&&g.includes(a))return"none";if(n)return"none";let u="default";return"SearchItem"===a&&c?u:(e&&("image-only"===e?u="image-only-credit":"hide"===e&&(u="none")),"followed"!==i||o?["IdeasHubSeasonalRow","TodayArticleFeed","ShoppingPackageItem"].includes(a)&&"hide"===e?u:"TodayArticleFeed"===a&&"show"===e?"show-for-claimed-content":s?"default":"none":u)}({attributionOption:e,feedbackType:a,isGroupBoard:d,pin:f,showImageOnly:v,surface:P}),C=null!=w&&w.title?w.title:l({isGroupBoard:d,pin:f,surface:P}),R=v?"":C,j=!["ShoppingPackageItem","ShoppingSquareGridDomain","ShoppingSquareGridStorefrontDomain","ShoppingSquareGridStorefront"].includes(P)&&!T&&!v&&Boolean(_(f,P)),k=["ShoppingGridShippedMetadataWithVisitButton"].includes(P),O="BaseBoardPinGrid"===P&&E?null===(S=E.text)||void 0===S?void 0:S.trim():null,N=T,D="shopping"===n;let z,B=!0;"AuthHomefeed"!==P||T||(z=t.checkExperiment("hfp_hf_grid_rep_simplification_web").group,x=!["employees","enabled_remove_reactions","enabled_one_line_title","enabled_two_line_title","enabled_remove_all"].includes(z),B=!["employees","enabled_remove_creator_attribution","enabled_one_line_title","enabled_two_line_title","enabled_remove_all"].includes(z));let L,Z,M,V,F=2;if(T?F=3:j||"none"!==A?F=D?2:1:"AuthHomefeed"===P&&("enabled_one_line_title"===z?F=1:"enabled_two_line_title"===z&&(F=2)),D||y){var G,H;const e=null===(G=f.rich_summary)||void 0===G||null===(H=G.products)||void 0===H?void 0:H[0],{offer_summary:i}=e||{};L=i?i.standard_price:void 0,Z=i?(0,p.Z)(i):void 0}if(w){const{offerSummary:e}=w;L=e?e.standard_price:void 0,Z=e?e.price||e.max_price:void 0}if(D&&!T){var U,W,$;const{rating_count:e,rating_value:i,review_count:n}=(null===(U=f.rich_summary)||void 0===U?void 0:U.aggregate_rating)||{};(e||n)&&parseFloat(i)&&(M={count:e||n,rating:i}),V=null===(W=f.rich_metadata)||void 0===W||null===($=W.products)||void 0===$?void 0:$[0].shipping_info}const Y=(0,m.rh)(f,b,t),X="CreatorProfileStoryPinGrid"===P||"CreatorProfileActivityPinGrid"===P,q=!(X||!T&&"AuthHomefeed"===P&&"enabled_remove_all"===z),K=d&&!I;return{attributionType:A,board:i,contentType:n,feedbackData:o,feedbackType:a,pinNoteText:O,pinTitle:R,productCurrentPrice:Z,productOriginalPrice:L,productRating:M,productShipping:V,showCarouselEllipsis:s,showFavoriteButton:!c&&("BaseBoardPinGrid"===P&&u||Boolean((null==i?void 0:i.is_collaborative)&&(0,h.Z)({board:i,viewer:b})))&&!X,showGroupBoardAvatar:K,showNativeReactions:x,showOverflowMenu:N,showPinStats:Y,showSource:j,showTextContent:q,showVisitSiteButton:k,showAttribution:B,titleLines:F}}var v=n(27255),x=n(121630),y=n(704177),P=n(841478),b=n(53325);const w=["ShoppingCatalogsProductsMetadata"];const S=["BoardCreateUpsell","BoardCoverSelectablePin","BoardNoteSelectablePin","BoardNotePin","BulkEditMode","EngagementDetails","SectionSuggestedPins","SelectableBoardlessPin"],T=["BoardCreateUpsell","BoardCoverSelectablePin","BoardNoteSelectablePin","BoardNotePin","BulkEditMode","ConversationView","EngagementDetails","SectionSuggestedPins","SelectableBoardlessPin","ShoppingCatalogsProductsMetadata"];var I=n(221263),E=n(319915);function A(e={},i=[]){return Object.keys(e).reduce(((n,t)=>i.includes(t)?n:{...n,[t]:e[t]}),{})}var C=n(987097),R=n(687551),j=n(954571);var k=n(976071),O=n(411938),N=n(554779),D=n(463045),z=n(947599),B=n(898781),L=n(717615),Z=n(86551),M=n(19121),V=n(883119),F=n(407043),G=n(785893);const H=["CreatorProfileStoryPinGrid","CreatorProfileActivityPinGrid"],U={component:210,view_type:4,view_parameter:3106},W={view_type:5,view_parameter:3069},$={component:13668,view_type:4,view_parameter:3106};function Y({pinId:e,surface:i}){const{logContextEvent:n}=(0,F.v)(),t=(0,B.ZP)(),o=()=>{const e=H.includes(i)?$:"BaseBoardPinGrid"===i?W:"UserProfilePinGrid"===i?U:{};n({event_type:101,element:10573,...e})},a=t._('See more stats', 'pinRep.actionBar.seeStatsButton', 'Button that will re-direct user to detailed stats page');return(0,G.jsx)(V.xu,{"data-test-id":"see-stats-button",paddingX:3,paddingY:3,children:H.includes(i)?(0,G.jsx)(V.zx,{role:"link",accessibilityLabel:t._('Go to pin stats details page', 'pinRep.actionBar.seeStatsButton', 'This button will take the user to their detailed pin stats page for the pin'),color:"semiTransparentWhite",fullWidth:!0,href:`/pin/${e}/analytics`,onClick:o,size:"sm",text:(r=a,r.length>14?`${r.substring(0,12).trim()}...`:r)}):(0,G.jsx)(V.hU,{role:"link",accessibilityLabel:t._('Go to pin stats details page', 'pinRep.actionBar.seeStatsButton', 'This icon button will take the user to their detailed pin stats page for the pin'),bgColor:"white",href:`/pin/${e}/analytics`,icon:"ads-stats",iconColor:"darkGray",onClick:o,size:"sm"})});var r}var X=n(681227),q=n(758523),K=n(946595),J=n(494349),Q=n(773285),ee=n(578722),ie=n(904411),ne=n(802201),te=n(329734),oe=n(243943),ae=n(330899),re=n(281180),se=n(241244),le=n(699825),de=n(768559),ce=n(89254);function ue(e,i){const{carousel_data:n,domain:t,ad_destination_url:o}=e;let a=t||"";return o&&(a=(0,ce.Z)(o).hostname||""),n&&n.id&&(a=function(e,i){const n=i||e&&e.index||0,t=e&&e.carousel_slots||[],o=t[n]&&t[n].link||"";return o&&(0,ce.Z)(o).hostname||""}(n,i)),a.replace("www.","")}var _e=n(287072),pe=n(542563),he=n(276775);const me={container:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:18,height:"32px",maxWidth:"132px"},containerHovered:{backgroundColor:"rgba(255, 255, 255, 1.0)"},containerTruncated:{maxWidth:"87px"},text:{color:"#333333"}};function ge({pin:e,sourceLinkStyle:i,surface:n,url:o}){var a,r;const s=(0,B.ZP)(),[l,d]=(0,t.useState)(!1),{id:c}=e,_=ue(e),p=(0,he.useLocation)(),h=(0,u.Kl)(e)||{},{slotIndex:m}=(0,K.E)(),g=(0,de.Z)({boardUrl:null===(a=e.board)||void 0===a?void 0:a.url,callToCreateSourcePinId:e.call_to_create_source_pin_id,location:p,pinId:e.id,pinnerUserName:null===(r=e.pinner)||void 0===r?void 0:r.username,storyPinDataId:e.story_pin_data_id,trackingParams:e.tracking_params,trackingParamsMap:e.tracking_params_map}),f=(0,pe.Z)(12,{object_id_str:c,clientTrackingParams:g,aux_data:{grid_index:m,...(0,u.Kl)(e)||{}}}),v=(0,pe.Z)(101,{element:162,object_id_str:c,clientTrackingParams:g,aux_data:{...(0,u.Kl)(e)||{}}}),x=(0,pe.Z)(8948,{object_id_str:c,clientTrackingParams:g,aux_data:{click_type:"clickthrough",closeup_navigation_type:"click",grid_index:m,...(0,u.Kl)(e)||{}}}),y=()=>{f(),v(),x()},P=(0,_e.Z)({href:o,target:"blank",externalData:{auxData:h,pin:e,surface:n}});return"icon-only"===i?(0,G.jsx)(V.hU,{accessibilityLabel:s._('link', 'Website url link', 'Website url link'),bgColor:"white",href:o,icon:"arrow-up-right",iconColor:"darkGray",onClick:({event:e,dangerouslyDisableOnNavigation:i})=>{i(),y(),P({event:e})},role:"link",rel:"nofollow",size:"sm"}):(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{...me.container,...l?me.containerHovered:Object.freeze({}),..."truncated-text"===i?me.containerTruncated:Object.freeze({})}},"data-test-id":"pinrep-source-link",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),position:"relative",children:(0,G.jsx)(le.Z,{hovered:l,pin:e,slotIndex:m,viewType:1,children:(0,G.jsx)(V.iP,{fullWidth:!1,href:o,onTap:({event:e,dangerouslyDisableOnNavigation:i})=>{i(),y(),P({event:e})},rel:"nofollow",role:"link",rounding:4,children:(0,G.jsxs)(V.xu,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:me.text},display:"flex",justifyContent:"between",children:[(0,G.jsx)(V.xu,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3,children:(0,G.jsx)(V.JO,{accessibilityLabel:s._('link', 'Website url link', 'Website url link'),color:"default",icon:"arrow-up-right",size:9})}),(0,G.jsx)(V.xu,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden",children:(0,G.jsx)(V.xv,{color:"default",size:"200",weight:"bold",lineClamp:1,children:_})})]})})})})}var fe=n(780280);const ve=(0,t.lazy)((()=>Promise.all([n.e(97270),n.e(5954),n.e(81286),n.e(48035)]).then(n.bind(n,329155)))),xe=(0,t.lazy)((()=>Promise.resolve().then(n.bind(n,955362)))),ye=(0,t.lazy)((()=>n.e(5035).then(n.bind(n,351326))));const Pe=(0,t.memo)((function({actionBarEditBeforeShare:e,feedbackData:i,feedbackType:n,layout:o,onToggleFlyout:a,pin:s,pinTitle:l,setForcePrimary:d,showEditButton:c,showOverflowMenu:u,showShareButton:_,showSourceLinkButton:p,sourceLinkStyle:h,surface:m}){var g,f;const v=(0,B.ZP)(),x=(0,V.JZ)(),{isRTL:y}=(0,fe.B)(),{viewParameter:P,viewType:b}=(0,K.E)(),{carousel_data:w,id:S,savedInfo:T,tracked_link:I,link:A,ad_destination_url:C}=s,R=null!==(g=null!==(f=null!=C?C:I)&&void 0!==f?f:A)&&void 0!==g?g:"",{isLeadPin:j}=(0,r.Z)(s),[k,O]=(0,t.useState)(c),[N,D]=(0,t.useState)(c),[L,Z]=(0,t.useState)(c),M={...y?{marginLeft:c&&u?-44:0}:{marginRight:c&&u?-44:0},transition:y?"margin-left .2s ease-in-out":"margin-right .2s ease-in-out"},F={opacity:L?1:0,transition:"opacity .2s ease-in-out",pointerEvents:"auto"},H={...y?{marginRight:N?4:0}:{marginLeft:N?4:0},transition:y?"margin-right .2s ease-in-out":"margin-left .2s ease-in-out"};(0,t.useEffect)((()=>{let e;return c&&u?(D(!0),e=setTimeout((()=>{requestAnimationFrame((()=>{O(!0),requestAnimationFrame((()=>{Z(!0)}))}))}),800)):(D(c),O(c),requestAnimationFrame((()=>{Z(c)}))),()=>{clearTimeout(e)}}),[c,u]);let U=null;p&&(U=(0,G.jsx)(se.Z,{children:j?(0,G.jsx)(V.zx,{role:"button",accessibilityLabel:v._('Link for closeup view and sign up', '[m10n] pinRep.actionBar.signup', 'Content for sign up link'),size:"sm",text:v._('Sign up', '[m10n] pinRep.actionBar.signup', 'Content for sign up link')}):(0,G.jsx)(ge,{pin:s,sourceLinkStyle:h,surface:m,url:R})}));const W=_&&(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRep_SendShareLink",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(V.xu,{"data-test-id":"send-share-link",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(ye,{pin:s,setForcePrimary:d})})})})}),$=Boolean(null==T?void 0:T.localPinId)?null==T?void 0:T.localPinId:S,Y=k&&(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRep_EditButton",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(V.xu,{"data-test-id":"edit-button",dangerouslySetInlineStyle:x?void 0:{__style:F},children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(ve,{carouselSlotCurrentIndex:w&&w.index,component:0,onToggleModal:a,pinId:$,style:{size:"sm"},view:b,viewParameter:P,useLegoStyles:!0})})})})});return"equally-spaced"===o?(0,G.jsxs)(V.xu,{display:"flex",justifyContent:"between",alignItems:"center",padding:3,children:[(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{flexBasis:32}},children:U}),e?Y:W,e?W:Y]}):(0,G.jsxs)(V.xu,{alignItems:"center",display:"flex",padding:3,children:[(0,G.jsx)(V.xu,{flex:"shrink",children:U}),(0,G.jsx)(V.xu,{alignItems:"center",display:"flex",flex:"none",marginStart:"auto",dangerouslySetInlineStyle:x?void 0:{__style:M},children:(0,G.jsxs)(V.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"end",children:[e?Y:W,e?W:Y,u&&(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRep_OverflowMenu",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(V.xu,{"data-test-id":"overflow-menu-button",dangerouslySetInlineStyle:x?void 0:{__style:H},children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(xe,{feedbackData:i,feedbackType:n,pin:s,pinTitle:l,setForcePrimary:d})})})})})]})})]})}));var be=n(834911),we=n(811403);function Se({direction:e,swipeHandler:i}){const n=(0,B.ZP)(),t={left:n._('View Previous', 'Button to advance carousel to the previous image', 'Button to advance carousel to the previous image'),right:n._('View Next', 'Button to advance carousel to the next image', 'Button to advance carousel to the next image')};return(0,G.jsx)(V.xu,{position:"absolute",bottom:!0,top:!0,left:"left"===e,right:"right"===e,children:(0,G.jsx)(V.iP,{fullHeight:!0,fullWidth:!0,onTap:i,children:(0,G.jsx)(V.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%","data-test-id":`carousel-slider-${e}`,children:(0,G.jsx)(V.JO,{accessibilityLabel:t[e],color:"inverse",icon:{left:"arrow-back",right:"arrow-forward"}[e]})})})})}const Te=(0,o.connect)(null,(function(e){return{changeCarouselSlotIndex:(i,n)=>e((0,we.yR)(i,n))}}))((({pin:e,changeCarouselSlotIndex:i})=>{const{logContextEvent:n}=(0,F.v)(),{componentType:t,viewParameter:o,viewType:a}=(0,K.E)(),r=(0,be.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:e.rich_metadata,richSummary:e.rich_summary});if(!r)return null;const{id:s=""}=e,{carousel_slots:l=[],index:d=0,id:c}=r;function _(r){return()=>{const _="left"===r?d-1:d+1;i(s,_),((i=0,r)=>{n({event_type:108,object_id_str:s,component:t,view_type:a,view_parameter:o,event_data:{pinCarouselSlotEventData:{carouselSlotId:l[i]&&Number(l[i].id),carouselDataId:Number(c),carouselSlotIndex:i,toCarouselSlotIndex:r}},aux_data:{...(0,u.Kl)(e)||{}}})})(d,_)}}return(0,G.jsxs)(V.xu,{height:"100%",position:"relative",width:"100%",children:[d>0&&(0,G.jsx)(se.Z,{children:(0,G.jsx)(Se,{direction:"left",swipeHandler:_("left")})}),d<l.length-1&&(0,G.jsx)(se.Z,{children:(0,G.jsx)(Se,{direction:"right",swipeHandler:_("right")})})]})}));var Ie=n(969956),Ee=n(116303);function Ae({accessibilityLabel:e,attributionNameLink:i,avatarUrl:n,fullWidth:t=!0,name:o="",onClick:a,outline:r=!1,size:s=32}){const l=(0,G.jsx)(V.xu,{"data-test-id":"attribution-avatar",height:s,width:s,children:(0,G.jsx)(Ee.Z,{name:o,src:n,accessibilityLabel:"",outline:r})});return i?(0,G.jsx)(V.iP,{fullWidth:t,role:"link",href:i,onTap:a,accessibilityLabel:e,children:l}):l}function Ce({isHover:e,attributionNameLink:i,name:n,onClick:t,regularWeight:o}){const{checkExperiment:a}=(0,Q.F)(),r=!i&&a("web_disable_ads_blocker").anyEnabled;return(0,G.jsx)(V.xu,{children:(0,G.jsx)(V.xv,{underline:e,size:"200",lineClamp:1,weight:o?"normal":"bold",children:i?(0,G.jsx)(V.rU,{onClick:t,href:i,children:n}):r?(0,G.jsx)("span",{children:n}):n})})}function Re({isHover:e,link:i,onClick:n,title:t,weight:o}){return t?(0,G.jsx)(V.xv,{inline:!0,underline:e,size:"200",weight:o,children:i?(0,G.jsx)(V.rU,{onClick:n,href:i,children:t}):t}):null}var je=n(993786),ke=n(480622);function Oe({attributionNameLink:e,attributionTitle:i,avatarUrl:n,display:o="default",isPromotedByPinCreator:a,pin:s,name:l,url:d,verifiedIdentity:c,isVerifiedMerchant:u}){const _=(0,ke.f)(),[p,h]=(0,t.useState)(!1),{id:m,sponsorship:g,story_pin_data_id:f}=s,{isPromoted:v}=(0,r.Z)(s),{creator:x}=g||{},{id:y}=x||{},P=!!f,b=(0,pe.Z)(101,{view_type:3,element:v?283:27,object_id_str:m,component:P?230:void 0,aux_data:{...y?{creator_id:y,pin_id:m}:{}}}),w=()=>{_.setMostRecentPinId(m),b()},S=()=>{h((e=>!e))},T=d&&!e,I=T?"":l,E="overlay"===o,A=(0,G.jsxs)(V.xu,{alignItems:"center",display:E?void 0:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:"-3px",marginRight:"-3px"}},children:[(0,G.jsx)(V.xu,{flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},display:E?"flex":void 0,justifyContent:"center",children:(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:E?{__style:{marginTop:-45}}:void 0,children:(0,G.jsx)(Ae,{attributionNameLink:I?e:void 0,avatarUrl:n,name:I,onClick:()=>w(),accessibilityLabel:I,size:E?64:32,outline:E})})}),(0,G.jsxs)(V.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},flex:"grow",overflow:"hidden",display:E?"flex":void 0,justifyContent:"center",marginTop:E?2:void 0,children:[(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"2px"}},children:(0,G.jsxs)(V.kC,{gap:{row:1,column:0},children:[(0,G.jsx)(Ce,{attributionNameLink:e,name:l,onClick:()=>w(),regularWeight:!(v&&!g||a),isHover:p}),(0,G.jsx)(je.Z,{size:"sm",hasVerifiedIdentity:c,isVerifiedMerchant:u})]})}),(0,G.jsx)(Re,{isHover:p,title:i,weight:"normal"})]})]});return T?(0,G.jsx)(V.iP,{role:"link",onTap:({event:e})=>{e.stopPropagation(),w()},href:d,onMouseEnter:S,onMouseLeave:S,children:A}):A}var Ne=n(504981),De=n(333312),ze=n(69e4),Be=n(552684),Le=n(907811),Ze=n(778821),Me=n(875495),Ve=n(782050);function Fe({board:e,favoriteCount:i,favorited:n,pinId:a}){const{logContextEvent:r}=(0,F.v)(),s=(0,o.useDispatch)(),{slotIndex:l}=(0,K.E)(),{currentFilter:d,eligibleFilters:c,refreshData:u=(()=>{}),sectionId:_,setShowExperienceTooltip:p}=(0,Ve.s)(),h=(0,t.useRef)(null),m=(0,M.Z)(),g=(0,I.Z)(m,e),f=d===Le.Ac&&(!i||1===i),v=(0,Be.E)(c,Le.Ac),x=e=>{r({event_type:101,component:0,element:e?12225:12226,object_id_str:a,view_type:5,view_parameter:g?3069:3070})};return(0,G.jsxs)(t.Fragment,{children:[(0,G.jsx)(V.xu,{ref:h,children:(0,G.jsx)(ze.Z,{favorited:n,favoriteCount:i,onFavorite:()=>{x(!0),v&&u(),p&&p(!0)},onUnfavorite:()=>{x(!1),e&&f&&s((0,Me.EX)({feedId:_||e.id,feedType:_?Ze.DV.SECTION_PINS:Ze.DV.BOARDFEED,itemIds:[a],itemType:"pin"}))},pinId:a,size:20})}),h&&!n&&!_&&0===l&&(0,G.jsx)(V.mh,{children:(0,G.jsx)(De.default,{anchor:h.current,experienceIds:[502973],flyoutSize:312,idealDirection:"up",placementId:18,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center"})})]})}var Ge=n(850115),He=n.n(Ge),Ue=n(379507),We=n.n(Ue),$e=n(637956),Ye=n.n($e),Xe=n(694379),qe=n(909745),Ke=n.n(qe),Je=n(128206),Qe=n.n(Je);const ei={goodIdea:He(),love:Ye(),thanks:Ke(),wow:Qe(),haha:We()},ii={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},ni=["CreatorProfileStoryPinGrid"];const ti=function({alignment:e="start",pinId:i,pinner:n,reactionCounts:t,surface:o}){const a=(0,M.Z)(),r=t?(0,X.At)(t):null,s=t?(0,X.Ud)(t):0,l=Boolean(a.isAuth&&(null==n?void 0:n.id)===a.id),d=!!r&&r.length>0&&r.map(((e,i)=>{const n=ei[ii[e]];return(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,G.jsx)(V.xu,{width:17,height:17,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${n})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})},i)})),c=!!d&&(0,G.jsx)(V.iP,{role:"link",href:`/pin/${i}/`,children:(0,G.jsxs)(V.xu,{display:"flex",direction:"row",alignItems:"center",justifyContent:e,height:19,paddingY:3,children:[(0,G.jsx)(V.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:d}),(0,G.jsx)(V.xu,{paddingX:1,children:(0,G.jsx)(V.xv,{size:"200",children:(0,G.jsx)(Xe.Z,{value:s,shortform:!0,shortformMaximumFractionDigits:1})})})]})}),u=l&&ni.includes(o)&&(0,G.jsx)(V.xu,{height:24});return c||u};var oi=n(605707),ai=n(862628);function ri({feedbackType:e,pin:i}){const n=(0,B.ZP)(),{pinner:t,source_interest:o}=i,{full_name:a,username:r}=t||{},{name:s}=o||{},l="topic"===e,d=!l&&"followed"===e,c=`/${r}/`,u=(0,ai.Z)(s),_=`/search/pins/?q=${encodeURIComponent(u)}&rs=image_only_attribution`,p=l?_:c,h={topic:n._('From {topic}', 'attribution on pin rep', 'attribution on pin rep'),followed:n._('From {pinnerName}', 'attribution on pin rep', 'attribution on pin rep'),pfyBoard:n._('Picked for you', 'attribution on pin rep', 'attribution on pin rep'),pfy:n._('Picked for you', 'attribution on pin rep', 'attribution on pin rep')}[e];if(!h)return null;if(d||l){const e=0===h.indexOf("{"),i=l?s:a,n=e?h.slice(h.indexOf("}")+1):h.slice(0,h.indexOf("{"));return e?(0,G.jsxs)(V.xu,{children:[(0,G.jsx)(V.rU,{inline:!0,href:p,underline:"hover",children:(0,G.jsx)(V.xv,{weight:"bold",inline:!0,size:"200",lineClamp:1,children:i})}),(0,G.jsx)(V.xv,{inline:!0,size:"200",children:n})]}):(0,G.jsxs)(V.xu,{children:[(0,G.jsx)(V.xv,{inline:!0,size:"200",children:n}),(0,G.jsx)(V.rU,{inline:!0,href:p,underline:"hover",children:(0,G.jsx)(V.xv,{color:"default",weight:"bold",inline:!0,size:"200",lineClamp:1,children:i})})]})}return(0,G.jsx)(V.xu,{children:(0,G.jsx)(oi.Z,{pin:i,children:(0,G.jsx)(V.xv,{color:"default",overflow:"normal",size:"200",weight:"bold",children:h})})})}var si=n(955362),li=n(397066),di=n(48714);function ci(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}class ui extends t.Component{constructor(...e){super(...e),ci(this,"state",{spamCheck:null}),ci(this,"mounted",!1),ci(this,"handleSpammyDomainCheck",(()=>{const{location:e,pin:i,surface:n,url:t}=this.props;t&&i&&(0,di.$3)({location:e,pin:i,surface:n})&&(0,di.iw)({isMounted:this.mounted,pin:i,location:e,spamCheckCallback:e=>this.setState({spamCheck:e}),href:t})})),ci(this,"handleClick",(e=>{const{auxData:i,location:n,onClick:t,pin:o,pinId:a,url:r,logContextEvent:s}=this.props;(0,di.gV)({isOffsiteUrl:!0,event:e})||(e.preventDefault(),t&&t(e),r&&(0,li.h)({href:r,pinId:a,pin:o,location:n,auxData:i},s))}))}componentDidMount(){this.mounted=!0,this.handleSpammyDomainCheck()}componentWillUnmount(){this.mounted=!1}componentDidUpdate(){const{spamCheck:e}=this.state;null===e&&this.handleSpammyDomainCheck()}render(){const{children:e,pin:i,url:n}=this.props;return(0,G.jsx)("a",{"aria-label":(null==i?void 0:i.domain)||"",href:n,onClick:this.handleClick,rel:"nofollow",style:{color:"inherit",textDecoration:"none",outline:"none",cursor:"pointer",display:"block"},target:null,children:e})}}function _i(e){var i;const{logContextEvent:n}=(0,F.v)(),t=(0,ne.S6)()(null!==(i=e.pinId)&&void 0!==i?i:"");return(0,G.jsx)(ui,{...e,history:(0,he.useHistory)(),location:(0,he.useLocation)(),logContextEvent:n,match:(0,he.useRouteMatch)(),pin:t})}function pi(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";const{downloadedAssets:i,totalAssets:n}=window.prefetchCompletion[e];return n?(i/n*100).toFixed(3).toString():"-1"}var hi=n(941646),mi=n(385740);function gi({children:e,componentType:i,contextLogData:n,pin:t,surface:o,viewParameter:a,viewType:r}){const{logContextEvent:s}=(0,F.v)(),l=(0,K.E)(),{ad_destination_url:d,carousel_data:c,id:u,link:_,tracked_link:p}=t;let h,m=d||p||_||"",g="one-tap-desktop";const f=(0,mi.SU)();if(c){const{carousel_slots:e=[],id:i,index:n=0}=c;e[n]&&e[n].link&&(m=e[n].link),h={carousel_slot_id:e[n]&&e[n].id,carousel_data_id:i,carousel_slot_index:n},g+="-carousel"}return(0,G.jsx)(V.xu,{"data-test-id":"otpp",children:(0,G.jsx)(hi.Z,{id:g,children:(0,G.jsx)(_i,{auxData:h,onClick:()=>{s({event_type:12,view_type:r||l.viewType,view_parameter:a||l.viewParameter,component:i||l.componentType,object_id_str:u,aux_data:{...n,grid_index:l.slotIndex,pin_id:u,prefetch_percentage_complete:pi(_||"")}}),s({event_type:8948,view_type:r||l.viewType,view_parameter:a||l.viewParameter,component:i||l.componentType,object_id_str:u,aux_data:{...n,click_type:"clickthrough",closeup_navigation_type:"click",grid_index:l.slotIndex,pin_id:u,prefetch_percentage_complete:pi(_||"")}}),s({event_type:13,object_id_str:u,component:i||l.componentType,view_type:3,aux_data:{closeup_navigation_type:"web_closeup",...l.contextLogData,...n}}),s({event_type:13,view_type:f.viewType,view_parameter:f.viewParameter,view_data:f.viewData})},pinId:u,surface:o,url:m,children:e})})})}function fi(e){const{pin:i,surface:n}=e,{isOneTap:t,isVideo:o,isPromoted:a,isLeadPin:s}=(0,r.Z)(i),{checkExperiment:l}=(0,Q.F)(),d=!s&&(t||o&&a&&l("web_no_tap_tap").anyEnabled)?gi:oi.Z;return(0,G.jsx)(d,{surface:t?n:void 0,...A(e,["surface"])})}function vi({pin:e,pinNoteText:i}){return(0,G.jsx)(fi,{pin:e,children:(0,G.jsx)(V.xv,{lineClamp:1,overflow:"normal",size:"200",children:i})})}var xi=n(81226);function yi({value:e,valueFormat:i}){const n=(0,B.ZP)();return e||0===e?"TIME"===i?(0,xi.Z)(e):(0,G.jsx)(Xe.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:e}):(0,G.jsx)(V.u,{idealDirection:"up",text:n._('This stat is not available yet', 'closeup.partnerAnalytics.unavailableStat', 'when data for this field has not populated yet'),children:"—"})}function Pi({pin:e}){var i;const n=(0,B.ZP)(),t=(0,M.Z)(),{isStoryPin:o,isVideo:a}=(0,r.Z)(e),s=t.isAuth&&(null===(i=e.pinner)||void 0===i?void 0:i.id)===t.id&&!e.is_repin,l=t.isAuth&&t.isPartner,d=(0,ee.iL)({isOwnPin:s,isPartner:l}),c=(0,ee.H1)({isOwnPin:s,isPartner:l}),u=e.created_at?new Date(e.created_at):null,_=(d||c)&&u&&u.getTime()<=ee.HW.getTime(),p=d?function(e){const{public_creator_analytics:i}=e,{isStoryPin:n}=(0,r.Z)(e);return n&&i?i:null}(e):function(e){const{aggregated_pin_data:i,creator_analytics:n}=e,{creator_analytics:t}=i||{},{isStoryPin:o}=(0,r.Z)(e);return!n||!o&&t?t:n}(e),h=function({isVideo:e,isStoryPin:i,i18n:n,showPublicPinStats:t,showPrivateFullScreenPinStats:o}){return e?[{align:"start",displayText:n._('Video views', 'pinRep.pinStats.videoViews', 'Label for views of a video pin on pinrep'),field:"video_views",iconType:"play"},{align:"center",displayText:n._('Avg. time', 'pinRep.pinStats.videoAverageTime', 'Label for average time of a video pin on pinrep'),field:"video_average_time",iconType:"clock",valueFormat:"TIME"},{align:"end",displayText:n._('Saves', 'pinRep.pinStats.save', 'Label for saves of a video pin on pinrep'),field:"save",iconType:"angled-pin"}]:i?t?[{align:"start",displayText:n._('Full screen plays', 'pinRep.pinStats.fullScreenPlays', 'Label for how many times the Idea Pin has been played full screen'),field:"full_screen_play",iconType:"play"}]:o?[{align:"start",displayText:n._('Full screen plays', 'pinRep.pinStats.fullScreenPlays', 'Label for how many times the Idea Pin has been played full screen'),field:"full_screen_play",iconType:"play"},{align:"center",displayText:n._('Impressions', 'pinRep.pinStats.impression', 'Label for impressions of a pin on pinrep'),field:"impression",iconType:"eye"},{align:"end",displayText:n._('Saves', 'pinRep.pinStats.save', 'Label for saves of a pin on pinrep'),field:"save",iconType:"angled-pin"}]:[{align:"start",displayText:n._('Impressions', 'pinRep.pinStats.impression', 'Label for impressions of a pin on pinrep'),field:"impression",iconType:"eye"},{align:"center",displayText:n._('Closeups', 'pinRep.pinStats.closeups', 'Label for closeups of a pin on pinrep'),field:"closeup",iconSize:10,iconType:"hand-pointing"},{align:"end",displayText:n._('Saves', 'pinRep.pinStats.save', 'Label for saves of a pin on pinrep'),field:"save",iconType:"angled-pin"}]:[{align:"start",displayText:n._('Impressions', 'pinRep.pinStats.impression', 'Label for impressions of a pin on pinrep'),field:"impression",iconType:"eye"},{align:"center",displayText:n._('Saves', 'pinRep.pinStats.save', 'Label for saves of a pin on pinrep'),field:"save",iconType:"angled-pin"},{align:"end",displayText:n._('Link clicks', 'pinRep.pinStats.clickthrough', 'Label for click-throughs of a pin on pinrep'),field:"clickthrough",iconSize:10,iconType:"arrow-up-right"}]}({isVideo:a,isStoryPin:o,i18n:n,showPublicPinStats:d,showPrivateFullScreenPinStats:c}),m=a||o?null==p?void 0:p.all_time_realtime:null==p?void 0:p["30d_realtime"];return(0,G.jsx)(V.kC,{alignItems:"stretch",justifyContent:"start",children:h.map((({align:e,displayText:i,field:n,iconType:t,iconSize:o=12,valueFormat:a})=>(0,G.jsxs)(V.xu,{alignItems:"center",column:4,display:"flex",justifyContent:e,children:[(0,G.jsx)(V.xu,{display:"inlineBlock",marginEnd:1,children:(0,G.jsx)(V.JO,{accessibilityLabel:i,color:"default",icon:t,size:o})}),(0,G.jsx)(V.xv,{inline:!0,size:"200",children:(0,G.jsx)(yi,{value:"full_screen_play"===n&&_?null:null==m?void 0:m[n],valueFormat:a})})]},n)))})}function bi({currentPrice:e,disableLink:i,originalPrice:n,pin:t,surface:o}){const a=n&&n!==e,r=(0,G.jsxs)(V.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[e&&(0,G.jsx)(V.xv,{color:"default",size:"200",weight:"bold",children:e}),a&&(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{textDecoration:"line-through",textDecorationColor:"#767676"}},marginStart:1,children:(0,G.jsx)(V.xv,{color:"subtle",size:"200",weight:"bold",children:n})})]});return i?r:(0,G.jsx)(fi,{pin:t,surface:o,children:r})}function wi({disableLink:e,pin:i,surface:n}){const t=(0,G.jsx)(V.kC,{alignItems:"stretch",justifyContent:"start",children:(0,G.jsx)(V.xv,{color:"default",lineClamp:1,overflow:"normal",size:"200",weight:"normal",children:_(i,n)})});return e?t:(0,G.jsx)(fi,{pin:i,surface:n,children:t})}var Si=n(655747);function Ti({disableLink:e,numberOfLines:i=2,pin:n,pinTitle:t,surface:o}){const a=e?t:(0,G.jsx)(fi,{pin:n,surface:o,children:t});return(0,G.jsx)(V.xv,{color:"default",lineClamp:i,size:"200",weight:"bold",children:a})}var Ii=n(423217);const Ei={container:{padding:"8px 6px 16px"},productContainer:{padding:"12px 6px 16px"},imageOnlyAttribution:{hidden:{opacity:0,transition:`opacity ${Ii.X}ms ease`},visible:{opacity:1}}};function Ai({attributionType:e,board:i,feedbackData:n,feedbackType:a,hasTextContent:s,hasTitleOrSource:l,hoverTransitionState:d,pin:c,pinNoteText:u,pinTitle:_,productCurrentPrice:p,productOriginalPrice:m,setForcePrimary:g,showCarouselEllipsis:f,showFavoriteButton:v,showGroupBoardAvatar:x,showNativeReactions:y,showOverflowMenu:P,showPinStats:b,showSource:w,showTextContent:S,showAttribution:T,surface:I,titleLines:E}){var A,C,R,j;const k=(0,B.ZP)(),O=(0,M.Z)(),N=(0,o.useDispatch)(),{favorited_by_me:D,favorite_user_count:z,id:L,pinner:Z,reaction_counts:F,sponsorship:H,story_pin_data:U}=c,{has_affiliate_products:W}=U||{},$=function(e,i,n){var t,o,a,s;const{board:l,link_domain:d={},promoter:c,sponsorship:u,native_creator:_}=e,{sponsor:p}=u||{},{isPromoted:h}=(0,r.Z)(e),{official_user:m}=d||{},g=h&&!!u&&(null==_?void 0:_.id)!==(null==c?void 0:c.id),f=e.pinner||{};let v="",x="",y="",P="",b="",w="",S=!1,T=!1;var I,E,A,C,R,j;if(g)v=null!==(I=null!==(E=null==_?void 0:_.image_medium_url)&&void 0!==E?E:null==_?void 0:_.image_small_url)&&void 0!==I?I:"",x=`/${null!==(A=null==_?void 0:_.username)&&void 0!==A?A:""}/`,y=null==c?void 0:c.full_name,P=null==_?void 0:_.full_name,w=`/${null!==(C=null==_?void 0:_.username)&&void 0!==C?C:""}/`,b=`/${null!==(R=null==c?void 0:c.username)&&void 0!==R?R:""}/`,S=null==_||null===(j=_.verified_identity)||void 0===j?void 0:j.verified,T=null==_?void 0:_.is_verified_merchant;else if(h&&c)v=c.image_medium_url||c.image_small_url,y=c.full_name,P=n._('Promoted by', 'indicating the username of the person who promoted the pin', 'indicating the username of the person who promoted the pin'),w=`/${c.username}/`;else if(u&&null!=p&&p.username){var k,O,N,D,z,B;v=null!==(k=null!==(O=null!==(N=null==_?void 0:_.image_large_url)&&void 0!==N?N:null==_?void 0:_.image_medium_url)&&void 0!==O?O:null==_?void 0:_.image_small_url)&&void 0!==k?k:"",x=`/${null!==(D=null==_?void 0:_.username)&&void 0!==D?D:""}/`,y=p.full_name,P=null==_?void 0:_.full_name,w=`/${null!==(z=null==_?void 0:_.username)&&void 0!==z?z:""}/`,b=`/${p.username}/`,S=null==_||null===(B=_.verified_identity)||void 0===B?void 0:B.verified,T=null==_?void 0:_.is_verified_merchant}else if(_){var L,Z,M,V,F;v=null!==(L=null!==(Z=null!==(M=_.image_large_url)&&void 0!==M?M:_.image_medium_url)&&void 0!==Z?Z:_.image_small_url)&&void 0!==L?L:"",P=_.full_name,w=`/${null!==(V=_.username)&&void 0!==V?V:""}/`,S=null===(F=_.verified_identity)||void 0===F?void 0:F.verified,T=_.is_verified_merchant}else if("show-for-claimed-content"===i){var G,H,U,W;null!=m&&m.is_primary_website_verified&&m.username&&(v=null!==(G=null!==(H=null!==(U=m.image_large_url)&&void 0!==U?U:m.image_medium_url)&&void 0!==H?H:m.image_small_url)&&void 0!==G?G:"",P=m.full_name,w=`/${m.username}/`,S=null===(W=m.verified_identity)||void 0===W?void 0:W.verified,T=m.is_verified_merchant)}else{var $,Y,X,q;v=null!==($=null!==(Y=null!==(X=f.image_large_url)&&void 0!==X?X:f.image_medium_url)&&void 0!==Y?Y:f.image_small_url)&&void 0!==$?$:"",x=`/${f.username}/`,P=f.full_name,w=l?l.url:"",S=null===(q=f.verified_identity)||void 0===q?void 0:q.verified,T=f.is_verified_merchant}return{avatarUrl:null!==(t=v)&&void 0!==t?t:"",attributionNameLink:x,attributionTitle:null!==(o=y)&&void 0!==o?o:"",name:null!==(a=P)&&void 0!==a?a:"",sponsorUrl:b,url:null!==(s=w)&&void 0!==s?s:"",verifiedIdentity:!!S,isVerifiedMerchant:!!T}}(c,e,k),{avatarUrl:Y,attributionNameLink:X,attributionTitle:q,name:K,sponsorUrl:J,url:Q,verifiedIdentity:ee,isVerifiedMerchant:ie}=$,ne=!!c.promoter&&!c.is_downstream_promotion,te=ne&&(null===(A=c.native_creator)||void 0===A?void 0:A.id)===(null===(C=c.promoter)||void 0===C?void 0:C.id),oe=(0,pe.Z)(101,{view_type:3,element:27,object_id_str:L,component:c.story_pin_data_id?230:void 0,aux_data:{pin_id:L,...null!=H&&null!==(R=H.creator)&&void 0!==R&&R.id&&null!==(j=H.sponsor)&&void 0!==j&&j.id?{creator_id:H.creator.id,sponsor_id:H.sponsor.id}:{}}}),ae=e=>N(ae(e)),{full_name:re}=(null==H?void 0:H.sponsor)||{},se="ConversationView"===I?{padding:"8px"}:Ei.container;return(0,G.jsxs)(V.xu,{dangerouslySetInlineStyle:{__style:se},children:[f&&(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:l||x||"none"!==e?{marginBottom:"6px"}:{}},display:"flex",justifyContent:"center",children:(0,G.jsx)(Ne.default,{pinId:L})}),b&&(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"6px"}},flex:"grow",width:"100%",children:(0,G.jsx)(Pi,{pin:c})}),(0,G.jsx)(V.kC,{alignItems:"stretch",justifyContent:"start",children:(0,G.jsxs)(V.xu,{flex:"grow",children:[(!!H||W&&!ne)&&!te&&(0,G.jsx)(V.xu,{marginBottom:1,children:(0,G.jsx)(V.xu,{flex:"grow",overflow:"hidden",children:(0,G.jsx)(Si.Z,{hasAffiliateProducts:W,href:J||Q,isPromoted:ne,sponsorName:re,sponsorshipStatus:null==H?void 0:H.status,onNavigateSponsorClick:()=>{ae(L),oe()},textWeight:"bold"})})}),(S&&s||v)&&(0,G.jsxs)(V.xu,{marginBottom:1,children:[(m||p)&&(0,G.jsx)(V.xu,{marginBottom:1,children:(0,G.jsx)(bi,{currentPrice:p,originalPrice:m,pin:c,surface:I})}),v?(0,G.jsxs)(V.kC,{alignItems:"start",children:[(0,G.jsx)(V.kC,{flex:"grow",children:(0,G.jsx)(Ti,{numberOfLines:E,pin:c,pinTitle:_,surface:I})}),(0,G.jsx)(V.xu,{marginStart:3,children:(0,G.jsx)(Fe,{board:i,favorited:!!D,favoriteCount:null!=i&&i.is_collaborative&&(0,h.Z)({board:i,viewer:O})?null!=z?z:0:void 0,pinId:L})})]}):(0,G.jsx)(Ti,{numberOfLines:E,pin:c,pinTitle:_,surface:I}),w&&(0,G.jsx)(V.xu,{marginBottom:2,children:(0,G.jsx)(wi,{pin:c,surface:I})})]}),T&&(0,G.jsxs)(V.kC,{alignItems:"center",justifyContent:"start",children:[(0,G.jsx)(V.xu,{flex:"grow",children:(()=>{const i=(0,G.jsx)(Oe,{attributionNameLink:X,attributionTitle:ne&&!H||te?q:"",avatarUrl:Y,isPromotedByPinCreator:!!te,isVerifiedMerchant:ie,name:K,pin:c,url:Q,verifiedIdentity:ee});switch(e){case"none":return null;case"image-only-credit":return(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:Ei.imageOnlyAttribution["active"===d?"visible":"hidden"]},children:(0,G.jsx)(ri,{pin:c,feedbackType:a})});default:return Object.values($).some((e=>Boolean(e)))?i:null}})()}),P&&(0,G.jsx)(V.xu,{flex:"none",children:(0,G.jsx)(si.default,{feedbackData:n,feedbackType:a,pin:c,pinTitle:_,setForcePrimary:g,transparentBackground:!0})})]}),y&&!!F&&Object.keys(F).length>0&&(0,G.jsx)(V.xu,{marginTop:"ConversationView"===I?2:void 0,children:(0,G.jsx)(ti,{pinId:L,pinner:Z,reactionCounts:F,surface:I})}),u&&(0,G.jsx)(V.xu,{marginBottom:1,children:(0,G.jsx)(vi,{pin:c,pinNoteText:u})}),x&&!v&&(0,G.jsx)(V.xu,{alignItems:"center",display:"flex",marginTop:1,marginBottom:1,children:(0,G.jsxs)(t.Fragment,{children:[(0,G.jsx)(Ae,{attributionNameLink:X||Q,avatarUrl:Y,fullWidth:!1,name:K,accessibilityLabel:K}),(0,G.jsx)(V.xu,{marginStart:2,flex:"grow",children:(0,G.jsx)(V.xv,{size:"200",children:K})})]})})]})},`${c.id}-sponsor-name-link`)]})}var Ci=n(149230);function Ri(){const e=(0,B.ZP)();return(0,G.jsx)(V.xv,{color:"subtle",overflow:"normal",size:"200",weight:"normal",children:e._('Sold out', 'pinrep.footer.outOfStock', 'Footer text to indicate that product pin is out of stock.')})}var ji=n(104389);function ki(){const e=(0,B.ZP)();return(0,G.jsx)(V.xv,{color:"subtle",overflow:"normal",size:"200",weight:"normal",children:e._('See price on site', 'pinrep.footer.staleProduct', 'Footer text to indicate that is a stale(untrustworthy) product pin.')})}const Oi=18;function Ni({dimension:e,color:i,isSelected:n,img:t,selectVariant:o}){var a,r,s;const l=(0,B.ZP)(),d=(0,G.jsx)(V.iP,{fullHeight:!0,fullWidth:!0,rounding:1,onMouseEnter:({event:n})=>{n.preventDefault(),n.stopPropagation(),o({dimensionName:e,variant:i})},onFocus:()=>{o({dimensionName:e,variant:i})},children:(0,G.jsx)(V.xu,{"data-test-id":`primary-variant-preview-icon-${i}`,height:Oi,width:Oi,rounding:1,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{border:n?"1px solid black":"1px solid #EFEFEF"}},children:(0,G.jsx)(V.xu,{height:14,width:14,position:"absolute",rounding:1,overflow:"hidden",children:(0,G.jsx)(V.xu,{"data-test-id":`${i}-variant-preview-wrapper`,dangerouslySetInlineStyle:{__style:{transform:"scale(10,10)"}},children:(0,G.jsx)(V.zd,{height:14,width:14,rounding:1,children:(0,G.jsx)(V.Ee,{alt:l._('Color variant preview image', 'MerchantStorefront.Variant.VariantPreviewIcon.Image', 'Alt text for color variant preview image'),naturalHeight:null!==(a=t.height)&&void 0!==a?a:1,naturalWidth:null!==(r=t.width)&&void 0!==r?r:1,src:null!==(s=t.url)&&void 0!==s?s:"",fit:"contain"})})})})})});return(0,G.jsx)(V.xu,{"data-test-id":`primary-variant-main-${i}`,display:"inlineBlock",height:Oi,rounding:1,width:Oi,children:d})}function Di(){const{logContextEvent:e}=(0,F.v)(),i=(0,oe.Xx)(),n=i&&i.primaryVariants.filter((e=>e.image)).length>0;if((0,t.useEffect)((()=>{e({event_type:120,component:14092})}),[n,e]),!i)return null;const{primaryVariants:o,primaryDimName:a}=i,r=o.slice(0,6).map((e=>{const n=e.value,t=e.value===i.selectedMap[a],o=e.image;return o?(0,G.jsx)(Ni,{dimension:a,color:n,isSelected:t,img:o,selectVariant:i.selectVariant},n):null})).filter(Boolean);if(o.length>6){const e=o.length-6;r.push((0,G.jsx)(V.xu,{"data-test-id":"plus-number",display:"flex",height:Oi,rounding:1,width:Oi,justifyContent:"center",children:(0,G.jsxs)(V.iP,{fullHeight:!0,fullWidth:!0,rounding:1,onTap:({event:e})=>{e.stopPropagation()},children:["+",e]})},6))}return(0,G.jsx)(V.kC,{justifyContent:"start",alignItems:"center",gap:3,children:r})}function zi({contentType:e,hasTextContent:i,pin:n,pinTitle:o,productCurrentPrice:a,productOriginalPrice:r,productRating:s,productShipping:l,showSource:d,showVisitSiteButton:c,surface:_,titleLines:p}){var h;const{logContextEvent:m}=(0,F.v)(),g=(0,B.ZP)(),{checkExperiment:f}=(0,Q.F)(),{anyEnabled:v,group:x}=f("web_shopping_grid_metadata_ratings_shipping",{dangerouslySkipActivation:!0}),y=(null===(h=n.rich_summary)||void 0===h?void 0:h.url)||n.link;"shopping"!==e||x.includes("pwt")||f("web_shopping_grid_metadata_ratings_shipping");let P=null;if((0,oe.Xx)()){const{anyEnabled:e}=f("storefront_variant_pins");e&&(P=(0,G.jsx)(Di,{}))}const b=(0,Ci.Z)({url:y})?"nofollow":"none";return(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:Ei.productContainer},height:"100%",children:(0,G.jsx)(V.kC,{direction:"column",flex:"grow",height:"100%",justifyContent:"between",children:i&&(0,G.jsxs)(t.Fragment,{children:[(0,G.jsx)(fi,{pin:n,surface:_,children:(0,G.jsxs)(V.kC,{direction:"column",gap:1,children:[(r||a)&&(0,G.jsx)(bi,{currentPrice:a,disableLink:!0,originalPrice:r,pin:n,surface:_}),(0,u.qN)(n)&&(0,G.jsx)(Ri,{}),(0,u.SP)(n)&&(0,G.jsx)(ki,{}),(0,G.jsx)(Ti,{disableLink:!0,numberOfLines:p,pin:n,pinTitle:o,surface:_}),d&&(0,G.jsx)(wi,{disableLink:!0,pin:n,surface:_}),"shopping"===e&&v&&(s||Number.isFinite(null==l?void 0:l.free_shipping_value))&&(0,G.jsx)(ji.Z,{count:null==s?void 0:s.count,countFormat:"number",isGridView:!0,ratingValue:null==s?void 0:s.rating,shippingInfo:l}),P]})}),c&&y?(0,G.jsx)(V.xu,{marginTop:2,children:(0,G.jsx)(V.zx,{role:"link",fullWidth:!0,href:y,rel:b,onClick:()=>{m({event_type:12,view_type:1,view_parameter:3563})},target:"blank",text:g._('Visit site', 'ShoppingList.Pin.CTA.Button.VisitSite.Text', 'Text on CTA button on ShoppingList Pin to Visit Site')})}):null]})})})}const Bi=(0,t.memo)((function({attributionType:e,blockClickEvents:i,board:n,contentType:t,feedbackData:o,feedbackType:a,hoverTransitionState:r,pin:s,pinNoteText:l,pinTitle:d,productCurrentPrice:c,productOriginalPrice:u,productRating:_,productShipping:p,setForcePrimary:h,showCarouselEllipsis:m,showFavoriteButton:g,showGroupBoardAvatar:f,showNativeReactions:v,showOverflowMenu:x,showPinStats:y,showSource:P,showTextContent:b,showVisitSiteButton:w,showAttribution:S=!0,surface:T,titleLines:I}){const E=d||P,A="shopping"===t?(0,G.jsx)(zi,{contentType:t,hasTextContent:!!E,pin:s,pinTitle:d,productCurrentPrice:c,productOriginalPrice:u,productRating:_,productShipping:p,showSource:P,showVisitSiteButton:w,surface:T,titleLines:I}):(0,G.jsx)(Ai,{attributionType:e,board:n,feedbackData:o,feedbackType:a,hasTextContent:!!E,hasTitleOrSource:!!E,hoverTransitionState:r,pin:s,pinNoteText:l,pinTitle:d,productCurrentPrice:c,productOriginalPrice:u,setForcePrimary:h,showCarouselEllipsis:m,showFavoriteButton:g,showGroupBoardAvatar:f,showNativeReactions:v,showOverflowMenu:x,showPinStats:y,showSource:P,showTextContent:b,showAttribution:S,surface:T,titleLines:I});return i?(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:A}):(0,G.jsx)(V.kC,{flex:"grow",children:(0,G.jsx)(se.Z,{fullWidth:!0,children:A})})}));var Li=n(420632),Zi=n(784590),Mi=n(968328);const Vi=(0,t.lazy)((()=>n.e(34979).then(n.bind(n,91540)))),Fi=(0,t.lazy)((()=>Promise.all([n.e(97270),n.e(5954),n.e(24654),n.e(81286),n.e(43473)]).then(n.bind(n,828528)))),Gi=(0,t.lazy)((()=>Promise.all([n.e(97270),n.e(5954),n.e(67228),n.e(24654),n.e(22347)]).then(n.bind(n,566775)))),Hi=(0,t.lazy)((()=>Promise.all([n.e(97270),n.e(3215),n.e(22538)]).then(n.bind(n,450564)))),Ui=(0,t.lazy)((()=>n.e(1593).then(n.bind(n,331806))));function Wi({derivedSaveButtonOptions:e,forcePrimaryContent:i,showEnabledSaveBehavior:n,onToggleFlyout:a,onToggleModal:r,pin:s}){const l=(0,oe.Xx)(),d=function(e){return(0,Zi.Z)(e?{name:"PinResource",options:{id:e}}:null)}(null==l?void 0:l.variantUrl),c=d&&d.data?d.data:s,{id:u,savedInfo:_}=c,p=(0,t.useRef)(!!_),h=(0,o.useSelector)((({experiences:e})=>{const i=e[1000294];return 502450===(null==i?void 0:i.experience_id)?i:null})),{saveBehaviorType:m}=(0,Mi.tY)(n);void 0!==m&&["classic","controlled","inline"].includes(e.type)&&(e=m);const{viewParameter:g,viewType:f}=(0,K.E)(),v=(0,pe.Z)(101,{element:0,object_id_str:u});let x=null;const y={onToggleModal:a,view:f,viewParameter:g,useLegoStyles:!0};if(!e.hidePinBetterSaveDropdown&&(h||n&&["classic","controlled"].includes(e.type))&&["classic","controlled","inline"].includes(e.type)){const{renderPinSaveTooltip:t}=e;x=(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_QuickSaveButton",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Hi,{experience:h||void 0,forcePrimaryContent:i,pin:c,renderPinSaveTooltip:t,showEnabledSaveBehavior:n,viewParameter:g})})})})}else if("classic"===e.type||"controlled"===e.type){const{renderPinSaveTooltip:i}=e;x=(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinSaveButton",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(V.xu,{"data-test-id":"pin-save-button",maxWidth:"100%",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Fi,{onClickCallback:v,onToggleModal:r,oneTapSave:"controlled"===e.type?e:void 0,pin:c,renderPinSaveTooltip:i,renderSavedStatus:()=>!!_&&(0,G.jsx)(se.Z,{children:(0,G.jsx)(Li.Z,{isNewlySaved:!p.current,name:_.title,type:_.type,url:_.url})}),variant:"lego",viewParameter:g})})})})})}else if("inline"===e.type){const i=c,{initialSelection:n,onSave:t,renderPinSaveTooltip:o,hidePinBetterSaveDropdown:s}=e;x=(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinBetterSave",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(V.xu,{"data-test-id":"better-save",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Gi,{initialSelection:n,onSave:t,onToggleFlyout:a,onToggleModal:r,pin:i,renderPinSaveTooltip:o,renderSavedStatus:({savedInfo:e})=>e&&(0,G.jsx)(se.Z,{children:(0,G.jsx)(Li.Z,{isNewlySaved:!p.current,name:e.title,type:e.type,url:e.url,shouldUseLegoStyles:!0})}),variant:"pin",viewParameter:g,hideDropdown:s})})})})})}else"persistentOneClickSave"===e.type?x=(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_PersistentOneClickSave",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(V.xu,{"data-test-id":"persistent-one-click-save",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Vi,{...y,saveOptions:e,pin:c})})})})}):"promote"===e.type&&(x=(0,G.jsx)(V.kC,{alignItems:"stretch",justifyContent:"end",children:(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinPromoteButton",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(V.xu,{"data-test-id":"pin-promote-button",children:(0,G.jsx)(se.Z,{children:(0,G.jsx)(Ui,{pin:c})})})})})}));return(0,G.jsx)(E.Z,{name:"PinRepPrimaryContent",children:(0,G.jsx)(V.xu,{display:"flex",margin:3,children:x&&(0,G.jsx)(V.xu,{marginStart:"auto",flex:"grow",children:x})})})}var $i=n(64446),Yi=n(698447),Xi=n(814115),qi=n(312955),Ki=n(118334);const Ji={__style:{boxShadow:"inset 0 0 0 2px black,  inset 0 0 0 4px white",transition:"all 300ms ease"}};function Qi({isSelected:e}){const i=(0,B.ZP)();return(0,G.jsx)(V.xu,{bottom:!0,left:!0,position:"absolute",right:!0,rounding:4,top:!0,dangerouslySetInlineStyle:e?Ji:{},children:(0,G.jsx)(V.xu,{position:"absolute",bottom:!0,right:!0,padding:3,children:(0,G.jsx)(V.xu,{alignItems:"center",color:e?"dark":"default",display:"flex",height:"24px",justifyContent:"center",rounding:2,width:"24px",dangerouslySetInlineStyle:{__style:{transition:"all 300ms ease"}},children:(0,G.jsx)(V.JO,{accessibilityLabel:i._('Pin is selected to be saved', 'SectionSuggestionPin.iconOnPin.selectedPin', 'accessibility label on an icon'),color:"inverse",icon:"check",size:12})})})})}var en=n(124364),nn=n(802933),tn=n(674915),on=n(559230),an=n(428258),rn=n(172071);const sn={},ln=e=>{rn.Z.increment("web_prefetch_via_xhr.attempt",1);const i=(0,ce.Z)(e);return new Promise(((n,t)=>{if(window.navigator&&window.navigator.connection){const e=window.navigator.connection;e.saveData&&(rn.Z.increment("web_prefetch_via_xhr.saveDataOn",1),n()),/2g/.test(e.effectiveType)&&(rn.Z.increment("web_prefetch_via_xhr.poorConnection",1),n())}const o=new XMLHttpRequest;o.open("GET",e),o.onload=()=>{200===o.status?(sn[e]&&(sn[e].loaded=!0),rn.Z.increment("web_prefetch_via_xhr.load.success",1,{hostname:i.hostname||"unknown"}),n(o.response)):(rn.Z.increment("web_prefetch_via_xhr.load.error",1,{hostname:i.hostname||"unknown"}),t())},sn[e]||(o.send(),sn[e]={added:!0,xhr:o},rn.Z.increment("web_prefetch_via_xhr.xhrSent",1,{hostname:i.hostname||"unknown"}))}))},dn={},cn=(e,i)=>{const n="string"==typeof e?e:e.url;if(i&&n){const e="control"===i?"v3.pinimg.com":"v2.pinimg.com";return n.replace("v.pinimg.com",e)}return n};function un(e,i){return(cn("https://v.pinimg.com/videos/mc/hls/",i)||"")+`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4,6)}/${e}`}function _n(e){const{id:i}=e;i&&dn[i]&&dn[i].length>0&&dn[i].forEach((e=>{(e=>{sn[e]&&sn[e].xhr&&!sn[e].loaded&&(rn.Z.increment("web_prefetch_abort_xhr",1),sn[e].xhr.abort(),sn[e].aborted=!0)})(e)}))}function pn({autoplaySettingOff:e,blockClickEvents:i,fallbackColor:n,imageFit:o,imageHeightModifier:a,isDenseView:s,isHovering:l,isSocialSeasonalBoard:d=!1,onError:c,onLoad:u,pin:_,pinImageCrop:p,resolution:h="default",rootMargin:m,selectionState:g,showCarousel:f,showPromotedVideos:v,showUnavailablePin:x,surface:y}){const{contextLogData:P,slotIndex:b,viewParameter:w,viewType:S}=(0,K.E)(),{checkExperiment:T}=(0,Q.F)(),{group:I}=T("web_prefetch_video_in_feed"),{id:E="",aggregated_pin_data:A,image_signature:C,story_pin_data:R}=_,{pin_tags_chips:j}=A||{},{isOneTap:k,isVideo:O,isPromoted:N,isGif:D}=(0,r.Z)(_),{cropHeight:z,cropWidth:B}=(e=>"string"==typeof e?{cropHeight:0,cropWidth:0}:{cropHeight:e.height,cropWidth:e.width})(p);let L=null;if(x)L=(0,G.jsx)(en.Z,{isDenseView:s,height:s?250:420,rounding:0,width:s?164:236});else if(e||!O||!v&&N||"BoardCoverSelectablePin"===y)if(f)L=(0,G.jsx)(V.xu,{"data-test-id":"pinrep-carousel",children:(0,G.jsx)(Xi.Z,{cropHeight:z,cropWidth:B,onError:c,onLoad:u,highResOnly:"high-res"===h,lowResOnly:"low-res"===h,pinId:E,showCarouselBadge:!1,pin:_})});else{const e="backend"===p?function({images:e,image_crop:i}){var n;const t=e&&(null===(n=e["236x"])||void 0===n?void 0:n.height);if(i&&(0!==i.min_y||1!==i.max_y)){const{min_y:e=0,max_y:n=0}=i;return{marginTop:(e>0?-1*e*(null!=t?t:0):0)+"px",marginBottom:`${n<1?Math.round(-1*(1-n)*(null!=t?t:0)):0}px`}}return{}}(_):{};L=(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:e},"data-test-id":"pinrep-image",minHeight:55,children:(0,G.jsx)(qi.Z,{animateGif:D&&d,cropHeight:z,cropWidth:B,fallbackColor:n,imageFit:o,highResOnly:"high-res"===h,lowResOnly:"low-res"===h,mediumResOnly:"medium-res"===h,onLoad:u,onError:c,pin:_})})}else L=(0,G.jsx)(V.xu,{"data-test-id":"pinrep-video",direction:"column",display:"flex",height:z||void 0,justifyContent:"center",children:(0,G.jsx)(Ki.Z,{cropHeight:z,cropWidth:B,highResOnly:"high-res"===h,imageHeightModifier:a,inAdsDesktopVideoExperiment:O&&v,isExperimentalPinRep:!0,lowResOnly:"low-res"===h,onError:c,onLoad:u,pin:_,rootMargin:m,surface:y,viewParameter:w,viewType:S})});const Z=(0,G.jsx)(V.zd,{wash:!0,children:(0,G.jsx)(le.Z,{hovered:l,pin:_,slotIndex:b,viewType:1,children:L})}),M=["selected-image-only","deselected-image-only"].includes(g),F="selected-image-only"===g,H=(0,t.useRef)(!0),U=(0,t.useRef)(!1),W=(0,t.useRef)(!1),$=T("web_video_quic").group;if((0,t.useEffect)((()=>{H.current||!l||k||i||U.current?l||!U.current||W.current||(_n(R||_),W.current=!0):R?(!function(e,i){var n;const{id:t,pages:o,pages_preview:a}=e;if(!a&&!o)return;const r=a?a[0]:null==o?void 0:o[0],s=null==r||null===(n=r.blocks)||void 0===n?void 0:n.find((e=>3===e.block_type));if(s&&s.video){const{hlsv3:e,mp4:n}=(0,an.Z)(s.video)||{},o=n||e;if(o&&t){var l;const e=null!==(l=cn(o,i))&&void 0!==l?l:"";dn[t]=dn[t]?dn[t].concat(e):[e],ln(e)}}}(R,$),U.current=!0):(!function(e,i){const{id:n,videos:t}=e,{video_list:o}=t||{},a=(0,nn.Z)({pin:e}),{video:r}=(0,tn.Z)(a)||{},{hls:s,hlsv3:l}=r||{};if(o){const e=(0,an.t)(o)||{},t=l||s||{};if(t.url){var d;const e=null!==(d=cn(t.url,i))&&void 0!==d?d:"";dn[n]=dn[n]?dn[n].concat(e):[e],ln(e).then((e=>{let t=[];if("string"==typeof e&&(t=e.split("\n").filter((e=>e.endsWith(".m3u8")))),t&&t[on.VS]){const e=un(t[on.VS],i);return dn[n]=dn[n].concat(e),ln(null!=e?e:"")}return null})).then((e=>{let t=[];if("string"==typeof e&&(t=e.split("\n").filter((e=>e.endsWith(".ts")))),t&&t[0]){const e=un(t[0],i);return dn[n]=dn[n].concat(e),ln(null!=e?e:"")}return null}))}else if(e.url){var c;const t=null!==(c=cn(e.url,i))&&void 0!==c?c:"";ln(t),dn[n]=dn[n]?dn[n].concat(t):[t]}}}(_,$),U.current=!0),H.current=!1}),[i,l,k,R,_,I,$]),i)return(0,G.jsxs)(t.Fragment,{children:[Z,M&&(0,G.jsx)(Qi,{isSelected:F}),j&&(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{marginTop:1}},children:(0,G.jsx)(Yi.Z,{pin:_,enableCloseupLink:!0})})]});const{commerce_data:Y,story_type:X,board_id:q,board_pin_count:J}=P||{},ee=["RelatedProductsExploreTab","RelatedProductsFeed"].includes(y);return(0,G.jsxs)(fi,{contextLogData:{commerce_data:ee?Y:void 0,grid_index:b,image_signature:C,story_type:X,board_id:q,board_pin_count:J},elementType:R?12372:35,pin:_,surface:y,children:[Z,j&&(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:{marginTop:1}},children:(0,G.jsx)(Yi.Z,{pin:_,enableCloseupLink:!1})})]})}var hn=n(812446),mn=n(946984);const gn=(0,hn.Z)((({handleSendShareFlyoutButtonClick:e})=>{const i=(0,B.ZP)(),n=(0,mn.Z)();return(0,G.jsx)(V.zx,{fullWidth:!0,onClick:({event:i})=>{i.stopPropagation(),n?n():e()},text:i._('Send', 'Send a pin', 'Send a pin'),color:"gray",accessibilityLabel:i._('Send', 'Accessible label to send a pin', 'Accessible label to send a pin')})}));function fn(e){return e<160?"header-only":"none"}function vn(e){const[i,n]=(0,t.useState)(e.current?fn(e.current.clientHeight||0):"none");return function(e,i){const n=(0,t.useRef)();(0,t.useEffect)((()=>{const t=e.current;if(!t)return;const o=n.current;o&&o.width===t.offsetWidth&&o.height===t.offsetHeight||(n.current={width:t.offsetWidth||0,height:t.offsetHeight||0},i&&i(n.current))})),n.current}(e,(({height:e})=>{const t=fn(e);t!==i&&n(t)})),i}var xn=n(521460),yn=n(704115);const Pn={impressed:{backgroundColor:"#adebad"}};function bn({debugImpressionState:e="paused",slotIndex:i}){return"paused"===e?null:(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:Pn.impressed},"data-test-id":"debug-pin-impressions",position:"absolute",top:!0,left:!0,right:!0,bottom:!0,opacity:.5,children:(0,G.jsx)(V.xu,{position:"absolute",top:!0,left:!0,padding:2,color:"selected",children:(0,G.jsx)(V.xv,{color:"inverse",children:(0,G.jsx)("span",{className:"deprecatedTextSizeXL",children:i})})})})}var wn=n(472231),Sn=n(31658),Tn=n(123987),In=n(310227);const En="#000000",An="#ffffff";function Cn({selected:e=!1}){const i=(0,B.ZP)(),{isRTL:n}=(0,fe.B)();return(0,G.jsx)(V.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,zIndex:new V.Ry(1),dangerouslySetInlineStyle:{__style:{borderWidth:"3px",borderStyle:"solid",borderColor:e?En:An,borderRadius:In.Oc,boxShadow:e?"inset 0 0 0 3px #fff":void 0}},children:e?(0,G.jsx)(V.xu,{position:"absolute",bottom:!0,right:!n,left:n,display:"flex",alignItems:"center",justifyContent:"center",margin:3,rounding:2,height:24,width:24,color:"dark",children:(0,G.jsx)(V.JO,{accessibilityLabel:i._('Check icon', 'pinRepSelectionBorder.checkIcon', 'Accessibility label for check icon on selected Pin'),icon:"check",color:"inverse",size:12})}):(0,G.jsx)(V.xu,{right:!n,left:n,position:"absolute",top:!0,margin:3,children:(0,G.jsx)(V.JO,{accessibilityLabel:i._('Handle icon', 'pinRepSelectionBorder.handleIcon', 'Accessibility label for handle icon on an organizable Pin'),icon:"handle",color:"light",size:24})})})}const Rn={wrapper:{borderRadius:In.Oc,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},promotedPinBorderTreatment:{background:"#EFEFEF",padding:4,borderRadius:20},primaryContentContainer:{marginBottom:"auto"},visualOverlay:{backgroundColor:In.Dv.VISUAL},savedOverlay:{backgroundColor:In.Dv.SAVED},legoWashOverlay:{backgroundColor:In.Dv.LEGO_WASH}};function jn({children:e,savedOverlayVisibility:i="none",visualOverlayVisibility:n="none",handleMouseOverPinContent:t,handleMouseLeavePinContent:o,primaryContent:a,primaryContentVisibility:r="none",secondaryContent:s,secondaryContentVisibility:l="none",accessoryContent:d,accessoryContentVisibility:c="none",actionBar:u,actionBarVisibility:_="none",seeStatsButton:p,footer:h,selectionState:m="no-selection",debugContent:g,signalDebuggerContent:f,signalDebuggerV2Content:v,signalDebuggerV2ContentVisibility:x="none",obscuredPinOverlay:y,showNoPinBorderRadius:P,showPromotedPinBorderTreatment:b,shouldUseLegoWash:w}){return(0,G.jsx)(V.xu,{dangerouslySetInlineStyle:{__style:b?Rn.promotedPinBorderTreatment:{}},height:"100%",children:(0,G.jsxs)(V.xu,{dangerouslySetInlineStyle:{__style:P?{}:Rn.wrapper},"data-test-id":"pinWrapper",display:"flex",direction:"column",height:"100%",overflow:"hidden",position:"relative",children:[["selected","deselected"].includes(m)&&(0,G.jsx)(Cn,{selected:"selected"===m}),(0,G.jsxs)(V.xu,{"aria-hidden":Boolean(y),children:[(0,G.jsxs)(V.xu,{dangerouslySetInlineStyle:{__style:P?{}:Rn.wrapper},overflow:"hidden",position:"relative",onFocus:t,onBlur:o,onMouseEnter:t,onMouseLeave:o,children:[e,(0,G.jsx)(Tn.Z,{visibility:n,children:(0,G.jsx)(Sn.Z,{additionalStyles:w?Rn.legoWashOverlay:Rn.visualOverlay})}),(0,G.jsx)(Tn.Z,{visibility:i,children:(0,G.jsx)(Sn.Z,{additionalStyles:w?Rn.legoWashOverlay:Rn.savedOverlay})}),d&&(0,G.jsx)(Tn.Z,{visibility:c,children:(0,G.jsx)(Sn.Z,{children:d})}),s&&(0,G.jsx)(Tn.Z,{visibility:l,children:(0,G.jsx)(Sn.Z,{children:s})}),a&&(0,G.jsx)(Tn.Z,{visibility:r,children:(0,G.jsx)(Sn.Z,{children:a})}),v&&(0,G.jsx)(Tn.Z,{visibility:x,children:(0,G.jsx)(Sn.Z,{children:(0,G.jsx)(V.xu,{position:"absolute",left:!0,bottom:!0,marginBottom:12,marginStart:2,children:v})})}),u&&(0,G.jsx)(Tn.Z,{visibility:_,children:(0,G.jsx)(Sn.Z,{children:(0,G.jsx)(V.xu,{position:"absolute",left:!0,right:!0,bottom:!0,children:u})})}),p&&(0,G.jsx)(Sn.Z,{children:(0,G.jsx)(V.xu,{position:"absolute",bottom:!0,children:p})}),g&&(0,G.jsx)(Sn.Z,{children:g}),f]}),h]}),y&&(0,G.jsx)(V.xu,{children:y})]})})}function kn(e){return"active"===e?"visible":"inactive"===e?"none":"hidden"}function On(...e){return e.includes("visible")?"visible":e.includes("hidden")?"hidden":"none"}const Nn=(0,t.memo)((function({actionBarProps:e,blockClickEvents:i,borderStyle:n,currentlyPlayingVideo:o,disableHover:a=!1,footerProps:r,impressionsDebuggerProps:l,obscuredPinOverlayProps:d,onError:c,onLoad:u,pin:_,pinVisualProps:p,presentationProps:h,primaryContentProps:m,rounding:g,secondaryContentProps:f,authDesktopSelectionState:v,showFooter:x,showImpressionsDebugger:y,showObscuredPinOverlay:P,showSeeStatsButton:b,showSignalDebugger:w,showUnavailablePin:S,surface:T,visibilityOverrides:I,imageHeightModifier:A}){var C,R;const{savedInfo:j}=_,{viewType:k}=(0,K.E)(),{showEnabledSaveBehavior:O}=(0,Mi.Yh)(s.ZF.includes(T)||(0,N.Z)(T)),[D,z]=(0,t.useState)(!1),B=(0,Ii.Z)(D);let{isHovering:L,hoverTransitionState:Z,handleMouseOver:M,handleMouseLeave:F}=function(){const[e,i]=(0,t.useState)(!1);return{isHovering:e,hoverTransitionState:(0,Ii.Z)(e,0,Ii.X),handleMouseOver:(0,t.useCallback)((()=>i(!0)),[i]),handleMouseLeave:(0,t.useCallback)((()=>i(!1)),[i])}}();a&&(L=!1,Z="inactive");const H=(0,Ii.Z)(!!j),U=kn(H),W=kn(Z),$=kn(Z),X=kn(B),q=kn(H),J=["HomefeedMoreIdeasTabs","BoardMoreIdeasTabContent"].includes(T),Q="visible"!==U||J?U:"none",ee=(0,te.P)(),ie={primaryContentVisibility:null!==(C=I.primaryContent)&&void 0!==C?C:On($,X,"visible"===q?"none":q),secondaryContentVisibility:(ne=On($,X,q),"none"===ne?"visible":"visible"===ne?"none":"hidden"),actionBarVisibility:On($,X),accessoryContentVisibility:"none",signalDebuggerV2ContentVisibility:"visible"};var ne;const oe=e=>z(e),ae=e=>z(e),re=e=>{z(e),e||F()};let le=null;"none"!==ie.primaryContentVisibility&&(le=(0,G.jsx)(Wi,{forcePrimaryContent:oe,showEnabledSaveBehavior:O,onToggleFlyout:ae,onToggleModal:re,pin:_,...m}));let de=null;const ce=(0,t.useRef)(!0),ue=ce.current;ce.current=!1;const _e=function(e,i){const{carousel_data:n}=e,{index:o}=n||{},[a,r]=(0,t.useState)(!n||i),s=(0,t.useRef)(o),l=(0,t.useRef)(null);if(n){const e=s.current;s.current=o,(o!==e||i)&&(l.current&&clearTimeout(l.current),r(!0),l.current=setTimeout((()=>{r(!1),l.current=null}),4e3))}return(0,t.useEffect)((()=>()=>{l.current&&clearTimeout(l.current)}),[]),a}(_,ue),pe=kn((0,Ii.Z)(_e));ie.secondaryContentVisibility=null!==(R=I.secondaryContent)&&void 0!==R?R:function(...e){return e.includes("none")?"none":e.includes("hidden")?"hidden":"visible"}(ie.secondaryContentVisibility,pe),de=(f.allowShoppingPriceIndicator||f.shoppingLabelColor||"none"!==ie.secondaryContentVisibility)&&!o&&(0,G.jsx)(V.xu,{margin:2,children:(0,G.jsx)($i.Z,{pin:_,...f})});let he=null;"visible"===I.accessoryContent&&(he=(0,G.jsx)(Te,{pin:_}),ie.accessoryContentVisibility=kn(Z)),p.isSocialSeasonalBoard&&(e.showShareButton=!1);let me=null;b&&(e.showSourceLinkButton=!1,me=(0,G.jsx)(se.Z,{children:(0,G.jsx)(Y,{pinId:_.id,surface:T})}));const ge="visible"===I.actionBar?(0,G.jsx)(Pe,{onToggleFlyout:ae,pin:_,setForcePrimary:z,surface:T,...e}):null;let fe=null;(x&&!ee||(0,N.Z)(T))&&(fe=(0,G.jsx)(Bi,{blockClickEvents:i,hoverTransitionState:"image-only-credit"===r.attributionType?Z:null,pin:_,setForcePrimary:z,surface:T,...r})),p.isSocialSeasonalBoard&&(fe=(0,G.jsx)(V.xu,{"data-test-id":"social-seasonal-footer",marginTop:2,marginBottom:3,width:"100%",children:(0,G.jsx)(V.xu,{margin:"auto",width:xn.J,children:(0,G.jsx)(gn,{isFlyoutOpen:D,onFlyoutDismiss:()=>ae(!D),onToggleFlyout:()=>ae(!D),pinId:_.id,sendType:"pin",shownWithinMasonry:!0,viewType:k,element:72})})}));const ve=y&&(0,G.jsx)(bn,{...l}),xe=w&&_.debug_info_html&&(0,G.jsx)(V.xu,{paddingY:1,children:(0,G.jsx)("pre",{children:_.debug_info_html})}),ye=(0,G.jsx)(Ie.Z,{pin:_}),be=(0,t.useRef)();"header-only"===vn(be)&&(ie.actionBarVisibility="none",ie.accessoryContentVisibility="none");const we=P?(0,G.jsx)(wn.ZP,{pin:_,...d}):null,Se="ShoppingGridShippedMetadataWithVisitButton"===T?{height:"100%"}:{},Ee=x&&"default"===r.attributionType&&s.ZF.includes(T),Ae=!_.is_promoted&&!a&&Ee;return(0,G.jsx)(E.Z,{name:"PinRepContainer",children:(0,G.jsx)(V.xu,{"data-test-id":"pin","data-test-pin-id":_.id,onFocus:M,onBlur:F,onMouseEnter:M,onMouseLeave:F,dangerouslySetInlineStyle:{__style:Se},rounding:"ConversationView"===T?g:void 0,borderStyle:"ConversationView"===T?n:"none",overflow:"ConversationView"===T?"hidden":"visible",children:(0,G.jsx)(jn,{visualOverlayVisibility:W,savedOverlayVisibility:Q,handleMouseOverPinContent:Ae?M:()=>{},handleMouseLeavePinContent:Ae?F:()=>{},primaryContent:le,primaryContentVisibility:ie.primaryContentVisibility,secondaryContent:de,secondaryContentVisibility:ie.secondaryContentVisibility,accessoryContent:he,accessoryContentVisibility:ie.accessoryContentVisibility,actionBar:ge,actionBarVisibility:ie.actionBarVisibility,seeStatsButton:me,footer:fe,selectionState:v,debugContent:ve,signalDebuggerV2Content:ye,signalDebuggerV2ContentVisibility:ie.signalDebuggerV2ContentVisibility,signalDebuggerContent:xe,obscuredPinOverlay:we,...h,children:(0,G.jsx)(V.xu,{height:"100%",ref:be,children:(0,G.jsx)(pn,{blockClickEvents:i,showUnavailablePin:S,isHovering:L,onError:c,onLoad:u,pin:_,surface:T,selectionState:v,imageHeightModifier:A,...p})})})})})}));var Dn=n(231947),zn=n(53987);const Bn=(0,t.lazy)((()=>Promise.all([n.e(97270),n.e(3215),n.e(89734),n.e(67228),n.e(92982)]).then(n.bind(n,576070)))),Ln=["ArticleProductsStory","BoardCoverSelectablePin","BoardNoteSelectablePin","BulkEditMode","CommentReply","EngagementDetails","IdeasHubSeasonalRow","OtherProfilePinGrid","SectionSuggestedPins","SelectableBoardlessPin","TopicBestPinNarrow","TopicBestPinWide"],Zn=["BaseBoardPinGrid","UserProfilePinGrid",...H];function Mn({attributionOption:e,blockClickEvents:i,debugImpressionState:n,disableReaction:u,feedback:_,imageOnlyOption:p="default",pin:h,pinId:g,pinImageCrop:V,pinImageFit:F,resolution:H="default",saveButtonOptions:U,authDesktopSurface:W,trackingParameters:$,...Y}){var se,le,de,ce,ue,_e,pe,me;const ge=(0,ne.S6)()(g)||h,fe=null!==(se=null===(le=ge.board)||void 0===le?void 0:le.id)&&void 0!==se?se:"",ve=(0,ie.gC)()(fe)||ge.board;ge.grid_title=ge.grid_title||h.grid_title;const xe=(0,B.ZP)(),ye=(0,Q.F)(),{checkExperiment:Pe}=ye,{collaborated_by_me:be,collaborator_count:we,is_collaborative:Se}=ve||{},{is_quick_promotable:Te,pinner:Ie,showFeedback:Ee,sponsorship:Ae}=ge,{isPromoted:Ce}=(0,r.Z)(ge),Re=(0,k.Z)(ge),je=(0,M.Z)(),ke=(0,L.Z)(),{anyEnabled:Oe}=Pe("web_m10n_business_access_orbac_www"),{anyEnabled:Ne}=Pe("web_m10n_business_access_orbac_ga"),De=Ne?(0,Dn.lJ)(je,ke):"",ze=(0,he.useLocation)(),{slotIndex:Be,viewParameter:Le}=$,Ze=["AuthHomefeed","BaseBoardPinGrid"].includes(W)&&Pe("web_repin_flow").anyEnabled,Me=(0,ae.x)(),Ve=(0,te.P)(),{appUI:{videosAutoplaying:Fe}}=(0,J.I)(),Ge=(0,D.Z)(ge.id,Fe),He=(0,o.useSelector)((({changeBoardFromToast:e})=>e))||{},Ue=function(e){const i=e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products[0]&&e.rich_metadata.products[0].additional_images;return!!(i&&i.length>0)}(ge),We=(0,R.Z)(ge),$e=je.isAuth&&je.isEmployee,Ye=je.isAuth&&((0,j.Z)(je.createdAt)||(0,O.Z)(null,je))&&!je.isPartner;let Xe=Ye;"TodayArticleFeed"===W&&(Xe=!1),"default"!==p&&(Xe="image-only"===p),(0,N.Z)(W)&&(Xe=!1),"ShoppingSquareGridDomainNoMetadata"===W&&(Xe=!0);let qe=e;(Ye&&!qe||Ve)&&(qe="image-only");const Ke=(0,C.Z)({feedbackOptions:_,pin:ge,viewParameter:Le},xe),{data:Je}=_||{},Qe="number"==typeof we&&we>0||Se;let ei=!1;"OtherProfilePinGrid"===W?ei=!0:"BaseBoardPinGrid"===W?ei="dense"===(null==Me?void 0:Me.boardPinDensity):"UserProfilePinGrid"===W&&(ei="dense"===(null==Me?void 0:Me.profilePinDensity));const ii=Boolean(Qe&&"BaseBoardPinGrid"===W),ni=(0,Z.Z)(),ti=(0,re.kW)(),oi=ti&&ti[null!==(de=null===(ce=ni.data)||void 0===ce?void 0:ce.id)&&void 0!==de?de:""]?ti[null!==(ue=null===(_e=ni.data)||void 0===_e?void 0:_e.id)&&void 0!==ue?ue:""]:ni.data,ai=(0,I.Z)(je,ve);let ri=!1;if(!!(0,he.matchPath)(ze.pathname,{path:"/:username/_created/",exact:!0}))ri=(0,Dn.q6)(je,null==oi?void 0:oi.id,ke);else if((0,zn.am)(ze)||(0,zn.OJ)(ze)){const e=ve&&ve.owner&&ve.owner.id||"";ri=(0,Dn.q6)(je,e,ke)}const si=Boolean(je.isAuth&&Ie&&Ie.id===je.id),li=Boolean(be||Qe&&ai),di=je.isAuth&&je.isPartner,ci=!(null===(pe=ge.story_pin_data)||void 0===pe||!pe.is_deleted)&&Pe("web_deleted_idea_pins").anyEnabled,ui=(0,t.useMemo)((()=>function({hasCarouselData:e,isDeletedStoryPin:i,surface:n}){const t={primaryContent:null,secondaryContent:null,actionBar:T.includes(n)||i?"none":"visible",accessoryContent:e?"visible":"none"};return i||S.includes(n)?(t.primaryContent="none",t.secondaryContent="none"):["HomefeedMoreIdeasTabs","BoardMoreIdeasTabContent"].includes(n)&&(t.primaryContent="visible"),t}({hasCarouselData:We,isDeletedStoryPin:ci,surface:W})),[We,ci,W]),_i=(0,t.useMemo)((()=>function({board:e,isDenseView:i,isGroupBoard:n,isInlineBetterSave:t,isOwnBoard:o,isORBACProfileManager:a,isQuickPromotable:r,isRemovable:l,saveButtonOptions:d,surface:c,viewer:u,viewerIsCollaborator:_}){const p=u.isAuth?u.boardCount:void 0;let h=d||function(e=0){return 0===e?{type:"classic"}:{type:"inline"}}(p);r?h={type:"promote"}:(_||o||["OtherProfilePinGrid","UserProfilePinGrid"].includes(c))&&!["BoardlessPins","CreatorProfileActivityPinGrid","CreatorProfileStoryPinGrid","BaseBoardPinGrid"].includes(c)?h={type:"classic"}:(_||o)&&["BaseBoardPinGrid"].includes(c)&&null!=e&&e.name&&e.url&&e.id&&(h={type:"inline",initialSelection:{title:e.name,boardId:e.id,url:e.url}});return t&&(h={type:"inline",hidePinBetterSaveDropdown:"BaseBoardPinGrid"===c}),(l||w.includes(c)||a)&&(h={type:"none"}),{board:e,derivedSaveButtonOptions:h,showLikeButton:_&&n&&s.UP.includes(c),supportsReactionBar:!i}}({board:ve,isInlineBetterSave:Ze,isDenseView:ei,isGroupBoard:ii,isOwnBoard:ai,isOwnPin:si,isORBACProfileManager:ri,isQuickPromotable:Te,isRemovable:Re,saveButtonOptions:U,surface:W,viewer:je,viewerIsCollaborator:li})),[ve,Ze,ei,ii,ai,si,ri,Te,Re,U,W,je,li]),{anyEnabled:pi}=Pe("web_shopping_grid_metadata_ratings_shipping",{dangerouslySkipActivation:!0});let hi;["ShoppingDynamicHeightGrid","ShoppingGridShippedMetadata","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingGridShippedMetadataWithVisitButton"].includes(W)&&!Ce&&(hi="white");const mi=(0,t.useMemo)((()=>function({allowProductCarousel:e=!1,shoppingLabelColor:i,surface:n}){return{allowProductCarousel:e,allowShoppingPriceIndicator:s.Wv.includes(n),shoppingLabelColor:i}}({allowProductCarousel:Ue,shoppingLabelColor:hi,surface:W})),[Ue,hi,W]),gi=(0,t.useMemo)((()=>function({board:e,feedbackData:i,feedbackType:n,isDenseView:t,isGroupBoard:o,isOwnBoard:s,isORBACProfileManager:u,isORBACBeta:_,isORBACGA:p,pin:h,surface:m,viewer:g}){var f;const{isOwnPin:v,isPromoted:x}=(0,r.Z)(h),y=l({isGroupBoard:o,pin:h,surface:m}),P=e&&(0,a.Z)({action:4,board:e,viewer:g})||v,b=h.savedInfo&&h.savedInfo.localPinId,w=Boolean(s&&!o||"UserProfilePinGrid"===m&&P||b),S=Boolean(o&&P||w||u&&(!(0,d.hy)(h.story_pin_data_id)||_)),T=Boolean((null==e?void 0:e.is_collaborative)||w),I=!(x||s||o||c.includes(m)||u),E=!("CloseupRelatedProducts"===m||u&&!p),{tracked_link:A,link:C}=h,R=!(null===(f=null!=A?A:C)||void 0===f||!f);let j=o&&t?"equally-spaced":"default",k="default";return t&&(k=o?"icon-only":"truncated-text"),t&&["UserProfilePinGrid","BaseBoardPinGrid","BoardlessPins"].includes(m)&&(k="icon-only",j="equally-spaced"),{actionBarEditBeforeShare:T,feedbackData:i,feedbackType:n,layout:j,pinTitle:y,showEditButton:S,showOverflowMenu:I,showShareButton:E,showSourceLinkButton:R,sourceLinkStyle:k}}({board:ve,feedbackData:Je,feedbackType:Ke,isDenseView:ei,isGroupBoard:ii,isOwnBoard:ai,isORBACProfileManager:ri,isORBACBeta:Oe,isORBACGA:Ne,pin:ge,surface:W,viewer:je})),[ve,Je,Ke,ei,ii,ai,ri,Oe,Ne,ge,W,je]),fi=(0,m.rh)(ge,je,ye,De)&&Zn.includes(W)&&(si||Ne&&ri),vi=["ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingGridShippedMetadata","ShoppingGridShippedMetadataWithVisitButton","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain"].includes(W),xi=!Ce&&vi?"shopping":"standard";let yi=(u||"CreatorProfileStoryPinGrid"!==W||si)&&(0,X.J6)(ge,ci);const Pi=(0,oe.Xx)();yi=!Ve&&yi;const bi=(0,t.useMemo)((()=>f({attributionOption:qe,board:ve,contentType:xi,experimentsClient:ye,feedbackData:Je,feedbackType:Ke,hasCarouselData:We,isGroupBoard:ii,isORBACProfileManager:ri,isOwnBoard:ai,pin:ge,showImageOnly:Xe,showNativeReactions:yi,showPromotedShoppingPrice:pi&&Ce&&vi,surface:W,viewer:je,variantData:Pi})),[qe,ve,xi,ye,Je,Ke,We,ii,ri,ai,Ce,vi,ge,pi,Xe,yi,W,je,Pi]),wi=!!ge.story_pin_data_id,Si=ge.created_at?new Date(ge.created_at):null,Ti=(0,ee.pN)({isOwnPin:si,isStoryPin:wi,pinCreationDate:Si,surface:W});let Ii=Boolean(bi.pinTitle||bi.contentType||bi.userNote||bi.showSource||"none"!==bi.attributionType||bi.showNativeReactions||bi.productCurrentPrice||bi.productOriginalPrice||bi.showPinStats)||ii;"BaseBoardPinGrid"===W&&ai&&di||Ae?Ii=!0:Ln.includes(W)||ei&&(ai||be)?Ii=!1:si||"CreatorProfileStoryPinGrid"!==W&&"CreatorProfileActivityPinGrid"!==W||(Ii=!1);const Ei=Boolean(Ee),Ai={showNoPinBorderRadius:"TopicBestPinNarrow"===W||"TopicBestPinWide"===W||"ConversationView"===W,showPromotedPinBorderTreatment:"BaseBoardPinGrid"===W&&Ce,shouldUseLegoWash:!0},{anyEnabled:Ci}=Pe("hfp_homefeed_control_cta_variants"),Ri={feedbackType:Ke,isHomefeedTunerVariantExp:Ci},{anyEnabled:ji}=Pe("ads_desktop_video_ads",{dangerouslySkipActivation:!0}),ki=(0,t.useMemo)((()=>function({hasCarouselData:e,isDenseView:i,isSocialSeasonalBoard:n,pinImageCrop:t,pinImageFit:o,resolution:a,showPromotedVideos:r,surface:l}){const d=s.zl.includes(l);let c="backend";"CloseupRelatedProducts"===l?c={height:b.GZ,width:b.OE}:"TopicBestPinWide"===l?c={height:P.m9,width:P.BS}:"TopicBestPinNarrow"===l?c={height:P._5,width:P.A6}:["ArticleProductsStory","ShoppingSquareGridCrop","ShoppingSquareGridDomainNoMetadata"].includes(l)||d?c={height:b.zX,width:b.zX}:t&&(c=t);let u="none",_=null!=a?a:"default";"string"!=typeof c&&(u="cover",(d||"ShoppingDynamicHeightGrid"===l&&!o||"ShoppingSquareGridDomainNoMetadata"===l)&&(u="contain",_="high-res"));const p=d||["ShoppingSquareGridDomainNoMetadata","ShoppingDynamicHeightGrid"].includes(l)?"transparent":"dominant",h=(0,x.e)(l);return{autoplaySettingOff:"undefined"!=typeof window&&0===y.Xb.getItem(v.Z.VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY),fallbackColor:p,imageFit:u,isDenseView:i,isSocialSeasonalBoard:n,resolution:_,rootMargin:h,pinImageCrop:c,showCarousel:e&&!["ShoppingSquareGridStorefrontDomain","ShoppingSquareGridStorefront"].includes(l),showPromotedVideos:r}}({hasCarouselData:We,isDenseView:ei,isPromoted:Ce,isSocialSeasonalBoard:!1,pinImageCrop:V,pinImageFit:F,resolution:H,showPromotedVideos:ji,surface:W})),[We,ei,Ce,V,F,H,ji,W]),Oi=$e&&void 0!==(0,yn.Z)().debug_impression_log,Ni=(0,t.useMemo)((()=>({debugImpressionState:n,slotIndex:Be})),[n,Be]),Di=(0,t.useMemo)((()=>({surface:W})),[W]);return(0,G.jsx)(E.Z,{name:"PinRepConfiguration",children:(0,G.jsx)(K.B,{value:$,children:(0,G.jsxs)(q.B,{value:Di,children:[(0,G.jsx)(Nn,{actionBarProps:gi,blockClickEvents:i,currentlyPlayingVideo:Ge,footerProps:bi,impressionsDebuggerProps:Ni,obscuredPinOverlayProps:Ri,pin:ge,pinVisualProps:ki,presentationProps:Ai,primaryContentProps:_i,secondaryContentProps:mi,showFooter:Ii||Ti,showImpressionsDebugger:Oi,showObscuredPinOverlay:Ei,showSeeStatsButton:fi,showSignalDebugger:$e,showUnavailablePin:ci,surface:W,visibilityOverrides:ui,...A(Y,["pinId"])}),He.shouldOpenModal&&He.newPin&&(null===(me=He.originalPin)||void 0===me?void 0:me.id)===ge.id&&(0,G.jsx)(E.Z,{name:"SafeSuspense_PinRepConfiguration_ChangeBoardModal",children:(0,G.jsx)(z.Z,{children:(0,G.jsx)(Bn,{experience:He.experience,newPin:He.newPin})})})]})})})}},301921:(e,i,n)=>{n.r(i),n.d(i,{default:()=>x});var t=n(667294),o=n(564194),a=n(768559),r=n(868565),s=n(905723),l=n(304515),d=n(883119),c=n(785893);const u={overlay:{__style:{backgroundColor:"#000"}}};function _(e){var i,n,o,a;const{pin:{id:r,images:_,title:p,videos:h,video_status_message:m}}=e,g=m||{},f=_&&_["236x"],v=h&&(null===(i=h.video_list)||void 0===i?void 0:i[s.Z.V_HLSV4]),{duration:x}=v||{};return(0,c.jsx)(t.Fragment,{children:(0,c.jsx)(d.Zb,{children:(0,c.jsxs)(d.iP,{role:"link",href:`/pin/${r}`,rounding:2,children:[(0,c.jsxs)(d.xu,{overflow:"hidden",position:"relative",rounding:2,children:[f&&(0,c.jsx)(d.Ee,{alt:p||"",color:"lightGray",naturalHeight:null!==(n=f.height)&&void 0!==n?n:1,naturalWidth:null!==(o=f.width)&&void 0!==o?o:1,src:null!==(a=f.url)&&void 0!==a?a:""}),!!x&&(0,c.jsx)(d.xu,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:(0,c.jsx)(l.Z,{duration:x})}),(0,c.jsx)(d.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:u.overlay}),(0,c.jsxs)(d.xu,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[(0,c.jsx)(d.X6,{color:"light",overflow:"normal",size:"400",children:g.title}),(0,c.jsx)(d.xu,{marginTop:4,children:(0,c.jsx)(d.xv,{color:"light",size:"200",overflow:"normal",children:g.subtitle})})]})]}),(0,c.jsx)(d.xu,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:(0,c.jsx)(d.xu,{flex:"grow",children:p&&(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsx)(d.xv,{inline:!0,size:"200",weight:"bold",children:p})})})})]})})})}var p=n(623568),h=n(802201),m=n(276775),g=n(813401),f=n(597017),v=n(35495);function x({trackingParams:e,objectIdStr:i,impressionData:n,auxData:s,componentType:l,slotIndex:d,viewData:u,viewParameter:x,viewType:y,pin:P,pinId:b,...w}){var S,T,I,E,A,C;const R=(0,m.useLocation)(),j=(0,h.S6)(),k=(b?j(b):null)||P,O=!(null===(S=k.story_pin_data)||void 0===S||!S.is_deleted),N=e||(0,a.Z)({boardUrl:null===(T=k.board)||void 0===T?void 0:T.url,callToCreateSourcePinId:k.call_to_create_source_pin_id,location:R,pinId:k.id,pinnerUserName:null===(I=k.pinner)||void 0===I?void 0:I.username,storyPinDataId:k.story_pin_data_id,trackingParams:k.tracking_params,trackingParamsMap:k.tracking_params_map}),D=(0,r.Z)(k),z=!!(D&&D.url&&D.height&&D.width)||void 0,B=D&&k.videos?k.videos.id:void 0,[L,Z]=(0,t.useState)(!1),M=(0,t.useCallback)((()=>Z(!O)),[O]),V=(0,t.useCallback)((()=>Z(!1)),[]),F=(0,g.yz)();return(0,c.jsx)(o.Z,{componentType:l,contextLogData:{pwa_type:F,...s,...(0,v.Kl)(k,s)},impressionAuxFields:{...n||{},isNativeVideoAndWatchable:z,videoIdStr:B,clientTrackingParams:N||`${k.tracking_params||""}-0`,imageURL:null!==(E=null===(A=k.images)||void 0===A||null===(C=A["236x"])||void 0===C?void 0:C.url)&&void 0!==E?E:"",richTypes:(0,v.GT)(k)},impressionType:"Pin",isPaused:!L,loggingId:k.id,slotIndex:d,objectIdStr:i,viewData:u,viewParameter:x,viewType:y,children:(0,p._J)(k)?(0,c.jsx)(_,{pin:k}):(0,c.jsx)(f.Z,{...w,debugImpressionState:L?"started":"paused",onError:V,onLoad:M,pin:k,pinId:b,trackingParameters:{componentType:l,contextLogData:s,slotIndex:d,viewParameter:x,viewType:y}})})}},243943:(e,i,n)=>{n.d(i,{Xx:()=>h,wA:()=>u,wH:()=>p});var t=n(667294),o=n(752802),a=n(835209),r=n(407043),s=n(789707),l=n(533655),d=n(785893);const c=(0,t.createContext)(undefined),u=e=>{const{variant_set:i}=(0,a.Z)({richPinData:e.rich_metadata})||{},{dimension_metadata:n,variants:t}=i||{};if(!n||!t)return!1;const o=n.find((e=>{var i;return"color"===(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())}));return!!(o&&o.name&&o.values&&1!==o.values.length)},_=({pinId:e,children:i,dimensionMetadata:n,primaryDimName:a,variants:u,primaryDimensionThumbnailImages:_})=>{const p=(0,t.useCallback)((({selectedMap:e})=>{const i=(0,l.B)({dimensionMetadata:n,primaryDimName:a,primaryDimensionThumbnailImages:_,defaultStatus:"invalid"});return(0,l.U0)({variantMap:i,selectedMap:e,variants:u}),i}),[n,a,_,u]),{logContextEvent:h}=(0,r.v)(),m=u.find((e=>e.is_preselected)),g=(0,s.a)(),{pinsState:f,setPinState:v}=g||{},x=f&&f[e],y=x?x.selectedMap:(0,l.O5)(u),P=x?x.selectedVariants:(0,l.x1)({selectedMap:y,variants:u}),b=x?x.variantMap:p({selectedMap:y}),w=!!x&&x.isSelectedByUser,S=x?x.variantUrl:(null==m?void 0:m.pin_id)||e,T=(0,t.useCallback)(((i,n=!1)=>{const t=(0,l.x1)({selectedMap:i,variants:u}),o={selectedMap:i,selectedVariants:t,variantMap:p({selectedMap:i}),isSelectedByUser:n,variantUrl:""},a=t[0].pin_id;a&&(o.variantUrl=a),v&&v(e,o)}),[p,e,v,u]),I=(0,t.useCallback)((()=>{const e=(0,l.O5)(u);T(e)}),[T,u]),E=(0,t.useCallback)((({dimensionName:e,variant:i,isAutoSelection:n=!1})=>{var t;const o=null===(t=b[e])||void 0===t?void 0:t.find((({value:e})=>e===i));try{if(!o)throw new Error(`Unable to find the selected variant ${e}: ${i}`);if(y[e]===i)return;const t={..."invalid"!==o.status?y:{},[e]:i},a=(0,l.i8)({variantMap:b,status:"invalid"});(0,l.U0)({variantMap:a,selectedMap:t,variants:u}),T(t,!n),h({event_type:10240,component:14092})}catch(a){throw I(),a}}),[b,y,u,T,I,h]),{title:A}=P[0],C=(0,o.Z)({images:(P[0].additional_images||[])[0].canonical_images}),R=(0,l.$b)(P),j=(0,t.useMemo)((()=>{const e=((null==m?void 0:m.dimensions)||{})[a],i=b[a]||[];let t=i;if(e&&i){const n=i.find((i=>i.value===e));n&&(t=[n,...i.filter((i=>i.value!==e))])}return{dimensionMetadata:n,offerSummary:R,primaryVariants:t,primaryDimName:a,selectedMap:y,isSelectedByUser:w,selectVariant:E,title:A,variants:u,image:C,variantUrl:S}}),[m,a,b,n,R,y,w,E,A,u,C,S]);return(0,d.jsx)(c.Provider,{"data-test-id":"safe-product-pins-feed-context-provider",value:j,children:i})},p=({children:e,pin:i,isEligible:n})=>{if(!n)return(0,d.jsx)(c.Provider,{"data-test-id":"undefined-context-provider",value:void 0,children:e});const{variant_set:t}=(0,a.Z)({richPinData:i.rich_metadata})||{},{dimension_metadata:o,primary_dimension_thumbnail_images:r,variants:s}=t||{},l=null==o?void 0:o.find((e=>{var i;return"color"===(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())}));return(0,d.jsx)(_,{pinId:i.id,dimensionMetadata:o||[],primaryDimName:(null==l?void 0:l.name)||"",primaryDimensionThumbnailImages:r,variants:s||[],children:e})},h=()=>(0,t.useContext)(c)},789707:(e,i,n)=>{n.d(i,{A:()=>r,a:()=>s});var t=n(667294),o=n(785893);const a=(0,t.createContext)(void 0),r=({children:e})=>{const[i,n]=(0,t.useState)({}),r=(0,t.useMemo)((()=>({setPinState:(e,t)=>{n({...i,[e]:{...i[e]||{},...t}})},pinsState:i})),[i]);return(0,o.jsx)(a.Provider,{value:r,children:e})},s=()=>(0,t.useContext)(a)},104389:(e,i,n)=>{n.d(i,{Z:()=>c});var t=n(854035),o=n(869503),a=n(67828),r=n(883119),s=n(785893);const l=({count:e,countFormat:i,ratingValue:n,shippingInfo:l})=>(0,s.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,s.jsx)(t.Z,{count:e,countFormat:i,rating:n,textSize:"200"}),(0,s.jsx)(r.xu,{marginTop:(0,a.Z)({count:e,rating:n})?1:0,children:(0,s.jsx)(o.Z,{customStyles:{color:"subtle",size:"200"},freeShippingPrice:null==l?void 0:l.free_shipping_price,freeShippingValue:null==l?void 0:l.free_shipping_value})})]}),d=({count:e,countType:i,countFormat:n,ratingValue:l,shippingInfo:d})=>(0,s.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{rowGap:8}},display:"flex",marginTop:1,wrap:!0,children:[(0,s.jsx)(t.Z,{count:e,countFormat:n,countType:i,rating:l,textSize:"300"}),(0,s.jsx)(o.Z,{customStyles:{color:"default",size:"300"},showPrevDot:(0,a.Z)({count:e,rating:l}),freeShippingPrice:null==d?void 0:d.free_shipping_price,freeShippingValue:null==d?void 0:d.free_shipping_value})]});function c(e){return e.isGridView?(0,s.jsx)(l,{...e}):(0,s.jsx)(d,{...e})}},533655:(e,i,n)=>{n.d(i,{$b:()=>l,A6:()=>c,B:()=>o,O5:()=>u,U0:()=>s,i8:()=>a,x1:()=>_,xD:()=>d});var t=n(752802);const o=({defaultStatus:e="available",dimensionMetadata:i,primaryDimName:n,primaryDimensionThumbnailImages:o})=>{const a={};for(const{values:t,name:r}of i)r&&t&&(a[r]=t.map((i=>({status:e,value:i}))));return(a[n]||[]).forEach(((e,i)=>{const n=o&&o[i.toString()];n&&(e.image=(0,t.Z)({images:n.canonical_images}))})),a},a=({status:e,variantMap:i})=>{const n={};for(const o in i){var t;n[o]=null===(t=i[o])||void 0===t?void 0:t.map((i=>({...i,status:e})))}return n},r=({dimensionName:e,variants:i,selectedTuple:n,variantStatuses:t})=>{const o=n.filter((([i])=>i!==e));for(const{dimensions:a={},offer_summary:r={}}of i){if(!o.every((([e,i])=>a[e]===i)))continue;const i=t.find((({value:i})=>i===a[e]));i&&(i.status=r.in_stock||"available"===i.status?"available":"outOfStock")}},s=({variants:e,selectedMap:i={},variantMap:n})=>{const t=Object.entries(i);for(const o in n){const i=n[o];i&&r({dimensionName:o,variants:e,selectedTuple:t,variantStatuses:i})}},l=e=>{let i,n,t,o,a=!1;const{percentage_off:r,standard_price:s}=1===e.length&&e[0].offer_summary||{};for(const l of e){const{max_price:e,max_price_val:r,min_price:s,min_price_val:d,price:c,price_val:u,price_in_micro_currency:_,in_stock:p}=l.offer_summary||{},h=u||Number(_);Number.isFinite(d)&&Number.isFinite(r)&&((void 0===n||d<n)&&(n=d,i=s),(void 0===o||r>o)&&(o=r,t=e),a=a||!!p),Number.isFinite(h)&&((null==n||h<n)&&(n=h,i=c),(null==o||h>o)&&(o=h,t=c),a=a||!!p)}if(t&&i)return i===t?{in_stock:a,percentage_off:r,price:i,standard_price:s}:{in_stock:a,max_price:t,min_price:i,percentage_off:r,price:i,standard_price:s}},d=(e,i)=>e.length===i.length&&e.every(((e,n)=>{var o,a;return(null===(o=(0,t.Z)({images:e.canonical_images}))||void 0===o?void 0:o.url)===(null===(a=(0,t.Z)({images:i[n].canonical_images}))||void 0===a?void 0:a.url)})),c=e=>{const i=new Set;return e.filter((e=>{const{url:n}=(0,t.Z)({images:e.canonical_images})||{};return!!n&&(!i.has(n)&&(i.add(n),!0))}))||[]},u=e=>{var i;const n={...(null===(i=e.find((e=>!!e.is_preselected)))||void 0===i?void 0:i.dimensions)||{}};for(const t in n)n[t]||delete n[t];return n},_=({selectedMap:e,variants:i})=>i.filter((({dimensions:i={}})=>{for(const n in e){const t=e[n];if(i[n]!==t)return!1}return!0}))},807592:(e,i,n)=>{function t(e){const{max_price:i,min_price:n,price:t}=e;return i&&n?`${n}-${i}`:t}n.d(i,{Z:()=>t})},841478:(e,i,n)=>{n.d(i,{A6:()=>l,BS:()=>r,EC:()=>o,_5:()=>s,m9:()=>a,z9:()=>t});const t=800,o=508,a=424,r=278,s=640,l=508},35495:(e,i,n)=>{n.d(i,{GT:()=>p,Gy:()=>r,Kl:()=>g,QY:()=>_,RR:()=>l,SP:()=>c,Sn:()=>m,Zs:()=>h,bA:()=>u,i8:()=>s,nn:()=>a,qN:()=>d});var t=n(834911),o=n(229428);const a=e=>!!e&&(e.shopping_flags||[]).includes(2),r=e=>{var i,n;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null!==(i=null===(n=e.rich_metadata)||void 0===n?void 0:n.products)&&void 0!==i?i:[]).length>0},s=e=>{var i;return null===(i=e.aggregated_pin_data)||void 0===i?void 0:i.is_shop_the_look},l=e=>{var i,n;return null===(i=e.rich_summary)||void 0===i||null===(n=i.aggregate_rating)||void 0===n?void 0:n.rating_value},d=e=>e.is_oos_product,c=e=>e.is_stale_product,u=e=>d(e)||c(e),_=e=>{var i,n,t,o;const a=null==e||null===(i=e.link_domain)||void 0===i||null===(n=i.official_user)||void 0===n?void 0:n.full_name;if(a)return a;const r=null==e||null===(t=e.rich_summary)||void 0===t?void 0:t.site_name;if(r)return r;if(e.domain){if("Uploaded by user"===e.domain){return((e.is_repin?e.origin_pinner:e.pinner)||{}).full_name}return e.domain}const s=null==e||null===(o=e.via_pinner)||void 0===o?void 0:o.full_name;return e.is_repin&&s?s:void 0},p=e=>{if(e){const i=e.shopping_flags||[];return!i.includes(10)&&e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images&&i.push(10),i}return[]};function h(e,i={}){var n,a,r,s,l,d;const c=p(e),u={...i.commerce_data};c.includes(2)&&(u.pin_is_shop_the_look=!0),c.includes(1)&&(u.is_available=!0),c.includes(5)&&(u.is_product_pin_v2=!0),c.includes(6)&&(u.is_rich_product_pin=!0),c.includes(10)&&(u.is_organic_product_carousel=!0);if((!!e.visual_objects&&(0,o.k)(e.visual_objects)||[]).some((e=>!0===e.is_stela))&&(u.pin_is_stela=!0),e.is_eligible_for_pdp||e.is_ooo_product||e.is_stale_product){e.is_oos_product?u.pin_show_pdp_oos=!0:e.is_stale_product?u.pin_show_pdp_stale=!0:u.pin_show_pdp=!0;const i=(0,t.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:null==e?void 0:e.rich_metadata,richSummary:null==e?void 0:e.rich_summary});var _;if(i)u.image_count=null===(_=i.carousel_slots)||void 0===_?void 0:_.length,u.image_index=i.index}null!=e&&null!==(n=e.rich_summary)&&void 0!==n&&null!==(a=n.products)&&void 0!==a&&null!==(r=a[0])&&void 0!==r&&r.item_id&&(u.item_id=e.rich_summary.products[0].item_id),null!=e&&null!==(s=e.rich_summary)&&void 0!==s&&null!==(l=s.products)&&void 0!==l&&null!==(d=l[0])&&void 0!==d&&d.item_set_id&&(u.item_set_id=e.rich_summary.products[0].item_set_id);const h=e.aggregated_pin_data||{};return null!=h&&h.is_shop_the_look&&(u.pin_is_shop_the_look=!0),e.story_pin_data&&(u.story_pin_id=e.story_pin_data.id),u}function m(e){const i=JSON.stringify(e);return"{}"!==i?{commerce_data:i}:null}const g=(e,i={})=>{if(e){return m(h(e,i))}return null}},699825:(e,i,n)=>{n.d(i,{Z:()=>_});var t=n(667294),o=n(802933),a=n(102500),r=n(692627),s=n(47170),l=n(35495),d=n(623568),c=n(407043),u=n(785893);function _({children:e,hovered:i,pin:n,slotIndex:_,trafficSource:p,viewType:h}){const{logContextEvent:m}=(0,c.v)(),[g,f]=(0,t.useState)(),[v,x]=(0,t.useState)(),{id:y,tracked_link:P,link:b}=n,w=P||b||"",S=()=>{f(!0)},T=(0,s.Z)(n),I=(0,r.Z)((0,o.Z)({pin:n})),E=(0,t.useCallback)((()=>{((e,i,n)=>{const t={check_only:n,pin_id:e.id,url:i,client_tracking_params:T,aux_data:JSON.stringify({clickthrough_type:"rightClick",objectId:y,..._||{},...(0,l.Kl)(e)||{}})};return(0,a.Z)(t)})(n,w,!1).callGet({showError:!1}).then((e=>{e&&(m({event_type:12,object_id_str:y,view_type:h,view_parameter:I,aux_data:{clickthrough_type:"rightClick",..._||{},...(0,l.Kl)(n)||{}}}),m({event_type:8948,view_type:h,object_id_str:y,view_parameter:I,aux_data:{click_type:"clickthrough",closeup_navigation_type:p&&(0,d.sV)(p)?"deeplink":"click",clickthrough_type:"rightClick",..._||{},...(0,l.Kl)(n)||{}}}))}))})),A=e=>{var i;g&&(/^\/pin/.test(null===(i=e.target.activeElement.attributes.href)||void 0===i?void 0:i.value)||(E(),f(!1)),window.removeEventListener(v,A,!1))};return(0,t.useEffect)((()=>{var e,i,n,t,o,a;void 0!==(null===(e=window)||void 0===e||null===(i=e.document)||void 0===i?void 0:i.hidden)?x("visibilitychange"):void 0!==(null===(n=window)||void 0===n||null===(t=n.document)||void 0===t?void 0:t.msHidden)?x("msvisibilitychange"):void 0!==(null===(o=window)||void 0===o||null===(a=o.document)||void 0===a?void 0:a.webkitHidden)&&x("webkitvisibilitychange")}),[]),(0,t.useEffect)((()=>(g&&window&&window.addEventListener(v,A,!1),()=>window.removeEventListener(v,A))),[g,v]),(0,t.useEffect)((()=>(i&&window.addEventListener("contextmenu",S),()=>{window.removeEventListener("contextmenu",S)})),[i]),(0,u.jsx)(t.Fragment,{children:e})}},241244:(e,i,n)=>{n.d(i,{N:()=>r,Z:()=>a});var t=n(883119),o=n(785893);function a({children:e,fullWidth:i}){return(0,o.jsx)(t.xu,{"data-test-id":"pointer-events-wrapper",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:i?"100%":void 0}},children:e})}function r({children:e,enabled:i}){return i?(0,o.jsx)(a,{children:e}):e}},310227:(e,i,n)=>{n.d(i,{Dv:()=>a,Ml:()=>r,Oc:()=>t,mv:()=>o});const t=16,o=4,a={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},41233:(e,i,n)=>{n.d(i,{Z:()=>a});var t=n(221263),o=n(937330);function a({action:e,board:i,viewer:n}){var a;return(0,t.Z)(n,i)||(0,o.Z)({board:i,viewer:n})&&!(null===(a=i.collaborator_permissions)||void 0===a||!a.includes(e))}},221263:(e,i,n)=>{function t(e,i){const n=i&&i.owner&&i.owner.id;return e.isAuth&&n===e.id}n.d(i,{Z:()=>t})},937330:(e,i,n)=>{function t({board:e,viewer:i}){const{collaborated_by_me:n}=e;return Boolean(i.isAuth&&n)}n.d(i,{Z:()=>t})},4294:(e,i,n)=>{n.d(i,{Z:()=>a});var t=n(221263),o=n(937330);function a({board:e,viewer:i}){return(0,t.Z)(i,e)||(0,o.Z)({board:e,viewer:i})}},737022:(e,i,n)=>{function t(e){return e?e["564x"]&&e["564x"].url?e["564x"]:e["736x"]&&e["736x"].url?e["736x"]:e["474x"]&&e["474x"].url?e["474x"]:e["236x"]&&e["236x"].url?e["236x"]:null:null}n.d(i,{Z:()=>t})},687551:(e,i,n)=>{function t(e){return!!(e&&e.carousel_data&&e.carousel_data.id)}n.d(i,{Z:()=>t})},47170:(e,i,n)=>{n.d(i,{Z:()=>r});var t=n(768559),o=n(558068),a=n(276775);function r(e){var i,n;const r=(0,a.useLocation)(),{previous:s}=(0,o.Hv)();return(0,t.Z)({boardUrl:null===(i=e.board)||void 0===i?void 0:i.url,callToCreateSourcePinId:e.call_to_create_source_pin_id,location:r,pinId:e.id,pinnerUserName:null===(n=e.pinner)||void 0===n?void 0:n.username,previousHistory:s,storyPinDataId:e.story_pin_data_id,trackingParams:e.tracking_params,trackingParamsMap:e.tracking_params_map})}},827896:(e,i,n)=>{n.d(i,{Z:()=>r});var t=n(768559),o=n(802201),a=n(276775);function r(){const e=(0,o.S6)(),i=(0,a.useLocation)();return(n,o)=>{let a;const r=e(n);if(null!=o&&o.shouldTrackForPrevLocation){const e=(null==r?void 0:r.tracking_params_map)||{},i=Object.keys(e).find((e=>"PinResource"!==e));r&&(a=i?e[i]:e.PinResource)}else if(r){var s,l;a=(0,t.Z)({boardUrl:null===(s=r.board)||void 0===s?void 0:s.url,callToCreateSourcePinId:r.call_to_create_source_pin_id,location:i,pinId:r.id,pinnerUserName:null===(l=r.pinner)||void 0===l?void 0:l.username,storyPinDataId:r.story_pin_data_id,trackingParams:r.tracking_params,trackingParamsMap:r.tracking_params_map})}return a}}},329734:(e,i,n)=>{n.d(i,{P:()=>a,Z:()=>o});var t=n(702664);function o(e){return e&&e[1000069]&&500417===e[1000069].experience_id&&e[1000069].display_data.hide_footer}function a(){const e=(0,t.useSelector)((({experiences:e})=>e));return!!e&&o(e)}},64446:(e,i,n)=>{n.d(i,{Z:()=>h});var t=n(605028);var o=n(341732),a=n(81226),r=n(898781),s=n(623568),l=n(773285),d=n(883119),c=n(785893);const u={borderRadius:"18px",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"},_={borderRadius:"18px",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"4px 8px"};function p({backgroundColor:e,identifier:i,size:n="sm"}){const t="pine"===e?"#0FA573":"#fff",o="sm"===n?u:_;return(0,c.jsx)(d.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{...o,backgroundColor:e?t:"rgba(255, 255, 255, 0.8)",color:"pine"===e?"#fff":"#111"}},"data-test-id":"PinTypeIdentifier",children:i})}function h({pin:e,size:i="sm",allowProductCarousel:n,allowShoppingPriceIndicator:u,shoppingLabelColor:_}){const h=(0,r.ZP)(),{checkExperiment:m}=(0,l.F)(),g=(0,t.Z)(e);if(g.isGif)return p({identifier:"GIF",size:i});if(g.isStoryPin){const{page_count:n=0,static_page_count:t=0,total_video_duration:o=0}=e.story_pin_data||{},{anyEnabled:r}=m("hfp_idea_pin_identifer_v2_web");let l=n.toString();const u=r?o+t*s.oN:o;if(u>0)return l=(0,a.Z)(u),p({identifier:l,size:i});return p({identifier:(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(d.xu,{marginEnd:1,display:"flex",alignItems:"center",children:(0,c.jsx)(d.JO,{accessibilityLabel:h._('Idea Pin', 'pin.pinTypeIdentifier.ideaPinIconAccessibilityLabel', 'identifier that shows the pin type'),inline:!0,icon:"idea-pin",color:"default",size:"sm"===i?12:16})}),(0,c.jsx)(d.xv,{inline:!0,size:"100",weight:"bold",children:l})]}),size:i})}if(g.isVideo){const n=e.videos,{duration:t=0}=n&&n.video_list&&n.video_list[Object.keys(n.video_list)[0]]||{};return p({identifier:(0,a.Z)(t),size:i})}if(g.isProduct){const n=e.rich_summary&&e.rich_summary.products&&e.rich_summary.products[0]&&e.rich_summary.products[0].offer_summary;if(u){const e=n&&(n.price||n.max_price);return e?p({identifier:e,size:i}):null}if(_){const n=function(e){var i;return((((null===(i=e.rich_summary)||void 0===i?void 0:i.products)||[])[0]||{}).label_info||{}).labels||[]}(e)[0];return n?p({identifier:n,backgroundColor:_,size:i}):null}return null}if(n){const n=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0],t=n&&(0,o.Z)(e.images,n.additional_images,e.carousel_data&&e.carousel_data.index)||{},{carousel_slots:a=[],index:r=0}=t;return p({identifier:`${r+1}/${a.length}`,size:i})}if(g.isCarousel){const n=e.carousel_data||{},{carousel_slots:t=[],index:o=0}=n;return p({identifier:`${o+1}/${t.length}`,size:i})}return null}},55275:(e,i,n)=>{n.d(i,{P:()=>r,t:()=>s});var t=n(6637);const o=()=>{};const a={complaint:function(e,i){t.Z.create("PinFeedbackResource",e).callUpdate().then((()=>i()))},followBoard:function(e,i){t.Z.create("BoardFollowResource",e).callCreate().then((()=>i()))},followPinner:function(e,i){t.Z.create("UserFollowResource",e).callCreate().then((()=>i()))},followTopic:function(e,i){t.Z.create("InterestFollowResource",e).callCreate().then((()=>i()))},newsHubPinHide:function(e,i){t.Z.create("NewsHubPinFeedbackResource",e).callUpdate().then((()=>i()))},promotedComplaint:function(e,i){t.Z.create("PinFeedbackResource",e).callUpdate().then((()=>i()))},relatedPinHide:function(e,i){t.Z.create("RelatedPinFeedbackResource",e).callUpdate().then((()=>i()))},reportPin:function(e,i){i()},showAdReasons:function(e,i){i()},unfollowBoard:function(e,i){t.Z.create("BoardFollowResource",e).callDelete().then((()=>i()))},unfollowPinner:function(e,i){t.Z.create("UserFollowResource",e).callDelete().then((()=>i()))},unfollowTopic:function(e,i){t.Z.create("InterestFollowResource",e).callDelete().then((()=>i()))},unrelatedSearchPin:function(e,i){t.Z.create("SearchPinFeedbackResource",e).callUpdate().then((()=>i()))}},r=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function s(e,i,n=o){const t=e?a[e]:null;return t?t(i,n):n()}},680046:(e,i,n)=>{n.d(i,{EF:()=>u,XZ:()=>d,ZP:()=>s,nb:()=>c,yl:()=>l});var t=n(966113),o=n(55275),a=n(760372);const r=e=>e.length>32?`${e.substring(0,32).trim()}...`:e,s=({i18n:e,interpolateNamedTemplate:i})=>({getLearnMoreUrl:(e,i)=>{switch(e){case 1:return t.Z.settings.HELP_PROMOTED_PINS_RETARGETED_PIN_URL;case 2:case 3:return t.Z.settings.HELP_PROMOTED_PINS_LOOKALIKE_TARGETING_URL;default:return i?t.Z.settings.HELP_DEFAULT_PROMOTED_PINS_URL:t.Z.settings.HELP_PROMOTED_PINS_URL}},getRecommendationDescription:({ad_match_reason:n,board:t,feedbackType:o,makeNavigateLink:a,pinner:s,promoter:l,recommendationReason:d,sourceInterest:c})=>{switch(o){case"pfy":return e._('This Pin was inspired by your recent activity', 'Pin feedback reason', 'Pin feedback reason');case"pfyBoard":const{name:o,url:u}=d.board,_=a("navigation",u,o);return i(e._('This Pin was inspired by your board {{ boardLink }}', 'Pin feedback - inspired by your board', 'Pin feedback - inspired by your board'),{boardLink:_});case"topic":const{name:p,url_name:h}=c,m=a("topicUrl",`/topics/${h}`,p);return i(e._('This Pin was inspired by {{ formattedTopic }}', 'Pin feedback', 'Pin feedback'),{formattedTopic:m});case"followed":const g=`/${s.username}`,f=a("boardUrl",t.url,r(t.name)),v=a("pinnerUrl",g,r(s.full_name));return s.explicitly_followed_by_me?i(e._('This Pin is from {{ formattedPinner }}, a profile you follow', 'Pin feedback', 'Pin feedback'),{formattedPinner:v}):i(e._('This Pin is from {{ formattedBoard }}, a board you follow', 'Pin feedback', 'Pin feedback'),{formattedBoard:f});case"promoted":switch(n){case 1:case 2:case 3:return e._('This ad was personalized for you using info from one of our partners', 'Pin feedback', 'Pin feedback');default:const{full_name:n,username:t}=l,o=a("promotedLink",t?"/"+t+"/":"/",n);return i(e._('{{ promoterLink }} paid to have this Pin show up where\n          you\u2019d be more likely to notice it', 'Pin feedback', 'Pin feedback'),{promoterLink:o})}default:return null}},getFeedbackType({board:e,feedback:i,viewParameter:n,pin:{promoter:t,is_downstream_promotion:o,recommendation_reason:a},pinner:r}){const s=i&&i.type;return t&&!o?"promoted":s||((e=>!!e&&"FOLLOWED_INTEREST"!==e.reason&&"FOLLOWING_FEED"!==e.reason&&"RECENT_FOLLOWED_BOARD"!==e.reason&&!0)(a)?a.board?"pfyBoard":"pfy":a&&"FOLLOWED_INTEREST"===a.reason?"topic":e&&e.followed_by_me||r&&r.explicitly_followed_by_me?"followed":140===n||144===n||141===n||145===n||139===n||3173===n?"related":92===n?"default":3082===n?"newsHub":null)},getHidePinAction:({feedbackData:e,feedbackType:i,pinId:n,recommendationReasonId:t,pinFeedbackType:o,complaintReason:a,throughId:r,throughProperties:s,clientTrackingParams:l})=>{const d="promoted"===i;let c,u;switch(i){case"promoted":c="promotedComplaint";break;case"search":c="unrelatedSearchPin";break;case"related":c="relatedPinHide";break;case"newsHub":c="newsHubPinHide";break;default:c="complaint"}switch(i){case"search":u={query:e.query,pin_id:n};break;case"related":u={pin:n};break;case"newsHub":u={pinId:n,newsId:e.newsId};break;default:u={complaint_reason:a||0,pin_id:n,...t?{recommendation_reason_id:t}:{},feedback_type:o||1,promoted:d,...r?{through_id:r}:{},...s?{through_properties:s}:{},...l?{client_tracking_params:l}:{}}}return{action:c,actionOptions:u}},getUnfollowAction:({board:n,feedbackType:t,makeNavigateLink:o,pinner:r,sourceInterest:s})=>{if("topic"===t){if(s){const{id:n,name:t,url_name:r}=s,l=o("topicUrl",`/topics/${r}`,t,!0),d=i(e._('We\u2019ll show you less Pins from {{ formattedTopic }} in the future.', 'pin.contextualMenu.feedback.unfollowTopic.subtitle', 'Confirmation text after unfollowing a topic'),{formattedTopic:l});return{action:"unfollowTopic",actionOptions:{interest_id:n,interest_list:a.X},title:"",subTitle:d}}}else if("followed"===t&&n&&r){const{id:t,name:a,url:s}=n||{},{explicitly_followed_by_me:l,full_name:d,username:c}=r,u=`/${c}`,_=o("boardUrl",s,a,!0),p=o("pinnerUrl",u,d,!0);let h=l?i(e._('You\u2019ve unfollowed {{ formattedPinner }}\u2019s Board {{ formattedBoard }}. You can follow it again by searching for it.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedPinner:p,formattedBoard:_}):i(e._('You\u2019ve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedBoard:_});return h=l?i(e._('You unfollowed {{ formattedPinner }} and won\u2019t see Pins they save anymore.', 'Confirmation text after unfollowing a user', 'Confirmation text after unfollowing a user'),{formattedPinner:p}):i(e._('You unfollowed the board {{ formattedBoard }} and won\u2019t see Pins saved to it anymore.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedBoard:_}),{action:"unfollowBoard",actionOptions:{board_id:t},title:"",subTitle:h}}return null}});function l(e){return null!=e&&e.reason_id?e.reason_id:null!=e&&e.board?e.board.id:null!=e&&e.pin?e.pin.id:null!=e&&e.interest?e.interest.id:""}function d(e){return null==e?void 0:e.through_properties}function c(e){switch(e){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}function u(e,i,n,t,a,r,s){return()=>{const l={...e,undo:!0};let d=i;"unfollowPinner"===i?d="followPinner":"unfollowBoard"===i?d="followBoard":"unfollowTopic"===i&&(d="followTopic"),(0,o.t)(d,l),r(n),s({event_type:101,component:0,element:11181,view_type:t,view_parameter:a})}}},205202:(e,i,n)=>{function t(e,i){return e&&e[i]&&e[i].url}n.d(i,{Z:()=>t})},752802:(e,i,n)=>{n.d(i,{Z:()=>o});const t=["564x","736x","orig","474x","236x"],o=({images:e={},resolutionPreferences:i=t})=>{for(const n of i)if(e[n]&&e[n].url)return e[n];return null}},248975:(e,i,n)=>{function t({embedSrc:e,embedType:i,images:n,preferredResolution:t}){if(!e&&!i&&!n)return"";if("gif"===i)return e||"";const o=n;if(!o)return"";if(t){const e="474x"===t&&o["474x"]||"236x"===t&&o["236x"]||o["736x"];if(e&&e.url)return e.url}const a=Object.keys(o).map((e=>{try{const i=e.split("x")[0];return Number.isNaN(Number(i))?(o[i]=o[e],i):e}catch(i){return""}}));a.sort();const r=a.pop();return o[r]&&o[r].url||""}n.d(i,{Z:()=>t})},605028:(e,i,n)=>{n.d(i,{Z:()=>a});var t=n(687551),o=n(623568);function a(e){const{access:i,attribution:n,embed:a,is_eligible_for_web_closeup:r,rich_summary:s,sponsorship:l,story_pin_data_id:d,videos:c}=e,u={isLeadPin:!1,isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isSponsored:!1,isStoryPin:!1,isVideo:!1};(0,o._Q)(e)&&(u.isLeadPin=!0),(0,t.Z)(e)&&(u.isCarousel=!0),r&&(u.isOneTap=!0),(0,o.iR)(c)&&(u.isVideo=!0);const _=a||n&&n.embed||null;return _&&"gif"===_.type&&(u.isGif=!0),s&&"product"===s.type_name&&(u.isProduct=!0),s&&"recipe"===s.type_name&&(u.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(u.isPromoted=!0),(i||[]).includes("write")&&(u.isOwnPin=!0),d&&(u.isStoryPin=!0),l&&(u.isSponsored=!0),u}},674915:(e,i,n)=>{n.d(i,{Z:()=>a});var t=n(307061),o=n(736688);const a=(0,t.Z)((e=>{const{videos:i}=e.pin,{id:n,video_list:t={}}=i||{},{V_720P:a,V_HLSV4:r,V_HLSV3_MOBILE:s}=t,l=(0,o.V3)(r),d=(0,o.V3)(s),c=(0,o.V3)(a),u=c||l||d;return n&&u?{...e,video:{id:n,hasVideo:u,mp4:c||void 0,hls:l||void 0,hlsv3:d||void 0}}:null}))},976071:(e,i,n)=>{function t(e){return Boolean(e.promoted_is_removable)}n.d(i,{Z:()=>t})},18857:(e,i,n)=>{n.d(i,{G7:()=>c,WE:()=>d,l6:()=>u,rh:()=>l});var t=n(27255),o=n(605028),a=n(66699),r=n(623568);const s=e=>e.checkExperiment("px_show_protected_pin_stats_on_closeup").anyEnabled;function l(e,i,n,a){var l,d,c;if(!i.isAuth)return!1;const u=(0,r.Nc)(e)||(0,r.o)(e),_=(null===(l=e.board)||void 0===l?void 0:l.privacy)===t.Z.BoardPrivacy.PUBLIC,p=(null===(d=e.board)||void 0===d?void 0:d.privacy)===t.Z.BoardPrivacy.PROTECTED,h=(s(n)&&p||_)&&!e.is_repin&&[i.id,a].includes(null===(c=e.pinner)||void 0===c?void 0:c.id),{isStoryPin:m}=(0,o.Z)(e);return u&&(!p||s(n))||i.isPartner&&h||(e=>e.checkExperiment("web_ps4p").anyEnabled)(n)&&m&&h||(0,r.pU)(e)}function d(e,i,n,t,o,a){return e.isAuth&&i&&(n||t)&&!(null==o||!o.isLoaded)&&!a}function c(e,i){return(0,a.Z)(i.ngettext('Last {{ count }} Day', 'Last {{ count }} Days', e, 'Previous {{ count }} days from current date', 'Previous {{ count }} days from current date'),{count:e})}function u(e,i){return(0,a.Z)(i.ngettext('Last {{ count }} Hour', 'Last {{ count }} Hours', e, 'analytics.utils', 'Previous {{ count }} hours from current time'),{count:e})}},692627:(e,i,n)=>{function t(e){if(e&&e.pin){const i=e.pin.rich_metadata;if(i)return i.products?144:i.article?141:i.recipe?145:139;if(e.pin.story_pin_data)return 157}return 140}n.d(i,{Z:()=>t})},869503:(e,i,n)=>{n.d(i,{Z:()=>c});var t=n(939106),o=n(898781),a=n(349700),r=n(883119),s=n(785893);function l(){const e=(0,o.ZP)();return e._('Free shipping', 'closeup.product.shipping', 'product shipping info')}function d({freeShippingPrice:e}){const i=(0,o.ZP)();return(0,a.nk)(i._('Free shipping with {{ shippingPrice }}+', 'closeup.product.shipping', 'product shipping info'),{shippingPrice:e}).join("")}function c({customStyles:e,showPrevDot:i,freeShippingPrice:n,freeShippingValue:o}){const a=i?[""]:[],{color:c="subtle",size:u="200"}=e||{};return Number.isFinite(o)?(0===o?a.push((0,s.jsx)(l,{})):n&&a.push((0,s.jsx)(d,{freeShippingPrice:n})),0===a.length?null:(0,s.jsx)(r.xv,{color:c,size:u,children:(0,s.jsx)(t.Z,{color:c,items:a})})):null}},681227:(e,i,n)=>{function t(e){const i=Object.keys(e);if(i.length>0){return i.sort(((i,n)=>e[n]-e[i])).slice(0,3)}return null}function o(e){const i=Object.values(e);if(i.length>0){return i.reduce(((e,i)=>e+i),0)}return 0}function a(e,i){const{videos:n,is_downstream_promotion:t,is_promoted:o,story_pin_data_id:a,board:r}=e;return!(o||t||(!n||!n.id)&&!a||i||null!=r&&r.is_collaborative&&r.collaborated_by_me)}n.d(i,{At:()=>t,J6:()=>a,Ud:()=>o})},561195:(e,i,n)=>{n.d(i,{A:()=>l,Z:()=>d});var t=n(667294),o=n(498913),a=n.n(o),r=n(883119),s=n(785893);const l=({fill:e,width:i,color:n})=>{const o="half"===e?(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)(r.xu,{position:"absolute",children:(0,s.jsx)(r.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,s.jsx)(r.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,s.jsx)(r.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},display:"inlineBlock","data-test-id":`rating-star-${e}`,children:o})};function d({max_rating:e,rating:i,width:n,color:o}){const r=[],d=function(e,i){return 5*(i=i<=e?i:e)/e}(parseFloat(e)||5,parseFloat(i)||0);if(Number.isNaN(d))return null;const c=Math.floor(d),u=d-c;return a()(c,(e=>r.push((0,s.jsx)(l,{color:o,fill:"full",width:n},e)))),u>=.75?r.push((0,s.jsx)(l,{color:o,fill:"full",width:n},r.length)):u>=.25&&r.push((0,s.jsx)(l,{color:o,fill:"half",width:n},r.length)),a()(5-r.length,(()=>r.push((0,s.jsx)(l,{color:o,fill:"empty",width:n},r.length)))),(0,s.jsx)(t.Fragment,{children:r})}},736688:(e,i,n)=>{n.d(i,{QO:()=>l,V3:()=>r,cO:()=>u,dn:()=>d,fP:()=>c,j1:()=>_,v_:()=>s});var t=n(841726),o=n(539497),a=n(623568);const r=e=>{const{thumbnail:i,url:n,width:t,height:o,duration:a}=e||{};return i&&n&&t&&o&&{thumbnail:i,url:n,width:t,height:o,duration:a}||void 0};function s(e,i){if(i&&i.products&&i.products[0]){const n=i.products[0],t=!(!n.name&&!e),a=!(!i.aggregate_rating||0===i.aggregate_rating.rating_count&&0===i.aggregate_rating.review_count||Number.isNaN(parseFloat(i.aggregate_rating.rating_value))),r=!(!n.offer_summary||!n.offer_summary.min_price&&!n.offer_summary.price),s=t&&(a||r);return(({isEligible:e,hasName:i,hasAggregateRating:n,hasOffers:t})=>{(0,o.My)("closeup_main_pin.leaf_snippet.is_product",{isEligible:e,hasName:i,hasAggregateRating:n,hasOffers:t})})({isEligible:s,hasName:t,hasAggregateRating:a,hasOffers:r}),s}return!1}const l=(e,{userName:i,fullName:n})=>{const t=i||"";return{"@type":"Person",name:n||t,url:e+"/"+t}};function d(e,i,n,o,a){const r=i||n||o,s=()=>i||a;if(!e||!e.metatags)return{title:r,description:n||s()};const{description:l=""}=e.metatags;var d;return{title:r,description:(d=l,(0,t.o)(d||"").trim())||s()}}const c=(e,i,n)=>{let t=i;return n?(t="recipe"===e?n._('Pinterest Recipe', 'pin.closeup.leafsnippet.recipe', 'Default recipe title and description for crawlers'):"howto"===e?n._('Pinterest How To', 'pin.closeup.leafsnippet.howto', 'Default how to title and description for crawlers'):"video"===e?n._('Pinterest Video', 'pin.closeup.leafsnippet.video', 'Default video title and description for crawlers'):"product"===e?n._('Pinterest Product', 'pin.closeup.leafsnippet.product', 'Default product title and description for crawlers'):n._('Pin page', 'pin.closeup.leafsnippet.pin', 'Default pin title and description for crawlers'),{fallbackTitle:t,fallbackDescription:t}):{fallbackTitle:t,fallbackDescription:t}},u=e=>{if(!e)return;const i=e.rating_count,n=e.review_count;if(!(!!i||!!n)||Number.isNaN(parseFloat(e.rating_value)))return;const t=i||n;return{"@type":"AggregateRating",ratingValue:e.rating_value,ratingCount:t,bestRating:5,worstRating:1}},_=(e,i=!0)=>{var n,t,o,r;const s=!!(0,a.iR)(e.videos),l=i&&!!(0,a.cL)({embedSrc:null===(n=e.embed)||void 0===n?void 0:n.src,embedSubtype:null===(t=e.embed)||void 0===t?void 0:t.subtype,embedType:null===(o=e.embed)||void 0===o?void 0:o.type}),d=!(null===(r=e.story_pin_data)||void 0===r||!r.total_video_duration);return s||l||d}},53325:(e,i,n)=>{n.d(i,{$O:()=>s,GZ:()=>d,OE:()=>c,Xv:()=>l,Z0:()=>t,_z:()=>a,fM:()=>r,qA:()=>o,zX:()=>u});const t=40,o=4,a=106,r=133,s=.1,l=10,d=246,c=197,u=236},124364:(e,i,n)=>{n.d(i,{Z:()=>r});var t=n(898781),o=n(883119),a=n(785893);function r({height:e,isDenseView:i,rounding:n,width:r}){const s=(0,t.ZP)();return(0,a.jsx)(o.xu,{color:"default",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",rounding:n,overflow:"hidden",width:r,height:e,"data-test-id":"unavailable-pin",children:(0,a.jsxs)(o.kC,{direction:"column",alignItems:"center",children:[(0,a.jsx)(o.xu,{paddingY:i?2:4,children:(0,a.jsx)(o.JO,{accessibilityLabel:s._('Pin not available', 'story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:"default",icon:"alert",size:20})}),(0,a.jsx)(o.xv,{weight:"bold",children:s._('Unavailable', 'story-pin.Closeup.UnavailableIdeaPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),!i&&(0,a.jsx)(o.xu,{paddingY:1,children:(0,a.jsx)(o.xv,{children:s._('Removed by the creator', 'story-pin.Closeup.UnavailableIdeaPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})}},927104:(e,i,n)=>{n.d(i,{Z:()=>t});const t=(e,i)=>e.length>i?e.substr(0,i-3).trim()+"…":e},883561:(e,i,n)=>{n.d(i,{ZP:()=>t});function t(e,i=80,n="…",t=false){let o;if(!e)return"";if(e.length<=i)return e;if(" "!==e[i-1]&&" "===e[i]||t)o=e.substring(0,i);else{const n=e.lastIndexOf(" ",i);o=e.substring(0,n)}return o=o.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""),o+n}},841726:(e,i,n)=>{n.d(i,{Z:()=>o,o:()=>t});function t(e,i){const n=(((i||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>|<!--[\s\S]*/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,((e,i)=>n.indexOf("<"+i.toLowerCase()+">")>-1?e:""))}const o=e=>e.replace(/(<([^>]+)>)/gi,"")},939106:(e,i,n)=>{n.d(i,{Z:()=>l});var t=n(667294),o=n(948618),a=n(883119),r=n(785893);function s(e){return null!=e}function l({additionalPadding:e,color:i="darkGray",inline:n,items:l}){const d=e?(0,r.jsx)("span",{style:{padding:`0 ${4*e}px`},children:(0,r.jsx)(o.Z,{color:i})}):(0,r.jsx)(o.Z,{color:i}),c=l.filter(s).reduce(((e,i,n)=>[...e,0!==n?d:null,i]),[]).filter(s).map(((e,i)=>(0,r.jsx)(t.Fragment,{children:e},i)));return 0===c.length?null:n?(0,r.jsx)(a.xu,{children:c}):(0,r.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:c})}},964082:(e,i,n)=>{function t(e,i){const{organicVideosAutoplaying:n,promotedVideosAutoplaying:t}=i,o={...n,...t};for(const a in o){const{paused:i}=o[a];if(a!==e&&!i)return!1}return!0}n.d(i,{Z:()=>t})},36971:(e,i,n)=>{function t(e,i){const{organicVideosAutoplaying:n,promotedVideosAutoplaying:t}=i,o={...n,...t};return o[e]&&o[e].currentTime}n.d(i,{Z:()=>t})},428258:(e,i,n)=>{n.d(i,{Z:()=>a,t:()=>o});const t=()=>{var e,i;const n="undefined"!=typeof window?null===(e=window.navigator)||void 0===e||null===(i=e.connection)||void 0===i?void 0:i.effectiveType:void 0;let t,o=null===(a=window)||void 0===a||!a.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x";var a;return n?"4g"===n?t="40-80":(o="1x",t="0-1"):t="unknown",{downloadSpeedGroup:t,screenDimension:o}};function o(e){const{downloadSpeedGroup:i,screenDimension:n}=t(),o={"1x":e.V_EXP3,"2x":e.V_EXP5},a={"1x":e.V_EXP7,"2x":e.V_EXP7};return{unknown:o,"0-1":o,"1-5":{"1x":e.V_EXP4,"2x":e.V_EXP5},"5-10":{"1x":e.V_EXP5,"2x":e.V_EXP5},"10-20":{"1x":e.V_EXP6,"2x":e.V_EXP6},"20-40":a,"40-80":a,"80_or_above":a}[i][n]||e.V_720P||void 0}function a(e){const{video_list:i={}}=e,n=o(i),t=i.V_HLSV3_MOBILE||void 0;return n?{hlsv3:t,mp4:n}:{hlsv3:t}}},868565:(e,i,n)=>{function t(e){const i=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return i?i.V_HLSV3_MOBILE||i.V_HLSV4||i.V_720P:null}n.d(i,{Z:()=>t})},463045:(e,i,n)=>{function t(e,i){const{organicVideosAutoplaying:n,promotedVideosAutoplaying:t}=i,o={...n,...t};return!!o[e]&&!o[e].paused}n.d(i,{Z:()=>t})},905723:(e,i,n)=>{n.d(i,{Z:()=>t});const t={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},229428:(e,i,n)=>{function t(e){return e.filter((e=>e.is_stela))}function o(e){return e.filter((e=>!!e.label))}n.d(i,{k:()=>t,m:()=>o})},698447:(e,i,n)=>{n.d(i,{Z:()=>s});var t=n(605707),o=n(883119),a=n(785893);const r={chip:{marginRight:1,flex:"1 1 0"},chipInner:{paddingBottom:"100%"},chipContainer:{marginRight:-1}};function s({pin:e,enableCloseupLink:i}){const{aggregated_pin_data:n}=e,{pin_tags_chips:s}=n||{},l=s&&s.length>=3?s.slice(0,3):[];return(0,a.jsx)(o.xu,{display:"flex",dangerouslySetInlineStyle:{__style:r.chipContainer},children:l.map((n=>{var s,l,d,c;const u=(null===(s=n.images)||void 0===s?void 0:s["750x"])||{},_=(0,a.jsx)(o.Ee,{alt:"",fit:"cover",naturalHeight:null!==(l=u.height)&&void 0!==l?l:1,naturalWidth:null!==(d=u.width)&&void 0!==d?d:1,role:"presentation",src:null!==(c=u.url)&&void 0!==c?c:""});return(0,a.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:r.chip},"data-test-id":"collageChip",children:(0,a.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:r.chipInner},position:"relative",children:(0,a.jsx)(o.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,children:(0,a.jsx)(o.zd,{height:"100%",wash:!0,width:"100%",children:i?(0,a.jsx)(t.Z,{sizing:"fullSize",collageChipId:n.id,pin:e,children:_}):_})})})},n.id)}))})}},542563:(e,i,n)=>{n.d(i,{Z:()=>r});var t=n(667294),o=n(407043),a=n(946595);function r(e,i){const{logContextEvent:n}=(0,o.v)(),{componentType:r,contextLogData:s,viewParameter:l,viewType:d}=(0,a.E)(),{aux_data:c,view_type:u,view_parameter:_,component:p,...h}=null!=i?i:{};return(0,t.useCallback)((()=>{n({event_type:e,view_type:u||d,view_parameter:_||l,component:p||r,...h,aux_data:{...c,...s}})}),[n,c,h,_,u,p,r,s,e,l,d])}},423217:(e,i,n)=>{n.d(i,{X:()=>o,Z:()=>a});var t=n(667294);const o=120;function a(e,i=0,n=o){const[a,r]=(0,t.useState)(e?"active":"inactive");return(0,t.useEffect)((()=>{if(!e){const e=setTimeout((()=>r("inactive")),n);return()=>{clearTimeout(e)}}if(i){const e=setTimeout((()=>r("active")),i);return()=>{clearTimeout(e)}}r("active")}),[e]),a}},639758:(e,i,n)=>{n.d(i,{Z:()=>d});var t=n(898781),o=n(883119),a=n(785893);const r={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},s={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},l={overlay:{__style:{backgroundColor:"#000"}}};function d({backgroundImage:e,naturalHeight:i,naturalWidth:n,onRestartVideo:d,pinTitle:c,pin:u}){const _=(0,t.ZP)(),{id:p}=u;return(0,a.jsxs)(o.Ee,{alt:c||_._('pin image', 'image of a pin', 'image of a pin'),naturalHeight:i,naturalWidth:n,src:e,children:[(0,a.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.8,dangerouslySetInlineStyle:l.overlay}),(0,a.jsxs)(o.xu,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%","data-test-id":`video-end-card-${p}`,children:[(0,a.jsx)(o.iP,{rounding:2,children:(0,a.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,a.jsx)(o.JO,{accessibilityLabel:_._('Visit site', 'Button when pressed goes to pin\'s website', 'Button when pressed goes to pin\'s website'),color:"light",dangerouslySetSvgPath:s,size:25}),(0,a.jsx)(o.xu,{margin:1}),(0,a.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:_._('Visit site', 'Button when pressed goes to pin\'s website', 'Button when pressed goes to pin\'s website')})]})}),(0,a.jsx)(o.xu,{margin:3}),(0,a.jsx)(o.iP,{onTap:d,rounding:2,children:(0,a.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,a.jsx)(o.JO,{accessibilityLabel:_._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"light",dangerouslySetSvgPath:r,size:25}),(0,a.jsx)(o.xu,{margin:1}),(0,a.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:_._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video')})]})})]})]})}},946595:(e,i,n)=>{n.d(i,{B:()=>o,E:()=>a});var t=n(425288);const{Provider:o,useHook:a}=(0,t.Z)("trackingParametersContext")},605707:(e,i,n)=>{n.d(i,{Z:()=>_});var t=n(66699),o=n(898781),a=n(287072),r=n(35495),s=n(883119),l=n(407043),d=n(243943),c=n(946595),u=n(785893);function _({sizing:e="default",children:i,collageChipId:n,componentType:_,contextLogData:p,elementType:h,pin:m,viewParameter:g,viewType:f}){const v=(0,o.ZP)(),{logContextEvent:x}=(0,l.v)(),y=(0,c.E)(),{carousel_data:P,id:b}=m;let w,S=`/pin/${n||b}/`;const T=(0,d.Xx)();if(null!=T&&T.variantUrl&&(S=`/pin/${T.variantUrl}/`),P){const{carousel_slots:e=[],id:i,index:n=0}=P;S=`/pin/${b}/`,w={carousel_slot_id:e[n]&&e[n].id,carousel_data_id:i,carousel_slot_index:n}}w={...w||{},...(0,r.Kl)(m,p)||{}};const I=(0,a.Z)({href:S,externalData:{auxData:w,pin:m}});return(0,u.jsx)(s.iP,{accessibilityLabel:(0,t.Z)(v._('{{ pinTitle }} pin page', 'pinRep.closeupLink.tapArea.accessibilityLabel', 'Accessibility label with pin title on individual links'),{pinTitle:m.grid_title||m.title||m.description||""}),mouseCursor:"zoomIn",rounding:2,onTap:({event:e,dangerouslyDisableOnNavigation:i})=>{i(),x({event_type:101,component:_||y.componentType,element:h,object_id_str:b,view_type:f||y.viewType,view_parameter:g||y.viewParameter,aux_data:{...p,...(0,r.Kl)(m,p)||{}}}),x({event_type:8948,view_type:f||y.viewType,view_parameter:g||y.viewParameter,component:_||y.componentType,element:h,object_id_str:b,aux_data:{closeup_navigation_type:"click",...p,...(0,r.Kl)(m,p)||{}}}),I({event:e})},fullWidth:"fullSize"===e,fullHeight:"fullSize"===e,href:S,role:"link",children:i})}},31658:(e,i,n)=>{n.d(i,{Z:()=>a});var t=n(883119),o=n(785893);function a({children:e,additionalStyles:i={}}){return(0,o.jsx)(t.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...i}},children:e})}},969956:(e,i,n)=>{n.d(i,{Z:()=>P});var t=n(667294),o=n(499128),a=n(898781),r=n(883119),s=n(785893);function l(e){const i=(0,a.ZP)(),{onHide:n}=e,t=(0,s.jsx)(r.xv,{children:i._('Thank you for helping improve signal detection on Pinterest!', 'pinRep.actionBar.signalDetector.toast', 'Toast text displayed when a user submits a signal for review')});return(0,s.jsx)(o.ZP,{onHide:n,text:t})}var d=n(6637),c=n(19121),u=n(343341);const _=function({anchor:e,onDismiss:i,pinId:n,signals:o}){const _=(0,a.ZP)(),[p,h]=(0,t.useState)(0),m=(0,c.Z)(),{showOneToast:g}=(0,u.F9)();if(!m.isEmployee)return null;const f=o.map((({signal_message:e})=>({href:"#",text:null!=e?e:""}))),{background_color:v,icon_url:x,signal_id:y,signal_message:P}=o[p];return(0,s.jsx)(r.mh,{children:(0,s.jsx)(r.J2,{anchor:e,idealDirection:"right",onDismiss:i,positionRelativeToAnchor:!1,size:"lg",children:(0,s.jsxs)(r.xu,{padding:4,width:"100%",children:[o.length>1&&(0,s.jsx)(r.xu,{overflow:"scrollX",padding:1,marginBottom:4,children:(0,s.jsx)(r.mQ,{activeTabIndex:p,onChange:({event:e,activeTabIndex:i,dangerouslyDisableOnNavigation:n})=>{n(),(({activeTabIndex:e,event:i})=>{i.preventDefault(),h(e)})({activeTabIndex:i,event:e})},tabs:f})}),(0,s.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(r.X6,{size:"400",children:_._('Signal detected:', 'pinRep.actionBar.signalDetector.header', 'Header for signal detector flyout')})}),(0,s.jsx)(r.xu,{paddingY:3,children:(0,s.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",children:[(0,s.jsx)(r.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:x?(0,s.jsx)(r.Ee,{alt:_._('Signal display', 'pinRep.actionBar.signalDetector.signalAsset', 'Asset to represent the signal detected'),color:"white",naturalHeight:1,naturalWidth:1,src:x}):(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:v}},height:40,width:40})}),(0,s.jsx)(r.xv,{size:"200",children:P})]})}),(0,s.jsx)(r.xu,{marginBottom:3,children:(0,s.jsx)(r.xv,{size:"200",children:_._('If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.', 'pinRep.actionBar.signalDetector.instructions', 'Instructions to the user for how to handle inaccurate detection')})}),(0,s.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,s.jsx)(r.zx,{fullWidth:!0,color:"red",size:"md",text:_._('Send for review', 'pinRep.actionBar.signalDetector.button.review', 'Button label for users to send the pin for review'),onClick:()=>{const e={pin_id:n,signal_id:y,user:m.id};d.Z.create("SignalReviewRequestResource",e).callCreate(),i(),g((({hideToast:e})=>(0,s.jsx)(l,{onHide:e})))}}),(0,s.jsx)(r.zx,{fullWidth:!0,color:"gray",size:"md",text:_._('Cancel', 'pinRep.actionBar.signalDetector.button.cancel', 'Button label for users to cancel'),onClick:i})]})]})})})};var p=n(241244),h=n(319915),m=n(947599),g=n(215292);function f({signals:e,pinId:i}){const{background_color:n,icon_url:o,signal_message:a}=e[0],[l,d]=(0,t.useState)(!1),c=(0,t.useRef)();return(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)(h.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,s.jsx)(m.Z,{children:(0,s.jsx)(r.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,s.jsx)(p.Z,{children:(0,s.jsx)(g.q,{children:({hovered:e,onMouseEnter:i,onMouseLeave:t})=>(0,s.jsx)(r.iP,{onTap:()=>d((e=>!e)),rounding:"pill",onMouseEnter:i,onMouseLeave:t,children:(0,s.jsxs)(r.xu,{color:e?"dark":"transparentDarkGray",rounding:"pill",display:"flex",alignItems:"center",padding:3,ref:c,children:[(0,s.jsx)(r.xu,{display:"flex",width:24,height:24,rounding:"circle",color:"default",marginEnd:1,justifyContent:"center",alignItems:"center",children:(0,s.jsx)(r.xu,{width:20,height:20,rounding:"circle",overflow:"hidden",children:(0,s.jsx)(r.Ee,{alt:"",color:n,src:null!=o?o:"",naturalHeight:1,naturalWidth:1})})}),(0,s.jsx)(r.xv,{color:"inverse",size:"200",weight:"bold",children:a})]})})})})})})}),l&&c&&c.current&&(0,s.jsx)(_,{anchor:c.current,onDismiss:()=>d(!1),pinId:i,signals:e})]})}const v=({signal:e,anchor:i,setShowFlyout:n,setStore:t})=>{var o;const{hovered:a,onMouseEnter:l,onMouseLeave:d}=(0,g.Z)();return(0,s.jsx)(r.iP,{onTap:()=>(e=>{n((e=>!e)),t(e)})(e),rounding:"pill",onMouseEnter:l,onMouseLeave:d,children:(0,s.jsxs)(r.xu,{color:a?"dark":"transparentDarkGray",rounding:"pill",display:"flex",alignItems:"center",padding:3,ref:i,children:[(0,s.jsx)(r.xu,{display:"flex",width:24,height:24,rounding:"circle",marginEnd:1,color:"default",justifyContent:"center",alignItems:"center",children:(0,s.jsx)(r.xu,{width:20,height:20,rounding:"circle",overflow:"hidden",children:(0,s.jsx)(r.Ee,{alt:"",color:e.background_color,src:null!==(o=e.icon_url)&&void 0!==o?o:"",naturalHeight:1,naturalWidth:1})})}),(0,s.jsx)(r.xv,{color:"inverse",size:"200",weight:"bold",children:e.signal_message})]})})};const x=function({anchor:e,onDismiss:i,pinId:n,signal:t}){const o=(0,a.ZP)(),_=(0,c.Z)(),{showOneToast:p}=(0,u.F9)();if(!_.isEmployee)return null;const{background_color:h,icon_url:m,signal_id:g,signal_message:f}=t;return(0,s.jsx)(r.mh,{children:(0,s.jsx)(r.J2,{anchor:e,idealDirection:"right",onDismiss:i,positionRelativeToAnchor:!1,size:"lg",children:(0,s.jsxs)(r.xu,{padding:4,width:"100%",children:[(0,s.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(r.X6,{size:"400",children:o._('Signal detected:', 'pinRep.actionBar.signalDetector.header', 'Header for signal detector flyout')})}),(0,s.jsx)(r.xu,{paddingY:3,children:(0,s.jsxs)(r.kC,{alignItems:"center",gap:2,justifyContent:"center",children:[(0,s.jsx)(r.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:m?(0,s.jsx)(r.Ee,{alt:o._('Signal display', 'pinRep.actionBar.signalDetector.signalAsset', 'Asset to represent the signal detected'),color:"white",naturalHeight:1,naturalWidth:1,src:m}):(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:h}},height:40,width:40})}),(0,s.jsx)(r.xv,{size:"200",children:f})]})}),(0,s.jsx)(r.xu,{marginBottom:3,children:(0,s.jsx)(r.xv,{size:"200",children:o._('If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.', 'pinRep.actionBar.signalDetector.instructions', 'Instructions to the user for how to handle inaccurate detection')})}),(0,s.jsxs)(r.kC,{alignItems:"center",gap:2,justifyContent:"start",children:[(0,s.jsx)(r.zx,{fullWidth:!0,color:"red",size:"md",text:o._('Send for review', 'pinRep.actionBar.signalDetector.button.review', 'Button label for users to send the pin for review'),onClick:()=>{const e={pin_id:n,signal_id:g,user:_.id};d.Z.create("SignalReviewRequestResource",e).callCreate(),i(),p((({hideToast:e})=>(0,s.jsx)(l,{onHide:e})))}}),(0,s.jsx)(r.zx,{fullWidth:!0,color:"gray",size:"md",text:o._('Cancel', 'pinRep.actionBar.signalDetector.button.cancel', 'Button label for users to cancel'),onClick:i})]})]})})})};function y({signals:e,pinId:i}){const[n,o]=(0,t.useState)(!1),a=(0,t.useRef)(null),[l,d]=(0,t.useState)(e[0]);return(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)(h.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,s.jsx)(m.Z,{children:(0,s.jsx)(r.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,s.jsx)(p.Z,{children:(0,s.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",children:e.map((e=>(0,s.jsx)(r.xu,{marginEnd:2,children:(0,s.jsx)(v,{signal:e,anchor:a,setShowFlyout:o,setStore:d})},e.signal_id)))})})})})}),n&&(0,s.jsx)(x,{anchor:a.current,onDismiss:()=>o(!1),pinId:i,signal:l})]})}function P({pin:e}){if(!(0,c.Z)().isEmployee)return null;const{id:i,deb_ads:n,deb_content_quality:t,deb_inclusive_product:o,deb_shopping:a,deb_trust_and_safety:r}=e;return n?(0,s.jsx)(f,{pinId:i,signals:n}):t?(0,s.jsx)(f,{pinId:i,signals:t}):o?(0,s.jsx)(y,{pinId:i,signals:o}):a?(0,s.jsx)(f,{pinId:i,signals:a}):r?(0,s.jsx)(f,{pinId:i,signals:r}):null}},123987:(e,i,n)=>{n.d(i,{Z:()=>s});var t=n(883119),o=n(423217),a=n(785893);function r(e,i){return{hidden:{opacity:0,transition:i?`opacity ${i}ms ease`:void 0},visible:{opacity:1,transition:e?`opacity ${e}ms ease`:void 0}}}function s({children:e,fadeInDuration:i=0,fadeOutDuration:n=o.X,visibility:s}){return"none"!==s&&e?(0,a.jsx)(t.xu,{dangerouslySetInlineStyle:{__style:r(i,n)[s]},children:e}):null}},472231:(e,i,n)=>{n.d(i,{ZP:()=>g});var t=n(667294),o=n(31658),a=n(898781),r=n(55275),s=n(310227),l=n(407043),d=n(883119),c=n(785893);const u={base:{transition:"all 250ms",opacity:0},blurred:{backgroundPosition:"50% 50%",backgroundSize:"cover",borderRadius:s.Oc,filter:"blur(10px)",opacity:1}},_={base:{transition:"all 250ms"},blurred:{backgroundColor:"rgba(0,0,0,0.6)"}},p={base:{opacity:0,transition:"all 250ms"},visible:{opacity:1}},h=["followed","related","search"],m=["pfy","pfyBoard"];function g({feedbackType:e,isHomefeedTunerVariantExp:i,pin:n,hideContents:g=!1}){var f;const{logContextEvent:v}=(0,l.v)(),x=(0,a.ZP)(),[y,P]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!1);(0,t.useEffect)((()=>P(!0)),[]);const S=()=>w(!0),{feedbackText:T,images:I,showFeedbackOverlay:E,undoAction:A,undoText:C}=n,R=I&&(null===(f=I["236x"])||void 0===f?void 0:f.url),{image:j,subTitle:k,title:O,unfollow:N}=null!=T?T:{},D=!h.includes(e),z=m.includes(e),B=()=>{v({event_type:101,view_type:1,view_parameter:92,element:11347})};return(0,c.jsxs)(d.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{borderRadius:s.Oc}},"data-test-id":"obscured-overlay",overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[(0,c.jsxs)(d.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:s.Oc}},margin:-4,overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[R&&(0,c.jsx)(o.Z,{additionalStyles:{...u.base,...y?u.blurred:{},backgroundImage:`url("${R}")`}}),(0,c.jsx)(o.Z,{additionalStyles:{..._.base,..._.blurred}})]}),(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{...p.base,...!E&&y?p.visible:{}}},height:"100%",padding:4,position:"relative",width:"100%",children:!g&&(0,c.jsx)(d.xu,{height:"100%",children:(0,c.jsxs)(d.xu,{"data-test-id":"PinFeedbackConfirmation",display:"flex",direction:"column",height:"100%",maxWidth:216,children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.X6,{color:"light",size:"400",children:O})}),(0,c.jsxs)(d.xu,{display:"flex",marginBottom:1,children:[j&&(0,c.jsx)(d.xu,{marginEnd:3,children:(0,c.jsx)(d.zd,{width:j.width,height:j.height,rounding:2,wash:!0,children:(0,c.jsx)(d.Ee,{alt:k||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:j.url||""})})}),(0,c.jsx)(d.xv,{color:"light",overflow:"normal",children:k})]}),i?(0,c.jsxs)(t.Fragment,{children:[A&&(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.iP,{onTap:A,children:(0,c.jsx)(d.xv,{color:"inverse",weight:"bold",overflow:"normal",children:x._('Undo', 'Text on the button to navigate to undo hiding a pin', 'Text on the button to navigate to undo hiding a pin')})})}),(0,c.jsxs)(d.xu,{marginTop:"auto",children:[!A&&!b&&N&&!z&&(0,c.jsx)(d.zx,{fullWidth:!0,color:"white",onClick:()=>(0,r.t)(N.action,N.actionOptions,S),text:x._('Unfollow', 'Text on the button to unfollow a specific board / user', 'Text on the button to unfollow a specific board / user')}),D&&(0,c.jsx)(d.zx,{role:"link",color:"white",fullWidth:!0,href:"/edit",onClick:B,text:x._('Tune your feed', 'Text on the button to navigate to homefeed control', 'Text on the button to navigate to homefeed control')})]})]}):(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(d.xu,{children:D&&(0,c.jsx)(d.rU,{href:"/edit",onClick:B,children:(0,c.jsx)(d.xv,{color:"inverse",weight:"bold",overflow:"normal",children:x._('Tune your home feed', 'Text on the link to navigate to homefeed control', 'Text on the link to navigate to homefeed control')})})}),(0,c.jsxs)(d.xu,{marginTop:"auto",children:[!A&&!b&&N&&!z&&(0,c.jsx)(d.zx,{fullWidth:!0,color:"white",onClick:()=>(0,r.t)(N.action,N.actionOptions,S),text:x._('Unfollow', 'Text on the button to unfollow a specific board / user', 'Text on the button to unfollow a specific board / user')}),A&&(0,c.jsx)(d.zx,{fullWidth:!0,color:"white",onClick:A,text:C||x._('Undo', 'Text on the button to undo hiding a pin', 'Text on the button to undo hiding a pin')})]})]})]})})})]})}},248034:(e,i,n)=>{n.d(i,{Z:()=>_});var t=n(898781),o=n(55275),a=n(883119),r=n(61877),s=n(349700),l=n(778423),d=n(407043),c=n(680046),u=n(785893);function _({anchor:e,feedbackData:i,feedbackType:n,pinId:_,onDismiss:p,onHide:h,recommendationReason:m,viewParameter:g,viewType:f}){const{logContextEvent:v}=(0,d.v)(),x=(0,t.ZP)(),y=(0,c.ZP)({i18n:x,interpolateNamedTemplate:s.nk}),P=(e,t)=>{const a=m&&m.reason&&l.ReasonToChoose[m.reason],r=m&&(0,c.yl)(m),s=m&&(0,c.XZ)(m),{action:d,actionOptions:u}=y.getHidePinAction({feedbackData:i,feedbackType:n,pinId:_,recommendationReasonId:a,throughId:r,throughProperties:s,complaintReason:e});(e=>{v({event_type:101,view_type:f,view_parameter:g,element:e,component:(0,c.nb)(n)})})(t),(0,o.t)(d,u),h()},b="promoted"===n?[{text:x._('Not relevant to me', 'homefeed.hideReasons.reason.notRelevant', 'Feedback option for Pin that is not relevant'),reason:10,elementType:1296},{text:x._('Seen Pin too many times', 'homefeed.hideReasons.reason.seenTooMany', 'Feedback option for Pin that has been seen too many times'),reason:3,elementType:11172},{text:x._('Blurry or pixelated image', 'homefeed.hideReasons.reason.lowQualityPicture', 'Feedback option for Pin with low quality picture'),reason:13,elementType:10898}]:[{text:x._('Not relevant to me', 'homefeed.hideReasons.reason.notRelevant', 'Feedback option for Pin that is not relevant'),reason:10,elementType:1296},{text:x._('Not in a language I understand', 'homefeed.hideReasons.reason.languageDontUnderstand', 'Feedback option for Pin that is in a language I dont understand'),reason:15,elementType:11178},{text:x._('Seen Pin too many times', 'homefeed.hideReasons.reason.seenTooMany', 'Feedback option for Pin that has been seen too many times'),reason:3,elementType:295},{text:x._('Blurry or pixelated image', 'homefeed.hideReasons.reason.lowQualityPicture', 'Feedback option for Pin with low quality picture'),reason:13,elementType:10898},{text:x._('Other', 'homefeed.hideReasons.reason.other', 'Feedback option for Pin hidden for other reasons'),reason:8,elementType:11179}];return(0,u.jsx)(a.Lt,{anchor:e,idealDirection:"down",onDismiss:p,zIndex:r.lI,id:"pin-action-dropdown",children:(0,u.jsx)(a.Lt.Section,{label:x._('Got a moment? Tell us why.', 'homefeed.hideReasons.title', 'Title of follow up question after negative Pin feedback'),children:b.map((({text:e,reason:i,elementType:n})=>(0,u.jsx)(a.Lt.Item,{onSelect:()=>P(i,n),option:{value:`hide-reason-${e.split(" ").join("-")}`,label:e},dataTestId:`hide-reason-${e.split(" ").join("-")}`})))})})}},420632:(e,i,n)=>{n.d(i,{Z:()=>p});var t=n(667294),o=n(294184),a=n.n(o),r=n(391254),s=n(149230),l=n(927104),d=n(898781),c=n(883119),u=n(785893);class _ extends t.Component{constructor(...e){var i,n,t;super(...e),t={showBoardName:!1},(n="state")in(i=this)?Object.defineProperty(i,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[n]=t}componentDidMount(){this.timer=setTimeout((()=>{this.setState({showBoardName:!0})}),950)}componentWillUnmount(){clearTimeout(this.timer)}render(){const{showBoardName:e}=this.state,{isDenseView:i,isNewlySaved:n,name:o,shouldUseLegoStyles:d,type:_,url:p}=this.props;if(d&&i)return null;const h="boardless"===_?this.props.i18n._('Saved to Profile', 'Saved.render.title', 'Text indicating saved to your profile'):o;let m,g;if(!n||e||d){const e=d?(0,u.jsx)(c.xv,{color:"inverse",size:"300",weight:"bold",children:h.length<=20?h:(0,l.Z)(h,20)}):(0,u.jsx)(c.X6,{color:"inverse",size:"400",lineClamp:1,children:h}),i=(0,s.Z)({url:p})?"nofollow":"none";m=p?(0,u.jsx)(c.rU,{rel:i,href:p,children:e}):e}else m=(0,u.jsx)(c.xv,{color:"inverse",children:(0,u.jsx)("span",{className:"deprecatedTextSizeXL",children:this.props.i18n._('Saved!', 'Indication that a pin has been saved', 'Indication that a pin has been saved')})});return n&&(g=e?"board":"saved"),(0,u.jsxs)(t.Fragment,{children:[(0,u.jsx)(r.Z,{unsafeCSS:"\n.SavedAnimation {\n  &.saved {\n    animation: SavedAnimation--down-then-right 1s cubic-bezier(0, 0.33, 0.33, 1.1);\n  }\n\n  &.board {\n    animation: SavedAnimation--to-right 0.12s cubic-bezier(0, 0.33, 0.33, 1.1);\n  }\n}\n\n@keyframes SavedAnimation--down-then-right {\n  0% {\n    opacity: 0;\n    transform: translateY(-24px);\n  }\n\n  33% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n\n  80% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n\n  100% {\n    opacity: 0;\n    transform: translateX(24px);\n  }\n}\n\n@keyframes SavedAnimation--to-right {\n  from {\n    opacity: 0;\n    transform: translateX(-16px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n"}),(0,u.jsx)("div",{"data-test-id":"savedInfo",className:!d&&a()("SavedAnimation",g),children:m})]})}}const p=function(e){const i=(0,d.ZP)();return(0,u.jsx)(_,{...e,i18n:i})}},554779:(e,i,n)=>{n.d(i,{Z:()=>o});var t=n(307640);function o(e){return t.zI.includes(e)}},521460:(e,i,n)=>{n.d(i,{J:()=>t});const t=228},987097:(e,i,n)=>{n.d(i,{Z:()=>a});var t=n(680046),o=n(349700);function a({feedbackOptions:e,pin:i,viewParameter:n},a){const{board:r,pinner:s}=null!=i?i:{},{getFeedbackType:l}=(0,t.ZP)({i18n:a,interpolateNamedTemplate:o.nk});return l({board:r,feedback:e,pin:i,pinner:s,viewParameter:n})}},468593:(e,i,n)=>{n.d(i,{Z:()=>o});var t=n(539497);async function o({filename:e,imgSrc:i,imageDownloadSuccessCallback:n,category:o,isUnauth:a,pinId:r,viewParameter:s,viewType:l},d){return"undefined"==typeof window?Promise.resolve():((0,t.My)(`web.${a?"unauth":"auth"}.download.click.${o||"no_category"}`),d({event_type:82,object_id_str:r,view_type:l||3,view_parameter:s||139}),i&&document?fetch(i,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then((e=>e.blob())).then((i=>{var t,o;const a=document.createElement("a");a.href=window.URL.createObjectURL(i),a.setAttribute("download",e&&e.replace(".","_")),a.style.display="none",null===(t=document.body)||void 0===t||t.appendChild(a),a.click(),null===(o=document.body)||void 0===o||o.removeChild(a),null==n||n()})).catch((()=>{throw new Error("Download image error")})):Promise.resolve())}},521556:(e,i,n)=>{n.d(i,{W:()=>s,Z:()=>l});var t=n(898781),o=n(883119),a=n(785893);const r={__path:"M10.52 3.11a2 2 0 013.59 0l2.06 4.17c.02.06.08.1.15.11l4.6.67a2 2 0 011.1 3.41l-3.32 3.25a.2.2 0 00-.06.17l.78 4.58a2 2 0 01-2.9 2.11l-4.11-2.16a.2.2 0 00-.19 0l-4.11 2.16a2 2 0 01-2.9-2.1l.78-4.59a.2.2 0 00-.06-.17l-3.32-3.25a2 2 0 011.1-3.41l4.6-.67a.2.2 0 00.15-.1zm3.9 5.15l-1.75-3.53a.4.4 0 00-.71 0L10.2 8.26a2 2 0 01-1.5 1.1l-3.9.56a.4.4 0 00-.23.69l2.83 2.75a2 2 0 01.57 1.77L7.31 19a.4.4 0 00.58.42l3.5-1.83a2 2 0 011.86 0l3.48 1.83a.4.4 0 00.59-.42l-.67-3.88a2 2 0 01.57-1.77l2.83-2.75a.4.4 0 00-.22-.69l-3.9-.56a2 2 0 01-1.51-1.1z"},s={__path:"M10.52 3.11a2 2 0 013.59 0l2.06 4.17c.02.06.08.1.15.11l4.6.67a2 2 0 011.1 3.41l-3.32 3.25a.2.2 0 00-.06.17l.78 4.58a2 2 0 01-2.9 2.11l-4.11-2.16a.2.2 0 00-.19 0l-4.11 2.16a2 2 0 01-2.9-2.1l.78-4.59a.2.2 0 00-.06-.17l-3.32-3.25a2 2 0 011.1-3.41l4.6-.67a.2.2 0 00.15-.1z"};function l({isCloseupButton:e,isDisabled:i,isFavorited:n,onTap:l,size:d}){const c=(0,t.ZP)();return e?(0,a.jsx)(o.hU,{accessibilityLabel:c._('Favorite icon', 'pinRep.footer.favoriteIcon', 'Accessible label for favorite icon on Pin'),dangerouslySetSvgPath:n?s:r,disabled:i,iconColor:"darkGray",onClick:l,size:"lg"}):(0,a.jsx)(o.iP,{disabled:i,onTap:l,children:(0,a.jsx)(o.JO,{accessibilityLabel:c._('Favorite icon', 'pinRep.footer.favoriteIcon', 'Accessible label for favorite icon on Pin'),color:"default",dangerouslySetSvgPath:n?s:r,size:d})})}},552684:(e,i,n)=>{function t(e){const i=e.split("/");return[i[2],i[1]]}function o(e,i){return!e||!e.some((e=>e.pin_type===i))}n.d(i,{E:()=>o,J:()=>t})},854035:(e,i,n)=>{n.d(i,{Z:()=>h});var t=n(67828),o=n(941646),a=n(898781),r=n(892819),s=n(349700),l=n(780280),d=n(561195),c=n(883119),u=n(785893);const _=({rating:e,textSize:i,type:n})=>{if("single"===n){const n=parseFloat(e);return Number.isNaN(n)?null:(0,u.jsxs)(c.kC,{alignItems:"center",children:[(0,u.jsx)(d.A,{fill:"full",width:12}),(0,u.jsx)(c.xv,{size:i,children:n.toFixed(1)})]})}return(0,u.jsx)(d.Z,{rating:e,width:12})},p=({bracket:e,count:i,countFormat:n,countType:t,marginStart:d,textSize:_,underline:p})=>{const{locale:h}=(0,l.B)(),m=(0,a.ZP)(),g=(0,r.Z)();if(null==i)return null;let f=g(h,i,{shortform:!0,shortform_maximum_fraction_digits:1});if("text"===n){const e="review"===t?m.ngettext('{{ count }} review', '{{ count }} reviews', i, 'webapp.app.www-unified.productStarRatings.RatingCountText', 'count: total reviews count'):m.ngettext('{{ count }} rating', '{{ count }} ratings', i, 'webapp.app.www-unified.productStarRatings.RatingCountText', 'count: total ratings count');f=(0,s.nk)(e,{count:i}).join("")}return e&&(f=`(${f})`),(0,u.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{borderBottom:p?"1px solid gray":"none"}},marginStart:d,children:(0,u.jsx)(c.xv,{color:p?"subtle":"default",size:_,underline:p,children:(0,u.jsx)(o.Z,{id:"ratings-count-text",display:"inlineBlock",children:f})})})};function h({count:e,countFormat:i,countType:n,rating:o,textSize:a,underline:r}){return(0,t.Z)({count:e,rating:o})?(0,u.jsxs)(c.kC,{alignItems:"center",justifyContent:"start",children:[(0,u.jsx)(_,{rating:o,textSize:a,type:"multiple"}),(0,u.jsx)(p,{count:e,countFormat:i,countType:n,textSize:a,underline:r})]}):null}},67828:(e,i,n)=>{function t({count:e,rating:i}){return Boolean(i&&"None"!==i&&Number.isFinite(e))}n.d(i,{Z:()=>t})},930712:(e,i,n)=>{n.d(i,{Nb:()=>s,Of:()=>l,YO:()=>r,ZP:()=>u,x4:()=>c});var t=n(667294),o=n(620707),a=n(766383);const r=({showProductDetailPage:e,isLargerPane:i,showCloseupContentRight:n})=>e&&i?n?a.Uj:a.zT:1,s=(0,o.qe)((({paneWidth:e,pdpCarouselSlotToPaneRatio:i,showCloseupContentRight:n,showProductDetailPage:t,updateCloseupBodyContainerHeight:o,viewportSize:a,maxWidth:r})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:i,showCloseupContentRight:n,showProductDetailPage:t,updateCloseupBodyContainerHeight:o,viewportSize:a,maxWidth:r}))),l={showCloseupContentRight:!0,showProductDetailPage:!1,updateCloseupBodyContainerHeight:()=>{},viewportSize:"lg",paneWidth:{pdp:a.CI,regular:a.Gg},pdpCarouselSlotToPaneRatio:1,maxWidth:{pdp:a.Kn,regular:a.u6}},d=(0,t.createContext)(l);function c(){const e=(0,t.useContext)(d);if(!e)throw new Error("useCloseupContext must be used within CloseupContextProvider");return e}const u=d},766383:(e,i,n)=>{n.d(i,{CI:()=>a,Ch:()=>s,Gb:()=>l,Gg:()=>t,Ie:()=>_,JV:()=>h,KP:()=>p,Kn:()=>r,Uj:()=>d,bx:()=>m,d2:()=>u,g9:()=>g,iB:()=>f,u6:()=>o,zT:()=>c});const t=508,o=2*t,a=488,r=992,s=672,l=1176,d=.6,c=.84,u=40,_=72,p=740,h=60,m=912,g=32,f={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},504981:(e,i,n)=>{n.r(i),n.d(i,{default:()=>_});var t=n(702664),o=n(834911),a=n(811403),r=n(35495),s=n(407043),l=n(802201),d=n(930712),c=n(883119),u=n(785893);function _({carouselData:e,carouselIndex:i,componentType:n,contextLogData:_,handleCarouselSwipe:p,isCloseup:h,isEditMode:m,pinId:g,viewParameter:f,viewType:v,variant:x}){const{logContextEvent:y}=(0,s.v)(),P=(0,l.S6)()(g),b=e||(0,o.Z)({carouselData:null==P?void 0:P.carousel_data,images:null==P?void 0:P.images,richMetadata:null==P?void 0:P.rich_metadata,richSummary:null==P?void 0:P.rich_summary}),w=(0,t.useDispatch)();if(!b)return null;const S=(e,i,t)=>{m||void 0===a.yR||(e.preventDefault(),e.stopPropagation(),w((0,a.yR)(String(g),t))),void 0!==p&&p(t),((e,i,n,t=0,o,a,s,l,d,c,u)=>{if(!u){const{carousel_slots:u,id:_}=a;e({event_type:108,object_id_str:n,component:d,view_type:l,view_parameter:s,event_data:{pinCarouselSlotEventData:{carouselSlotId:(null==u?void 0:u[t])&&Number(u[t].id),carouselDataId:Number(_),carouselSlotIndex:t,toCarouselSlotIndex:o}},aux_data:{...c,...(0,r.Kl)(i)||{}}})}})(y,P,g,i,t,b,f,v,n,_,m)},{carousel_slots:T=[],index:I}=b,E=void 0!==i?i:I,A="default"===x,C=A?"white":"#555",R=A?"rgba(255, 255, 255, 0.5)":"lightGray";return(0,u.jsx)(d.ZP.Consumer,{children:({viewportSize:e})=>"sm"===e?null:(0,u.jsx)(c.xu,{alignItems:"center","data-test-id":"carousel-ellipsis",display:"flex",justifyContent:h?"end":"center",paddingY:m?1:0,children:[...Array(T.length).keys()].map((e=>{var i;return(0,u.jsx)(c.xu,{paddingX:1,children:(0,u.jsx)(c.iP,{accessibilityLabel:null!==(i=T[e].title)&&void 0!==i?i:"",fullWidth:!1,onTap:({event:i})=>S(i,E,e),rounding:"circle",children:(0,u.jsx)(c.xu,{"data-test-id":"ellipsis-size",height:8,width:8,dangerouslySetInlineStyle:{__style:{backgroundColor:e===E?C:R}},rounding:"circle"})})},g+e)}))})})}},814115:(e,i,n)=>{n.d(i,{Z:()=>g});var t=n(667294),o=n(564194),a=n(834911),r=n(737022),s=n(310227),l=n(802201),d=n(898781),c=n(718482),u=n(883119),_=n(444445),p=n(785893);function h(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}class m extends t.Component{constructor(...e){super(...e),h(this,"state",{showBadge:!0}),h(this,"renderBadge",(()=>{const{carouselData:e,isCloseup:i,showCarouselBadge:n}=this.props;if(!e)return null;const{showBadge:t}=this.state,{carousel_slots:o,index:a}=e,r=t?.8:0;return!i&&n?(0,p.jsx)(u.xu,{alignItems:"center",color:"selected",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new u.Ry(1),dangerouslySetInlineStyle:{__style:{opacity:r,transition:"opacity .3s"}},children:(0,p.jsx)(u.xv,{color:"inverse",children:`${(null!=a?a:0)+1}/${(null!=o?o:[]).length}`})}):null}))}componentDidMount(){this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)}componentDidUpdate(e){const{showBadge:i}=this.state,{carouselData:n}=e,{carouselData:t}=this.props;if(!n||!t)return;const{index:o}=n,{index:a}=t;i&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)),o!==a&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}componentWillUnmount(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}render(){const{isCloseup:e,carouselIndex:i,closeupHeight:n,closeupWidth:t=0,widthRatio:a=1,cropHeight:l,cropWidth:d,carouselData:h,disableTransition:m,highResOnly:g,lowResOnly:f,onError:v,onLoad:x,pinId:y,isEditMode:P,isDenseView:b,pin:w}=this.props;if(!h)return null;if(a>1||a<0)throw new Error("widthRatio should be between 0 and 1 inclusive");const{carousel_slots:S=[],index:T=0}=h,I=void 0!==i?i:T,E=!e&&d,{images:A}=S[I];let C;C=e?t:E||(g?474:b?_.Lo:_.yF);const R=Math.floor(C*a),j=(null==A?void 0:A["236x"])||{},k=l||j.height||0,O=d||j.width||236,N=n||k/O*R,D=(e=>{const i=e.reduce(((e,i)=>{var n;const{images:t}=i,{height:o=1,width:a=1}=(null==t?void 0:t["736x"])||(null==t?void 0:t["236x"])||{},r=`${a}x${o}`,s=(null===(n=e[r])||void 0===n?void 0:n.times)||0;return{...e,[r]:{imageHeight:o,imageWidth:a,times:s+1}}}),{}),n=Object.keys(i).reduce(((e,n)=>i[n].times>e.times?i[n]:e),{times:-1,imageHeight:-1,imageWidth:-1});return Object.keys(i).length>1?{imageHeight:n.imageHeight,imageWidth:n.imageWidth}:null})(S);return(0,p.jsxs)(u.xu,{height:N,display:"flex",alignItems:"center",overflow:"hidden","data-test-id":"carousel-pin",minHeight:s.Ml,"data-test-image-signature":null==w?void 0:w.image_signature,children:[!P&&this.renderBadge(),(0,p.jsx)(o.Z,{trackCarousel:!0,impressionType:"Pin",loggingId:y,slotIndex:T,viewParameter:72,viewType:1,children:(0,p.jsx)(u.xu,{position:"absolute",height:N,width:R,overflow:"hidden"})},`carousel-impression-key-${I}`),(0,p.jsx)(u.xu,{width:R*S.length,dangerouslySetInlineStyle:{__style:{transition:m?"":"left .3s",left:(0,c.vF)(S.length,R,C,I)}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative",children:S.map(((i,n)=>{if(e){const e=n===S.length-1;return(({pinId:e,slot:i,slotIndex:n,onError:t,onLoad:o,widthToUse:a,gap:s},l)=>{const{url:d,width:_,height:h}=(0,r.Z)(i.images)||{},{details:m=""}=i,g=(0,c.GH)(m,l,n);return(0,p.jsx)(u.xu,{"data-test-id":"carousel-slot-container",width:a,height:"100%",marginEnd:s,children:(0,p.jsx)(u.zd,{height:"100%",wash:!0,children:(0,p.jsx)(u.Ee,{alt:g,fit:"contain",naturalHeight:null!=h?h:1,naturalWidth:null!=_?_:1,onError:t,onLoad:o,src:null!=d?d:""})})},`carousel-slot-${e}-${n}`)})({pinId:y,slot:i,slotIndex:n,onError:v,onLoad:x,widthToUse:R,gap:R<C&&!e?1:0},this.props.i18n)}return((e,i,n,t,o,a,r,s,l,d,_,h,m,g,f)=>{var v,x,y;const{images:P,details:b=""}=i;let w,S=236,T=236,I="";var E,A,C,R,j,k,O,N;if(o?(S=474,T=P&&Math.min(S/.8,S/((null!==(E=null===(A=P["564x"])||void 0===A?void 0:A.width)&&void 0!==E?E:1)/(null!==(C=null===(R=P["564x"])||void 0===R?void 0:R.height)&&void 0!==C?C:1))),I=P&&(null===(j=P["564x"])||void 0===j?void 0:j.url)):P&&P["736x"]?(T=P&&P["736x"]&&P["736x"].height,S=P&&P["736x"]&&P["736x"].width,I=P&&P["736x"]&&P["736x"].url):P&&P["236x"]&&(T=P&&P["236x"]&&P["236x"].height,S=P&&P["236x"]&&P["236x"].width,I=P&&P["236x"]&&P["236x"].url),m&&g&&(T=Math.min(m*g,null!==(k=T)&&void 0!==k?k:1)),a)w=`${null!==(O=null==P||null===(N=P["236x"])||void 0===N?void 0:N.url)&&void 0!==O?O:""} 1x`;else if(o){var D,z;w=`${null!==(D=null==P||null===(z=P["564x"])||void 0===z?void 0:z.url)&&void 0!==D?D:""} 1x`}else{var B,L,Z;w=[(null==P?void 0:P["474x"])&&`${null!==(B=P["474x"].url)&&void 0!==B?B:""} 2x`,(null==P?void 0:P["736x"])&&`${null!==(L=P["736x"].url)&&void 0!==L?L:""} 3x`,(null==P?void 0:P.orig)&&`${null!==(Z=P.orig.url)&&void 0!==Z?Z:""} 4x`].filter(Boolean).join(", ")}const M=(0,c.GH)(b,e,t),V=h?void 0:T,F=h?void 0:S,G=!!f,{boxHeight:H,boxWidth:U}=G?{boxHeight:null==f?void 0:f.imageHeight,boxWidth:null==f?void 0:f.imageWidth}:{boxHeight:V,boxWidth:F};return(0,p.jsx)(u.xu,{"data-test-id":"carousel-slot-container",height:H,width:U,children:(0,p.jsx)(u.xu,{height:h?_:void 0,width:h||void 0,"data-test-id":`carousel-img-${t}`,children:(0,p.jsx)(u.Ee,{alt:M,fit:h?"cover":"none",naturalHeight:null!==(v=T)&&void 0!==v?v:1,naturalWidth:null!==(x=S)&&void 0!==x?x:1,onError:r,onLoad:s,src:null!==(y=I)&&void 0!==y?y:"",srcSet:w})})},`carousel-slot-${n}-${t}`)})(this.props.i18n,i,y,n,g,f,v,x,0,0,l,d,N,R,D)}))})]})}}function g(e){const i=(0,d.ZP)(),n=(0,l.S6)()(e.pinId)||e.pin,t=(0,a.Z)({carouselData:null==n?void 0:n.carousel_data,images:null==n?void 0:n.images,richMetadata:null==n?void 0:n.rich_metadata,richSummary:null==n?void 0:n.rich_summary,shouldUnifyImageSizes:!0});return(0,p.jsx)(m,{...e,carouselData:t,i18n:i})}h(m,"defaultProps",{showCarouselBadge:!0})},718482:(e,i,n)=>{n.d(i,{CU:()=>a,GH:()=>l,Iw:()=>s,gA:()=>d,tD:()=>r,vF:()=>c});const t=({containerWidth:e,contentWidth:i,index:n,slotAndGapWidth:o})=>{const a=n-1,r=a*o;return i-r>=e?r:t({index:a,slotAndGapWidth:o,containerWidth:e,contentWidth:i})},o=({containerWidth:e,contentWidth:i,gap:n,index:o,slidesShownPerPosition:a,slotAndGapWidth:r})=>t({containerWidth:e,contentWidth:i,index:o,slotAndGapWidth:r})+(({slidesShownPerPosition:e,slotAndGapWidth:i})=>i-(e-parseInt(e,10))*i)({slidesShownPerPosition:a,slotAndGapWidth:r})-n,a=({containerWidth:e,gap:i,index:n,numberOfSlides:t,slotWidth:a})=>{const r=a+i,s=r*t;if(s<=e)return 0;const l=e/r,d=(({index:e,numberOfSlides:i,slidesShownPerPosition:n})=>i-e-Math.floor(n)<1)({index:n,numberOfSlides:t,slidesShownPerPosition:l})?o({containerWidth:e,contentWidth:s,gap:i,index:n,slidesShownPerPosition:l,slotAndGapWidth:r}):n*r;return d?Math.round(-d):0},r=({containerWidth:e,gap:i,index:n,numberOfSlides:t,slotWidth:o})=>{const r=(o+i)*t;if(r<=e||0===e)return!0;const s=a({containerWidth:e,gap:i,index:n,numberOfSlides:t,slotWidth:o}),l=r-e;return Math.abs(s)+i>=l},s=({containerWidth:e,currentIndex:i,gap:n,index:t,numberOfSlides:o,slotWidth:r})=>{const s=r+n;if(s*o<=e||0===e)return!0;return a({containerWidth:e,gap:n,index:i,numberOfSlides:o,slotWidth:r})+s*t<e+s},l=(e,i,n)=>e||`${i._('carousel image', 'Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed', 'Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed')} ${n}`,d=({highResOnly:e,lowResOnly:i,slot:n})=>{var t,o,a;const{images:r}=n;var s,l,d,c;return i?`${null!==(s=null==r||null===(l=r["236x"])||void 0===l?void 0:l.url)&&void 0!==s?s:""} 1x`:e?`${null!==(d=null==r||null===(c=r["564x"])||void 0===c?void 0:c.url)&&void 0!==d?d:""} 1x`:[(null==r?void 0:r["474x"])&&`${null!==(t=r["474x"].url)&&void 0!==t?t:""} 2x`,(null==r?void 0:r["736x"])&&`${null!==(o=r["736x"].url)&&void 0!==o?o:""} 3x`,(null==r?void 0:r.orig)&&`${null!==(a=r.orig.url)&&void 0!==a?a:""} 4x`].filter(Boolean).join(", ")},c=(e,i,n,t,o=0)=>{if(n===i)return t*i*-1;const a=Math.floor(n-i),r=i+o;return t===e-1?-1*t*r+a:-1*t*r}},968328:(e,i,n)=>{n.d(i,{ZP:()=>l,tY:()=>c,Yh:()=>d});var t=n(702664),o=n(784590),a=n(19121);const r=0,s=1;function l(e){var i;const n=(0,a.Z)(),t=n.isAuth&&n.id===e,r=(0,o.Z)(!n.isAuth||t?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:t&&n.has_quicksave_board||!(!n.isAuth||null===(i=(null!=r?r:{}).data)||void 0===i||!i.has_quicksave_board)}}function d(e){var i;const n=(0,t.useDispatch)(),r=(0,a.Z)(),s=r.isAuth&&!!r.boardCount&&r.boardCount<5&&e,l=(0,o.Z)(s&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:r.isAuth&&r.id}}:null);return r.isAuth&&void 0===r.save_behavior&&l&&null!==(i=l.data)&&void 0!==i&&i.id&&n({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:l.data.save_behavior}}),{showEnabledSaveBehavior:s}}function c(e){const i=(0,a.Z)();let n;return e&&(i.save_behavior===r?n={type:"classic"}:i.save_behavior===s&&(n={type:"inline"})),{saveBehaviorType:n}}},86551:(e,i,n)=>{n.d(i,{Z:()=>a});var t=n(784590),o=n(276775);function a(){const{username:e}=(0,o.useParams)();return(0,t.Z)(null==e?null:{name:"UserResource",options:{username:e,field_set_key:"profile"}})}},782050:(e,i,n)=>{n.d(i,{k:()=>a,s:()=>r});var t=n(667294);const o=(0,t.createContext)(Object.freeze({})),a=o.Provider;function r(){return(0,t.useContext)(o)}},907811:(e,i,n)=>{n.d(i,{Ac:()=>a,c7:()=>o,cg:()=>t});const t=-1,o=5,a=6}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/1921-d356476603e2a872.mjs.map